<html>
<head>
    <meta http-equiv=Content-Type content="text/html; charset=UTF-8">
    <style type="text/css">
        <!--
        span.cls_002 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_002 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_003 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        div.cls_003 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        span.cls_004 {
            font-family: Arial, serif;
            font-size: 28.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_004 {
            font-family: Arial, serif;
            font-size: 28.1px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_005 {
            font-family: Arial, serif;
            font-size: 8.5px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_005 {
            font-family: Arial, serif;
            font-size: 8.5px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_006 {
            font-family: Courier New, serif;
            font-size: 5.7px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_006 {
            font-family: Courier New, serif;
            font-size: 5.7px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_007 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_007 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_008 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_008 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(51, 51, 51);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_009 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        div.cls_009 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        span.cls_010 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_010 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_011 {
            font-family: Courier New, serif;
            font-size: 5.7px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        div.cls_011 {
            font-family: Courier New, serif;
            font-size: 5.7px;
            color: rgb(6, 6, 6);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        span.cls_012 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_012 {
            font-family: Arial, serif;
            font-size: 14.1px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_013 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_013 {
            font-family: Courier New, serif;
            font-size: 8.5px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_014 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(102, 101, 102);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_014 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(102, 101, 102);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_015 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_015 {
            font-family: Arial, serif;
            font-size: 10.6px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_016 {
            font-family: Courier New, serif;
            font-size: 6.4px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        div.cls_016 {
            font-family: Courier New, serif;
            font-size: 6.4px;
            color: rgb(64, 63, 64);
            font-weight: normal;
            font-style: normal;
            text-decoration: none
        }

        span.cls_017 {
            font-family: Courier New, serif;
            font-size: 6.4px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        div.cls_017 {
            font-family: Courier New, serif;
            font-size: 6.4px;
            color: rgb(0, 0, 0);
            font-weight: normal;
            font-style: italic;
            text-decoration: none
        }

        -->
    </style>
    <script type="text/javascript" src="img/wz_jsgraphics.js"></script>
</head>
<body>
<div style="position:absolute;left:50%;margin-left:-297px;top:0px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background001.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:851px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background002.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">RESTful Web API Design with Node.js 10</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.12px" class="cls_003"><span class="cls_003">Third Edition</span>
    </div>
    <div style="position:absolute;left:87.54px;top:449.47px" class="cls_002"><span class="cls_002">Learn to create robust RESTful web services with Node.js,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:465.58px" class="cls_002"><span class="cls_002">MongoDB, and Express.js</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:1702px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background003.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">Valentin Bojinov</span></div>
    <div style="position:absolute;left:87.54px;top:512.50px" class="cls_002"><span
            class="cls_002">BIRMINGHAM - MUMBAI</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:2553px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background004.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">RESTful Web API Design with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">Node.js 10 Third Edition</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.17px" class="cls_005"><span class="cls_005">Copyright © 2018 Packt Publishing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_005"><span class="cls_005">All rights reserved. No part of this book may be reproduced, stored in a retrieval system, or transmitted in any</span>
    </div>
    <div style="position:absolute;left:87.54px;top:265.28px" class="cls_005"><span class="cls_005">form or by any means, without the prior written permission of the publisher, except in the case of brief</span>
    </div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_005"><span class="cls_005">quotations embedded in critical articles or reviews.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:294.70px" class="cls_005"><span class="cls_005">Every effort has been made in the preparation of this book to ensure the accuracy of the information presented.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:304.50px" class="cls_005"><span class="cls_005">However, the information contained in this book is sold without warranty, either express or implied. Neither the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:314.31px" class="cls_005"><span class="cls_005">author, nor Packt Publishing or its dealers and distributors, will be held liable for any damages caused or alleged</span>
    </div>
    <div style="position:absolute;left:87.54px;top:324.11px" class="cls_005"><span class="cls_005">to have been caused directly or indirectly by this book.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:344.42px" class="cls_005"><span class="cls_005">Packt Publishing has endeavored to provide trademark information about all of the companies and products</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_005"><span class="cls_005">mentioned in this book by the appropriate use of capitals. However, Packt Publishing cannot guarantee the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:364.03px" class="cls_005"><span class="cls_005">accuracy of this information.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:383.64px" class="cls_005"><span class="cls_005">Commissioning Editor: Amarabha Banerjee</span>
    </div>
    <div style="position:absolute;left:87.54px;top:393.44px" class="cls_005"><span class="cls_005">Acquisition Editor: Reshma Raman</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.25px" class="cls_005"><span class="cls_005">Content Development Editor: Francis Carneiro</span>
    </div>
    <div style="position:absolute;left:87.54px;top:413.05px" class="cls_005"><span class="cls_005">Technical Editor: Sachin Sunilkumar</span>
    </div>
    <div style="position:absolute;left:87.54px;top:422.86px" class="cls_005"><span class="cls_005">Copy Editor: Shaila Kusanale</span>
    </div>
    <div style="position:absolute;left:87.54px;top:432.66px" class="cls_005"><span class="cls_005">Project Coordinator: Sheejal Shah</span>
    </div>
    <div style="position:absolute;left:87.54px;top:442.47px" class="cls_005"><span class="cls_005">Proofreader: Safis Editing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.27px" class="cls_005"><span class="cls_005">Indexer: Mariammal Chettiyar</span>
    </div>
    <div style="position:absolute;left:87.54px;top:462.07px" class="cls_005"><span class="cls_005">Graphics: Jason Monteiro</span>
    </div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_005"><span class="cls_005">Production Coordinator: Shraddha Falebhai</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_005"><span class="cls_005">First published: October 2016</span>
    </div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_005"><span class="cls_005">Second edition: October 2017</span>
    </div>
    <div style="position:absolute;left:87.54px;top:511.80px" class="cls_005"><span class="cls_005">Third edition: April 2018</span>
    </div>
    <div style="position:absolute;left:87.54px;top:531.41px" class="cls_005"><span class="cls_005">Production reference: 1300418</span>
    </div>
    <div style="position:absolute;left:87.54px;top:551.72px" class="cls_005"><span class="cls_005">Published by Packt Publishing Ltd.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:561.52px" class="cls_005"><span class="cls_005">Livery Place</span>
    </div>
    <div style="position:absolute;left:87.54px;top:571.33px" class="cls_005"><span
            class="cls_005">35 Livery Street</span></div>
    <div style="position:absolute;left:87.54px;top:581.13px" class="cls_005"><span class="cls_005">Birmingham</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.93px" class="cls_005"><span class="cls_005">B3 2PB, UK.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:611.24px" class="cls_005"><span class="cls_005">ISBN 978-1-78862-332-2</span>
    </div>
    <div style="position:absolute;left:87.54px;top:630.85px" class="cls_006"><span class="cls_006"> </span><A
            HREF="http://www.packtpub.com/">www.packtpub.com</A></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:3404px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background005.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:254.08px" class="cls_007"><span class="cls_007">mapt.io</span></div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_002"><span class="cls_002">Mapt is an online digital library that gives you full access to over</span>
    </div>
    <div style="position:absolute;left:87.54px;top:291.90px" class="cls_002"><span class="cls_002">5,000 books and videos, as well as industry leading tools to help</span>
    </div>
    <div style="position:absolute;left:87.54px;top:308.70px" class="cls_002"><span class="cls_002">you plan your personal development and advance your career. For</span>
    </div>
    <div style="position:absolute;left:87.54px;top:325.51px" class="cls_002"><span class="cls_002">more information, please visit our website.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:4255px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background006.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Why subscribe?</span>
    </div>
    <div style="position:absolute;left:133.06px;top:217.66px" class="cls_002"><span class="cls_002">Spend less time learning and more time coding with</span>
    </div>
    <div style="position:absolute;left:133.06px;top:236.57px" class="cls_002"><span class="cls_002">practical eBooks and Videos from over 4,000 industry</span>
    </div>
    <div style="position:absolute;left:133.06px;top:253.38px" class="cls_002"><span class="cls_002">professionals</span>
    </div>
    <div style="position:absolute;left:133.06px;top:282.79px" class="cls_002"><span class="cls_002">Improve your learning with Skill Plans built especially for</span>
    </div>
    <div style="position:absolute;left:133.06px;top:301.70px" class="cls_002"><span class="cls_002">you</span></div>
    <div style="position:absolute;left:133.06px;top:331.11px" class="cls_002"><span class="cls_002">Get a free eBook or video every month</span>
    </div>
    <div style="position:absolute;left:133.06px;top:362.63px" class="cls_002"><span class="cls_002">Mapt is fully searchable</span>
    </div>
    <div style="position:absolute;left:133.06px;top:394.14px" class="cls_002"><span class="cls_002">Copy and paste, print, and bookmark content</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:5106px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background007.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">PacktPub.com</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Did you know that Packt offers eBook versions of every book</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">published, with PDF and ePub files available? You can upgrade to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span
            class="cls_002">the eBook version at </span><A HREF="http://www.packtpub.com/">www.PacktPub.com</A> </span>
        <span class="cls_002"> and as a print book customer,</span></div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">you are entitled to a discount on the eBook copy. Get in touch with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">us at </span><span
            class="cls_008">service@packtpub.com</span><span class="cls_002"> for more details.</span></div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">At </span><A
            HREF="http://www.packtpub.com/">www.PacktPub.com</A> </span><span class="cls_002">, you can also read a collection of free technical</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">articles, sign up for a range of free newsletters, and receive exclusive</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">discounts and offers on Packt books and eBooks.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:5957px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background008.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Contributors</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:6808px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background009.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">About the author</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Valentin Bojinov studied computer science at the Technological</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">School of Electronic Systems in Sofia, Bulgaria, a college within the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">Technical University of Sofia. He holds a B.Sc. in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">telecommunication and information engineering. Valentin is an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">expert in Java, SOAP, RESTful web services, and B2B integration.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">He specializes B2B Integration and Service Oriented Architecture</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">and currently works as an Senior Integration Consultant in an UK</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">consultancy company Estafet Limited.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_009"><span class="cls_009">I would like thank my  my dad Emil, for encouraging me to study programming almost</span>
    </div>
    <div style="position:absolute;left:87.54px;top:368.93px" class="cls_009"><span class="cls_009">20 years ago, and to mummy Anka, for always being there for me! Special thanks to all</span>
    </div>
    <div style="position:absolute;left:87.54px;top:380.84px" class="cls_009"><span class="cls_009">my mentors from school for showing me how to learn efficiently and to never give up. I</span>
    </div>
    <div style="position:absolute;left:87.54px;top:392.74px" class="cls_009"><span class="cls_009">also have to mention my extraordinary schoolmates I had the chance to study with!</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:7659px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background010.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">About the reviewers</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Amit Kothari is a full-stack developer based in Melbourne,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">Australia. He has more than 12 years experience in designing and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">developing software systems and has worked on a wide range of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">projects across various domains including telecommunication,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">retails, banking and finance.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">Amit is also the co-author of the book - </span><span
            class="cls_003">Chatbots for eCommerce:</span></div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_003"><span class="cls_003">Learn how to build a virtual shopping assistant</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:443.17px" class="cls_002"><span class="cls_002">Erina has completed her master's and proactively working as an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:459.97px" class="cls_002"><span class="cls_002">assistant professor in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:476.78px" class="cls_002"><span class="cls_002">computer science department of Thakur college, Mumbai. Her</span>
    </div>
    <div style="position:absolute;left:87.54px;top:493.59px" class="cls_002"><span
            class="cls_002">enthusiasm in web</span></div>
    <div style="position:absolute;left:87.54px;top:510.40px" class="cls_002"><span class="cls_002">technologies inspires her to contribute for freelance JavaScript</span>
    </div>
    <div style="position:absolute;left:87.54px;top:527.20px" class="cls_002"><span class="cls_002">projects, especially on</span>
    </div>
    <div style="position:absolute;left:87.54px;top:544.01px" class="cls_002"><span class="cls_002">Node.js. Her research topics were SDN and IoT, which according to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:560.82px" class="cls_002"><span
            class="cls_002">her create amazing</span></div>
    <div style="position:absolute;left:87.54px;top:577.63px" class="cls_002"><span class="cls_002">solutions for various web technologies when they are used together.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:594.44px" class="cls_002"><span class="cls_002">Nowadays, she focuses on blockchain and enjoys fiddling with its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:611.24px" class="cls_002"><span class="cls_002">concepts in JavaScript.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:8510px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background011.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">What this book covers</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_007"><span class="cls_007">Chapter 1</span><span
            class="cls_002">, </span><span class="cls_003">REST - What You Did Not Know</span><span class="cls_002">, gives you a brief</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">introduction to the history of REST and how it couples with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">HTTP protocol.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_007"><span class="cls_007">Chapter 2</span><span
            class="cls_002">, </span><span class="cls_003">Getting Started with Node.js</span><span class="cls_002">, teaches you how to install</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">Node.js and how to work with its package manager to install</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">modules. You'll also develop your first HTTP server application and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">write automated unit tests for HTTP handler using mock request</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">objects.</span></div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_007"><span class="cls_007">Chapter 3</span><span
            class="cls_002">, </span><span class="cls_003">Building a Typical Web API</span><span class="cls_002">, takes you through structuring</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span class="cls_002">your application using human-readable URL and URI parameters.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">You will get to develop a read-only RESTful service application,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">using the filesystem for storage.</span>
    </div>
    <div style="position:absolute;left:90.91px;top:459.27px" class="cls_007"><span class="cls_007">Chapter 4</span><span
            class="cls_002">, </span><span class="cls_003">Using NoSQL Databases</span><span class="cls_002">, showcases how to use the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:476.08px" class="cls_002"><span class="cls_002">MongoDB NoSQL database, and explains the foundation of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.89px" class="cls_002"><span
            class="cls_002">document data stores.</span></div>
    <div style="position:absolute;left:87.54px;top:527.20px" class="cls_007"><span class="cls_007">Chapter 5</span><span
            class="cls_002">, </span><span class="cls_003">Restful API Design Guidelines</span><span class="cls_002">, explains that there are a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:544.01px" class="cls_002"><span class="cls_002">number of prerequisites that a RESTful API should meet.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:578.33px" class="cls_007"><span class="cls_007">Chapter 6</span><span
            class="cls_002">, </span><span class="cls_003">Implementing a Full-Fledged RESTful Service</span><span
            class="cls_002">, focuses on</span></div>
    <div style="position:absolute;left:87.54px;top:595.14px" class="cls_002"><span class="cls_002">implementing a production-ready RESTful service that uses NoSQL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:611.94px" class="cls_002"><span class="cls_002">to store its data. You will get to learn how to handle binary data and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:628.75px" class="cls_002"><span class="cls_002">how to version an API while it evolves.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:663.07px" class="cls_007"><span class="cls_007">Chapter 7</span><span
            class="cls_002">, </span><span class="cls_003">Preparing a RESTful API for Production</span><span
            class="cls_002">, explains that</span></div>
    <div style="position:absolute;left:87.54px;top:679.88px" class="cls_002"><span class="cls_002">feature complete and full-fledged implementations aren't</span>
    </div>
    <div style="position:absolute;left:87.54px;top:696.68px" class="cls_002"><span class="cls_002">necessarily production-ready.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:9361px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background012.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_007"><span class="cls_007">Chapter 8</span><span
            class="cls_002">, </span><span class="cls_003">Consuming a RESTful API</span><span class="cls_002">, showcases a sample frontend</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">client that serves as a consumption reference implementation.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:155.33px" class="cls_007"><span class="cls_007">Chapter 9</span><span
            class="cls_002">, </span><span class="cls_003">Securing the Application</span><span class="cls_002">, covers restricting access to your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">data by choosing an appropriate authentication approach. You'll</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">then be able to protect data leakage with transport layer security.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:10212px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background013.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Packt is searching for authors</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">like you</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">If you're interested in becoming an author for Packt, please visit </span><span
            class="cls_007">auth</span></div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_007"><span
            class="cls_007">ors.packtpub.com</span><span class="cls_002"> and apply today. We have worked with thousands of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">developers and tech professionals, just like you, to help them share</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">their insight with the global tech community. You can make a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">general application, apply for a specific hot topic that we are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">recruiting an author for, or submit your own idea.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:11063px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background014.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:163.04px" class="cls_004"><span
            class="cls_004">Table of Contents</span></div>
    <div style="position:absolute;left:133.06px;top:226.07px" class="cls_007"><span class="cls_007">Title Page</span>
    </div>
    <div style="position:absolute;left:133.06px;top:240.07px" class="cls_007"><span class="cls_007">Copyright and Credits</span>
    </div>
    <div style="position:absolute;left:178.58px;top:280.69px" class="cls_007"><span class="cls_007">RESTful Web API Design with Node.js 10 Third Edition</span>
    </div>
    <div style="position:absolute;left:133.06px;top:322.71px" class="cls_007"><span class="cls_007">Packt Upsell</span>
    </div>
    <div style="position:absolute;left:178.58px;top:363.33px" class="cls_007"><span
            class="cls_007">Why subscribe?</span></div>
    <div style="position:absolute;left:178.58px;top:384.34px" class="cls_007"><span class="cls_007">PacktPub.com</span>
    </div>
    <div style="position:absolute;left:133.06px;top:426.36px" class="cls_007"><span class="cls_007">Contributors</span>
    </div>
    <div style="position:absolute;left:178.58px;top:466.98px" class="cls_007"><span
            class="cls_007">About the author</span></div>
    <div style="position:absolute;left:178.58px;top:487.99px" class="cls_007"><span
            class="cls_007">About the reviewers</span></div>
    <div style="position:absolute;left:178.58px;top:509.00px" class="cls_007"><span class="cls_007">Packt is searching for authors like you</span>
    </div>
    <div style="position:absolute;left:133.06px;top:551.02px" class="cls_007"><span class="cls_007">Preface</span></div>
    <div style="position:absolute;left:178.58px;top:591.63px" class="cls_007"><span
            class="cls_007">Who this book is for</span></div>
    <div style="position:absolute;left:178.58px;top:612.64px" class="cls_007"><span class="cls_007">What this book covers</span>
    </div>
    <div style="position:absolute;left:178.58px;top:626.65px" class="cls_007"><span class="cls_007">To get the most out of this book</span>
    </div>
    <div style="position:absolute;left:224.10px;top:667.27px" class="cls_007"><span class="cls_007">Download the example code files</span>
    </div>
    <div style="position:absolute;left:224.10px;top:688.28px" class="cls_007"><span
            class="cls_007">Conventions used</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:11914px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background015.jpg" width=595 height=841></div>
    <div style="position:absolute;left:178.58px;top:104.91px" class="cls_007"><span class="cls_007">Get in touch</span>
    </div>
    <div style="position:absolute;left:224.10px;top:145.53px" class="cls_007"><span class="cls_007">Reviews</span></div>
    <div style="position:absolute;left:115.55px;top:188.95px" class="cls_002"><span class="cls_002">1. </span><span
            class="cls_007">REST &#x2013; What You Did Not Know</span></div>
    <div style="position:absolute;left:178.58px;top:229.57px" class="cls_007"><span
            class="cls_007">REST fundamentals</span></div>
    <div style="position:absolute;left:224.10px;top:270.19px" class="cls_007"><span class="cls_007">Principle 1&#xA0;&#x2013; Everything is a resource</span>
    </div>
    <div style="position:absolute;left:224.10px;top:291.20px" class="cls_007"><span class="cls_007">Principle 2&#xA0;&#x2013; Each resource is identifiable</span>
    </div>
    <div style="position:absolute;left:224.10px;top:312.20px" class="cls_007"><span class="cls_007">by a unique identifier</span>
    </div>
    <div style="position:absolute;left:224.10px;top:333.21px" class="cls_007"><span class="cls_007">Principle 3&#xA0;&#x2013; Manipulate resources via stand</span>
    </div>
    <div style="position:absolute;left:224.10px;top:354.22px" class="cls_007"><span
            class="cls_007">ard HTTP methods</span></div>
    <div style="position:absolute;left:224.10px;top:375.23px" class="cls_007"><span class="cls_007">Principle 4&#xA0;&#x2013; Resources can have multiple re</span>
    </div>
    <div style="position:absolute;left:224.10px;top:396.24px" class="cls_007"><span class="cls_007">presentations</span>
    </div>
    <div style="position:absolute;left:224.10px;top:417.25px" class="cls_007"><span class="cls_007">Principle 5&#xA0;&#x2013; Communicate with resources in</span>
    </div>
    <div style="position:absolute;left:224.10px;top:438.26px" class="cls_007"><span
            class="cls_007">a stateless manner</span></div>
    <div style="position:absolute;left:178.58px;top:480.28px" class="cls_007"><span
            class="cls_007">The REST goals</span></div>
    <div style="position:absolute;left:224.10px;top:520.90px" class="cls_007"><span class="cls_007">Separation of the representation and the resource</span>
    </div>
    <div style="position:absolute;left:224.10px;top:541.91px" class="cls_007"><span class="cls_007">Visibility</span>
    </div>
    <div style="position:absolute;left:224.10px;top:562.92px" class="cls_007"><span class="cls_007">Reliability</span>
    </div>
    <div style="position:absolute;left:224.10px;top:583.93px" class="cls_007"><span class="cls_007">Scalability and performance</span>
    </div>
    <div style="position:absolute;left:178.58px;top:632.95px" class="cls_007"><span
            class="cls_007">Working with WADL</span></div>
    <div style="position:absolute;left:178.58px;top:646.96px" class="cls_007"><span class="cls_007">Documenting RESTful APIs with Swagger</span>
    </div>
    <div style="position:absolute;left:224.10px;top:687.58px" class="cls_007"><span class="cls_007">Taking advantage of the existing infrastructure</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:12765px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background016.jpg" width=595 height=841></div>
    <div style="position:absolute;left:178.58px;top:111.91px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:114.15px;top:155.33px" class="cls_002"><span class="cls_002">2. </span><span
            class="cls_007">Getting Started with Node.js</span></div>
    <div style="position:absolute;left:178.58px;top:195.95px" class="cls_007"><span
            class="cls_007">Installing Node.js</span></div>
    <div style="position:absolute;left:224.10px;top:236.57px" class="cls_007"><span class="cls_007">Npm</span></div>
    <div style="position:absolute;left:178.58px;top:285.59px" class="cls_007"><span class="cls_007">Installing the Express framework and other modules</span>
    </div>
    <div style="position:absolute;left:178.58px;top:306.60px" class="cls_007"><span class="cls_007">Setting up a development environment</span>
    </div>
    <div style="position:absolute;left:178.58px;top:327.61px" class="cls_007"><span class="cls_007">Handling HTTP requests</span>
    </div>
    <div style="position:absolute;left:178.58px;top:348.62px" class="cls_007"><span
            class="cls_007">Modularizing code</span></div>
    <div style="position:absolute;left:178.58px;top:362.63px" class="cls_007"><span
            class="cls_007">Testing Node.js</span></div>
    <div style="position:absolute;left:224.10px;top:403.25px" class="cls_007"><span class="cls_007">Working with mock objects</span>
    </div>
    <div style="position:absolute;left:178.58px;top:445.27px" class="cls_007"><span class="cls_007">Deploying an application</span>
    </div>
    <div style="position:absolute;left:224.10px;top:485.89px" class="cls_007"><span class="cls_007">Nodejitsu</span>
    </div>
    <div style="position:absolute;left:224.10px;top:506.90px" class="cls_007"><span
            class="cls_007">Microsoft Azure</span></div>
    <div style="position:absolute;left:224.10px;top:527.91px" class="cls_007"><span class="cls_007">Heroku</span></div>
    <div style="position:absolute;left:178.58px;top:576.93px" class="cls_007"><span
            class="cls_007">Self-test questions</span></div>
    <div style="position:absolute;left:178.58px;top:597.94px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:114.15px;top:641.36px" class="cls_002"><span class="cls_002">3. </span><span
            class="cls_007">Building a Typical Web API</span></div>
    <div style="position:absolute;left:178.58px;top:688.98px" class="cls_007"><span
            class="cls_007">Specifying the API</span></div>
    <div style="position:absolute;left:178.58px;top:709.99px" class="cls_007"><span
            class="cls_007">Implementing routes</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:13616px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background017.jpg" width=595 height=841></div>
    <div style="position:absolute;left:178.58px;top:111.91px" class="cls_007"><span class="cls_007">Querying the API using test data</span>
    </div>
    <div style="position:absolute;left:178.58px;top:132.92px" class="cls_007"><span
            class="cls_007">Content negotiation</span></div>
    <div style="position:absolute;left:178.58px;top:153.93px" class="cls_007"><span
            class="cls_007">API versioning</span></div>
    <div style="position:absolute;left:178.58px;top:174.94px" class="cls_007"><span
            class="cls_007">Self-test questions</span></div>
    <div style="position:absolute;left:178.58px;top:195.95px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:114.15px;top:239.37px" class="cls_002"><span class="cls_002">4. </span><span
            class="cls_007">Using NoSQL Databases</span></div>
    <div style="position:absolute;left:178.58px;top:286.99px" class="cls_007"><span class="cls_007">MongoDB &#x2013; a document store database</span>
    </div>
    <div style="position:absolute;left:178.58px;top:308.00px" class="cls_007"><span class="cls_007">Database modeling with Mongoose</span>
    </div>
    <div style="position:absolute;left:178.58px;top:329.01px" class="cls_007"><span class="cls_007">Testing a Mongoose model with Mocha</span>
    </div>
    <div style="position:absolute;left:178.58px;top:350.02px" class="cls_007"><span class="cls_007">Creating a user-defined model around a Mongoose model</span>
    </div>
    <div style="position:absolute;left:178.58px;top:371.03px" class="cls_007"><span class="cls_007">Wiring up a NoSQL database module to Express</span>
    </div>
    <div style="position:absolute;left:178.58px;top:392.04px" class="cls_007"><span
            class="cls_007">Self-test questions</span></div>
    <div style="position:absolute;left:178.58px;top:413.05px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:114.15px;top:456.47px" class="cls_002"><span class="cls_002">5. </span><span
            class="cls_007">Restful API Design Guidelines</span></div>
    <div style="position:absolute;left:178.58px;top:504.09px" class="cls_007"><span class="cls_007">Endpoint URLs and HTTP status codes best practices</span>
    </div>
    <div style="position:absolute;left:178.58px;top:525.10px" class="cls_007"><span class="cls_007">Extensibility and versioning</span>
    </div>
    <div style="position:absolute;left:178.58px;top:546.11px" class="cls_007"><span class="cls_007">Linked data</span>
    </div>
    <div style="position:absolute;left:178.58px;top:567.12px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:113.45px;top:610.54px" class="cls_002"><span class="cls_002">6. </span><span
            class="cls_007">Implementing a Full Fledged RESTful Service</span></div>
    <div style="position:absolute;left:178.58px;top:658.17px" class="cls_007"><span class="cls_007">Working with arbitrary data</span>
    </div>
    <div style="position:absolute;left:178.58px;top:679.18px" class="cls_007"><span class="cls_007">Linking</span></div>
    <div style="position:absolute;left:178.58px;top:700.18px" class="cls_007"><span class="cls_007">Implementing paging and filtering</span>
    </div>
    <div style="position:absolute;left:178.58px;top:714.19px" class="cls_007"><span class="cls_007">Caching</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:14467px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background018.jpg" width=595 height=841></div>
    <div style="position:absolute;left:224.10px;top:111.91px" class="cls_007"><span class="cls_007">Supplying the Cache-Control header in Express applicatio</span>
    </div>
    <div style="position:absolute;left:224.10px;top:132.92px" class="cls_007"><span class="cls_007">ns</span></div>
    <div style="position:absolute;left:178.58px;top:181.94px" class="cls_007"><span class="cls_007">Discovering and exploring RESTful services</span>
    </div>
    <div style="position:absolute;left:178.58px;top:202.95px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:114.85px;top:246.37px" class="cls_002"><span class="cls_002">7. </span><span
            class="cls_007">Preparing a RESTful API for Production</span></div>
    <div style="position:absolute;left:178.58px;top:294.00px" class="cls_007"><span class="cls_007">Documenting RESTful APIs</span>
    </div>
    <div style="position:absolute;left:178.58px;top:315.01px" class="cls_007"><span class="cls_007">Testing RESTful APIs with Mocha</span>
    </div>
    <div style="position:absolute;left:178.58px;top:336.02px" class="cls_007"><span class="cls_007">The microservices revolution</span>
    </div>
    <div style="position:absolute;left:178.58px;top:357.03px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:113.45px;top:400.45px" class="cls_002"><span class="cls_002">8. </span><span
            class="cls_007">Consuming a RESTful API</span></div>
    <div style="position:absolute;left:178.58px;top:448.07px" class="cls_007"><span class="cls_007">Consuming RESTful services with jQuery</span>
    </div>
    <div style="position:absolute;left:178.58px;top:469.08px" class="cls_007"><span class="cls_007">Troubleshooting and identifying problems on the wire</span>
    </div>
    <div style="position:absolute;left:178.58px;top:490.09px" class="cls_007"><span class="cls_007">Cross Origin Resource Sharing</span>
    </div>
    <div style="position:absolute;left:178.58px;top:511.10px" class="cls_007"><span class="cls_007">Content Delivery Networks</span>
    </div>
    <div style="position:absolute;left:178.58px;top:532.11px" class="cls_007"><span class="cls_007">Handling HTTP status codes on the client side</span>
    </div>
    <div style="position:absolute;left:178.58px;top:553.12px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:113.45px;top:596.54px" class="cls_002"><span class="cls_002">9. </span><span
            class="cls_007">Securing the Application</span></div>
    <div style="position:absolute;left:178.58px;top:637.16px" class="cls_007"><span
            class="cls_007">Authentication</span></div>
    <div style="position:absolute;left:224.10px;top:677.77px" class="cls_007"><span
            class="cls_007">Basic authentication</span></div>
    <div style="position:absolute;left:224.10px;top:691.78px" class="cls_007"><span class="cls_007">Passport</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:15318px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background019.jpg" width=595 height=841></div>
    <div style="position:absolute;left:269.62px;top:111.91px" class="cls_007"><span class="cls_007">Passport's basic authentication strategy</span>
    </div>
    <div style="position:absolute;left:269.62px;top:132.92px" class="cls_007"><span class="cls_007">Passport's OAuth Strategy</span>
    </div>
    <div style="position:absolute;left:269.62px;top:153.93px" class="cls_007"><span class="cls_007">Passport's third-party authentication strategie</span>
    </div>
    <div style="position:absolute;left:269.62px;top:174.94px" class="cls_007"><span class="cls_007">s</span></div>
    <div style="position:absolute;left:178.58px;top:223.96px" class="cls_007"><span class="cls_007">Authorization</span>
    </div>
    <div style="position:absolute;left:178.58px;top:237.97px" class="cls_007"><span class="cls_007">Transport layer security</span>
    </div>
    <div style="position:absolute;left:224.10px;top:278.59px" class="cls_007"><span
            class="cls_007">Self-test questions</span></div>
    <div style="position:absolute;left:178.58px;top:327.61px" class="cls_007"><span class="cls_007">Summary</span></div>
    <div style="position:absolute;left:133.06px;top:369.63px" class="cls_007"><span class="cls_007">Other Books You May Enjoy</span>
    </div>
    <div style="position:absolute;left:178.58px;top:410.25px" class="cls_007"><span class="cls_007">Leave a review - let other readers know what you think</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:16169px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background020.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Preface</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">RESTful services have become the de facto standard data feed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">providers for social services, news feeds, and mobile devices. They</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">deliver a large amount of data to millions of users. Thus, they need</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">to address high-availability requirements, such as reliability and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">scalability. This book will show you how to utilize the Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">platform to implement a robust and performant data service. By the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">end of this book, you will have learned how to implement a real-life</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">RESTful service, taking advantage of the modern NoSQL database</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">to serve both JSON and binary content.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">Important topics, such as correct URI structuring and security</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.13px" class="cls_002"><span class="cls_002">features, are also covered, with detailed examples, showing you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:389.94px" class="cls_002"><span class="cls_002">everything you need to know to start implementing the robust</span>
    </div>
    <div style="position:absolute;left:87.54px;top:406.75px" class="cls_002"><span class="cls_002">RESTful APIs that serve content to your applications.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:17020px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background021.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Who this book is for</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">This book targets developers who want to enrich their development</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">skills by learning how to develop scalable, server-side, RESTful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">applications based on the Node.js platform. You also need to be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">aware of HTTP communication concepts and should have a working</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">knowledge of the JavaScript language. Keep in mind that this is not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">a book that will teach you how to program in JavaScript. Knowledge</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">of REST will be an added advantage but is definitely not a necessity.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:17871px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background022.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">To get the most out of this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">book</span></div>
    <div style="position:absolute;left:115.55px;top:248.48px" class="cls_002"><span class="cls_002">1. Inform the reader of the things that they need to know</span>
    </div>
    <div style="position:absolute;left:133.06px;top:269.49px" class="cls_002"><span class="cls_002">before they start, and spell out what knowledge you are</span>
    </div>
    <div style="position:absolute;left:133.06px;top:290.50px" class="cls_002"><span class="cls_002">assuming</span>
    </div>
    <div style="position:absolute;left:114.15px;top:311.50px" class="cls_002"><span class="cls_002">2. Any additional installation instructions and information</span>
    </div>
    <div style="position:absolute;left:133.06px;top:332.51px" class="cls_002"><span class="cls_002">they need for getting set up</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:18722px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background023.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Download the example code</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">files</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">You can download the example code files for this book from your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span
            class="cls_002">account at </span><span class="cls_007">www.packtpub.com</span><span class="cls_002">. If you purchased this book elsewhere, you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">can visit </span><A
            HREF="http://www.packtpub.com/support/">www.packtpub.com/support</A> </span><span class="cls_002"> and register to have the files emailed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span
            class="cls_002">directly to you.</span></div>
    <div style="position:absolute;left:87.54px;top:320.61px" class="cls_002"><span class="cls_002">You can download the code files by following these steps:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:360.53px" class="cls_002"><span class="cls_002">1. Log in or register at </span><span
            class="cls_007">www.packtpub.com</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:114.15px;top:381.54px" class="cls_002"><span class="cls_002">2. Select the SUPPORT tab.</span>
    </div>
    <div style="position:absolute;left:114.15px;top:402.55px" class="cls_002"><span class="cls_002">3. Click on Code Downloads & Errata.</span>
    </div>
    <div style="position:absolute;left:114.15px;top:423.56px" class="cls_002"><span class="cls_002">4. Enter the name of the book in the Search box and follow the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:444.57px" class="cls_002"><span class="cls_002">onscreen instructions.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:491.49px" class="cls_002"><span class="cls_002">Once the file is downloaded, please make sure that you unzip or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:508.30px" class="cls_002"><span class="cls_002">extract the folder using the latest version of:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:548.21px" class="cls_002"><span class="cls_002">WinRAR/7-Zip for Windows</span>
    </div>
    <div style="position:absolute;left:133.06px;top:578.33px" class="cls_002"><span class="cls_002">Zipeg/iZip/UnRarX for Mac</span>
    </div>
    <div style="position:absolute;left:133.06px;top:608.44px" class="cls_002"><span class="cls_002">7-Zip/PeaZip for Linux</span>
    </div>
    <div style="position:absolute;left:87.54px;top:655.36px" class="cls_002"><span class="cls_002">The code bundle for the book is also hosted on GitHub at </span><A
            HREF="https://githu/">https://githu</A> </span></div>
    <div style="position:absolute;left:87.54px;top:672.17px" class="cls_007"><span class="cls_007">b.com/PacktPublishing/RESTful-Web-API-Design-with-Node.js-10-Third-Edition</span><span
            class="cls_002">. In</span></div>
    <div style="position:absolute;left:87.54px;top:688.98px" class="cls_002"><span class="cls_002">case there's an update to the code, it will be updated on the existing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:705.79px" class="cls_002"><span
            class="cls_002">GitHub repository.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:19573px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background024.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">We also have other code bundles from our rich catalog of books and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span
            class="cls_002">videos available at </span><span
            class="cls_007">https://github.com/PacktPublishing/</span><span class="cls_002">. Check them out!</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:20424px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background025.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Conventions used</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this book, you will find a number of styles of text that distinguish</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">between different kinds of information. Here are some examples of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">these styles, and an explanation of their meaning.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">Code words in text, database tale names, folder names, filenames,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">file extensions, pathnames, dummy URLs, user input, and Twitter</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">handles are shown as follows:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span
            class="cls_002">"This tells </span><span class="cls_008">npm</span><span class="cls_002"> that our package depends on the URL and express</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">modules."</span>
    </div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span class="cls_002">A block of code is set as follows:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:418.65px" class="cls_010"><span class="cls_010">router.get('/v1/item/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:431.26px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:443.87px" class="cls_010"><span class="cls_010">catalogV1.findItemById(request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:456.47px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:481.68px" class="cls_010"><span class="cls_010">router.get('/v1/:categoryId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:494.29px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:506.90px" class="cls_010"><span class="cls_010">catalogV1.findItemsByCategory(request.params.categoryId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:519.50px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:551.02px" class="cls_002"><span class="cls_002">When we wish to draw your attention to a particular part of a code</span>
    </div>
    <div style="position:absolute;left:87.54px;top:567.82px" class="cls_002"><span class="cls_002">block, the relevant lines or items are set in bold:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:611.94px" class="cls_010"><span class="cls_010">router.get('/v1/:categoryId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:624.55px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:637.16px" class="cls_010"><span class="cls_010">catalogV1.findItemsByCategory(request.params.categoryId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:649.76px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:681.28px" class="cls_002"><span class="cls_002">Any command-line input or output is written as follows:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:21275px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background026.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">$ npm install -g express</span>
    </div>
    <div style="position:absolute;left:87.54px;top:145.53px" class="cls_002"><span class="cls_002">Bold: Indicates a new term, an important word, or words that you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:162.34px" class="cls_002"><span class="cls_002">see onscreen. For example, words in menus or dialog boxes appear</span>
    </div>
    <div style="position:absolute;left:87.54px;top:179.14px" class="cls_002"><span class="cls_002">in the text like this. Here is an example:</span>
    </div>
    <div style="position:absolute;left:132.36px;top:213.46px" class="cls_009"><span class="cls_009">Warnings or important notes appear like this.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:240.07px" class="cls_009"><span class="cls_009">Tips and tricks appear like this.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:22126px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background027.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Get in touch</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Feedback from our readers is always welcome.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">General feedback: Email </span><span
            class="cls_008">feedback@packtpub.com</span><span class="cls_002"> and mention the book</span></div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">title in the subject of your message. If you have questions about any</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">aspect of this book, please email us at </span><span
            class="cls_008">questions@packtpub.com</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:307.30px" class="cls_002"><span class="cls_002">Errata: Although we have taken every care to ensure the accuracy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:324.11px" class="cls_002"><span class="cls_002">of our content, mistakes do happen. If you have found a mistake in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.92px" class="cls_002"><span class="cls_002">this book, we would be grateful if you would report this to us. Please</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span class="cls_002">visit </span><A
            HREF="http://www.packtpub.com/submit-errata/">www.packtpub.com/submit-errata</A> </span><span
            class="cls_002">, selecting your book, clicking on the</span></div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span class="cls_002">Errata Submission Form link, and entering the details.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.85px" class="cls_002"><span class="cls_002">Piracy: If you come across any illegal copies of our works in any</span>
    </div>
    <div style="position:absolute;left:87.54px;top:425.66px" class="cls_002"><span class="cls_002">form on the Internet, we would be grateful if you would provide us</span>
    </div>
    <div style="position:absolute;left:87.54px;top:442.47px" class="cls_002"><span class="cls_002">with the location address or website name. Please contact us at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:459.27px" class="cls_008"><span class="cls_008">copyright@packtpub.com</span><span
            class="cls_002"> with a link to the material.</span></div>
    <div style="position:absolute;left:87.54px;top:493.59px" class="cls_002"><span class="cls_002">If you are interested in becoming an author: If there is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:510.40px" class="cls_002"><span class="cls_002">topic that you have expertise in and you are interested in either</span>
    </div>
    <div style="position:absolute;left:87.54px;top:527.20px" class="cls_002"><span class="cls_002">writing or contributing to a book, please visit </span><span
            class="cls_007">authors.packtpub.com</span><span class="cls_002">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:22977px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background028.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Reviews</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Please leave a review. Once you have read and used this book, why</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">not leave a review on the site that you purchased it from? Potential</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">readers can then see and use your unbiased opinion to make</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">purchase decisions, we at Packt can understand what you think</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">about our products, and our authors can see your feedback on their</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span
            class="cls_002">book. Thank you!</span></div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">For more information about Packt, please visit </span><span
            class="cls_007">packtpub.com</span><span class="cls_002">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:23828px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background029.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">REST - What You Did Not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">Know</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Over the last few years, we have started taking for granted that data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">sources feeding for content, mobile device service feeds, or cloud</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">computing are all driven by modern technologies, such as RESTful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">web services. Everybody has been talking about how their stateless</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">model allows applications to scale easily and how it emphasizes on</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">clear decoupling between data provisioning and data consumption.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">Nowadays, architects have started introducing the concept of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">microservices, aiming to reduce the complexity in systems by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">splitting their core components into small independent pieces that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">simply do a single task. So, enterprise-grade software is about to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.95px" class="cls_002"><span class="cls_002">become a composite of such microservices. This makes it easy to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:420.76px" class="cls_002"><span class="cls_002">maintain, and allows better life cycle management when new parts</span>
    </div>
    <div style="position:absolute;left:87.54px;top:437.56px" class="cls_002"><span class="cls_002">need to be introduced. Unsurprisingly, most of the microservices</span>
    </div>
    <div style="position:absolute;left:87.54px;top:454.37px" class="cls_002"><span class="cls_002">are serviced by RESTful frameworks. This fact may leave the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:471.18px" class="cls_002"><span class="cls_002">impression that REST was invented sometime in the last decade,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:487.99px" class="cls_002"><span class="cls_002">but that is far from the truth. In fact, REST has been around since</span>
    </div>
    <div style="position:absolute;left:87.54px;top:504.79px" class="cls_002"><span class="cls_002">the last decade of the previous century!</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.11px" class="cls_002"><span class="cls_002">This chapter will walk you through the foundation of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:555.92px" class="cls_002"><span class="cls_002">Representational State Transfer (REST) and will explain how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:572.73px" class="cls_002"><span class="cls_002">REST couples with the HTTP protocol. You will look into five key</span>
    </div>
    <div style="position:absolute;left:87.54px;top:589.53px" class="cls_002"><span class="cls_002">principles that have to be considered while turning any HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:606.34px" class="cls_002"><span class="cls_002">application into a RESTful service-enabled application. You will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:623.15px" class="cls_002"><span class="cls_002">also look at the differences between describing RESTful and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:639.96px" class="cls_002"><span class="cls_002">classic Simple Object Access Protocol (SOAP)-based web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:656.76px" class="cls_002"><span class="cls_002">services. Finally, you will learn how to utilize already-existing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:673.57px" class="cls_002"><span class="cls_002">infrastructure for your benefit.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:707.89px" class="cls_002"><span class="cls_002">In this chapter, we will cover the following topics:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:24679px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background030.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span
            class="cls_002">REST fundamentals</span></div>
    <div style="position:absolute;left:133.06px;top:136.42px" class="cls_002"><span
            class="cls_002">REST with HTTP</span></div>
    <div style="position:absolute;left:133.06px;top:166.54px" class="cls_002"><span class="cls_002">Essential differences in the description, discovery, and</span>
    </div>
    <div style="position:absolute;left:133.06px;top:187.55px" class="cls_002"><span class="cls_002">documentation of RESTful services compared to classical</span>
    </div>
    <div style="position:absolute;left:133.06px;top:208.56px" class="cls_002"><span
            class="cls_002">SOAP-based services</span></div>
    <div style="position:absolute;left:133.06px;top:238.67px" class="cls_002"><span class="cls_002">Taking advantage of existing infrastructure</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:25530px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background031.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">REST fundamentals</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">It actually happened back in 1999, when a request for comments</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">was submitted to the Internet Engineering Task Force (IETF;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.ietf.org/">http://www.ietf.org/</A> <span class="cls_002">) via RFC 2616: </span><span
            class="cls_003">Hypertext Transfer Protocol-</span></div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_003"><span class="cls_003">HTTP/1.1</span><span
            class="cls_002">. One of its authors, Roy Fielding, later defined a set of</span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">principles built around the HTTP and URI standards. This gave</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">birth to REST as we know it today.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:323.41px" class="cls_009"><span class="cls_009">These definitions were given in </span><A
            HREF="https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_di/">https://www.ics.uci.edu/~fielding/pubs/dissertation/fielding_di</A> </span>
    </div>
    <div style="position:absolute;left:132.36px;top:335.32px" class="cls_011"><span
            class="cls_011">ssertation.pdf </span><span class="cls_009">in the fifth chapter, Representational State Transfer (REST), of</span>
    </div>
    <div style="position:absolute;left:132.36px;top:347.22px" class="cls_009"><span class="cls_009">Fielding's dissertation called Architectural Styles and the Design of Network-</span>
    </div>
    <div style="position:absolute;left:132.36px;top:359.13px" class="cls_009"><span class="cls_009">Based Software Architectures. The dissertation is still available at</span>
    </div>
    <div style="position:absolute;left:132.36px;top:371.03px" class="cls_011"><span class="cls_011">http://www.ics.uci.edu/~fielding/pubs/dissertation/rest_arch_style.htm</span><span
            class="cls_009">.</span></div>
    <div style="position:absolute;left:87.54px;top:393.44px" class="cls_002"><span class="cls_002">Let's look at the key principles around the HTTP and URI</span>
    </div>
    <div style="position:absolute;left:87.54px;top:410.25px" class="cls_002"><span class="cls_002">standards, sticking to which will make your HTTP application a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:427.06px" class="cls_002"><span class="cls_002">RESTful service-enabled application:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:466.98px" class="cls_002"><span class="cls_002">1. Everything is a resource</span>
    </div>
    <div style="position:absolute;left:114.15px;top:487.99px" class="cls_002"><span class="cls_002">2. Each resource is identifiable by a unique identifier (URI)</span>
    </div>
    <div style="position:absolute;left:114.15px;top:509.00px" class="cls_002"><span class="cls_002">3. Resources are manipulated via standard HTTP methods</span>
    </div>
    <div style="position:absolute;left:114.15px;top:530.01px" class="cls_002"><span class="cls_002">4. Resources can have multiple representations</span>
    </div>
    <div style="position:absolute;left:114.15px;top:551.02px" class="cls_002"><span class="cls_002">5. Communicate with resources in a stateless manner</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:26381px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background032.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Principle 1 - Everything is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">resource</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">To understand this principle, one must conceive of the idea of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">representing data by a specific format and not by a physical file</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">containing a bunch of bytes. Each piece of data available on the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">internet has a format that describes it, known as the content type;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">for example, JPEG images, MPEG videos, HTML, XML, text</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">documents, and binary data are all resources with the following</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">content types: image/jpeg, video/mpeg, text/html, text/xml, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">application/octet-stream.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:27232px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background033.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Principle 2 - Each resource is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">identifiable by a unique</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_004"><span class="cls_004">identifier</span>
    </div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">Since the internet contains so many different resources, they all</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">should be accessible via URIs and should be identified uniquely.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">Furthermore, the URIs can be in a human-readable format, despite</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">the fact that their consumers are more likely to be software</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">programs rather than ordinary humans.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:368.23px" class="cls_002"><span class="cls_002">Human-readable URIs keep data self-descriptive and ease further</span>
    </div>
    <div style="position:absolute;left:87.54px;top:385.04px" class="cls_002"><span class="cls_002">development against it. This helps you to keep the risk of logical</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.85px" class="cls_002"><span class="cls_002">errors in your programs to a minimum.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:436.16px" class="cls_002"><span class="cls_002">Here are a few sample examples of such URIs representing different</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.97px" class="cls_002"><span class="cls_002">resources in a catalog application:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:498.49px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.mycatalog.com/categories/watches/">http://www.mycatalog.com/categories/watches</A></div>
    <div style="position:absolute;left:133.06px;top:528.61px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.mycatalog.com/categories/watches?collection=2018/">http://www.mycatalog.com/categories/watches?collection=2018</A>
    </div>
    <div style="position:absolute;left:133.06px;top:558.72px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.mycatalog.com/categories/watches/model-xyz/image/">http://www.mycatalog.com/categories/watches/model-xyz/image</A>
    </div>
    <div style="position:absolute;left:133.06px;top:588.83px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.mycatalog.com/categories/watches/model-xyz/video/">http://www.mycatalog.com/categories/watches/model-xyz/video</A>
    </div>
    <div style="position:absolute;left:133.06px;top:618.95px" class="cls_007"><span class="cls_007"> </span><A
            HREF="http://www.mycatalog.com/archives/2017/categories/watches.zip/">http://www.mycatalog.com/archives/2017/categories/watches.zip</A>
    </div>
    <div style="position:absolute;left:87.54px;top:660.27px" class="cls_002"><span class="cls_002">These human-readable URIs expose different types of resources in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:677.07px" class="cls_002"><span class="cls_002">straightforward manner. In the preceding example URIs, it is quite</span>
    </div>
    <div style="position:absolute;left:87.54px;top:693.88px" class="cls_002"><span class="cls_002">clear the data is items in a catalog, which are categorized watches.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:710.69px" class="cls_002"><span class="cls_002">The first link shows all the items in the category. The second shows</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:28083px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background034.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">only the ones that are part of the 2018 collection. Next is a link</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">pointing to the image of the item, followed by a link to a sample</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">video. The last link points to a resource containing items from the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">previous collection in a ZIP archive. The media types served per</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">each URI are rather easy to identify, with the assumption that the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">data format of an item is either JSON or XML, so we can easily map</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">the media type of a self-described URL to one of the following:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:244.97px" class="cls_002"><span class="cls_002">JSON or XML documents describing the items</span>
    </div>
    <div style="position:absolute;left:133.06px;top:275.09px" class="cls_002"><span class="cls_002">Images</span></div>
    <div style="position:absolute;left:133.06px;top:305.20px" class="cls_002"><span class="cls_002">Videos</span></div>
    <div style="position:absolute;left:133.06px;top:335.32px" class="cls_002"><span class="cls_002">Binary archive documents</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:28934px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background035.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Principle 3 - Manipulate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">resources via standard HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_004"><span class="cls_004">methods</span></div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">The native HTTP protocol (RFC 2616) defines eight actions, also</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span
            class="cls_002">known as HTTP verbs:</span></div>
    <div style="position:absolute;left:133.06px;top:329.01px" class="cls_008"><span class="cls_008">GET</span></div>
    <div style="position:absolute;left:133.06px;top:359.13px" class="cls_008"><span class="cls_008">POST</span></div>
    <div style="position:absolute;left:133.06px;top:389.24px" class="cls_008"><span class="cls_008">PUT</span></div>
    <div style="position:absolute;left:133.06px;top:419.35px" class="cls_008"><span class="cls_008">DELETE</span></div>
    <div style="position:absolute;left:133.06px;top:449.47px" class="cls_008"><span class="cls_008">HEAD</span></div>
    <div style="position:absolute;left:133.06px;top:479.58px" class="cls_008"><span class="cls_008">OPTIONS</span></div>
    <div style="position:absolute;left:133.06px;top:528.61px" class="cls_008"><span class="cls_008">TRACE</span></div>
    <div style="position:absolute;left:133.06px;top:558.72px" class="cls_008"><span class="cls_008">CONNECT</span></div>
    <div style="position:absolute;left:87.54px;top:600.04px" class="cls_002"><span class="cls_002">The first four of them just feel natural in the context of resources,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:616.85px" class="cls_002"><span class="cls_002">especially when defining actions for data manipulation. Let's make</span>
    </div>
    <div style="position:absolute;left:87.54px;top:633.65px" class="cls_002"><span class="cls_002">a parallel with relative SQL databases where the native language for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:650.46px" class="cls_002"><span class="cls_002">data manipulation is CRUD (short for Create, Read, Update,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:667.27px" class="cls_002"><span class="cls_002">and Delete), originating from the different types of SQL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:684.08px" class="cls_002"><span
            class="cls_002">statements, </span><span class="cls_008">INSERT</span><span class="cls_002">, </span><span
            class="cls_008">SELECT</span><span class="cls_002">, </span><span class="cls_008">UPDATE</span><span
            class="cls_002">, and </span><span class="cls_008">DELETE</span><span class="cls_002">, respectively. In the same</span>
    </div>
    <div style="position:absolute;left:87.54px;top:700.89px" class="cls_002"><span class="cls_002">manner, if you apply the REST principles correctly, the HTTP verbs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:717.69px" class="cls_002"><span class="cls_002">should be used as shown here:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:29785px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background036.jpg" width=595 height=841></div>
    <div style="position:absolute;left:95.24px;top:128.72px" class="cls_012"><span class="cls_012">H</span></div>
    <div style="position:absolute;left:95.24px;top:144.83px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:95.24px;top:160.93px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:95.24px;top:177.04px" class="cls_012"><span class="cls_012">P</span></div>
    <div style="position:absolute;left:310.24px;top:177.04px" class="cls_012"><span
            class="cls_012">HTTP response status</span></div>
    <div style="position:absolute;left:122.56px;top:184.75px" class="cls_012"><span class="cls_012">Action</span></div>
    <div style="position:absolute;left:95.24px;top:193.15px" class="cls_012"><span class="cls_012">v</span></div>
    <div style="position:absolute;left:310.24px;top:193.15px" class="cls_012"><span class="cls_012">code</span></div>
    <div style="position:absolute;left:95.24px;top:209.26px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:95.24px;top:225.36px" class="cls_012"><span class="cls_012">r</span></div>
    <div style="position:absolute;left:95.24px;top:241.47px" class="cls_012"><span class="cls_012">b</span></div>
    <div style="position:absolute;left:310.24px;top:272.29px" class="cls_013"><span class="cls_013">200 OK</span><span
            class="cls_012"> if the resource exists, </span><span class="cls_013">404</span></div>
    <div style="position:absolute;left:95.24px;top:288.39px" class="cls_013"><span class="cls_013">GE</span><span
            class="cls_012">     Retrieves an existing</span></div>
    <div style="position:absolute;left:310.24px;top:288.39px" class="cls_013"><span
            class="cls_013">Not Found</span><span class="cls_012"> if it does not exist, and</span></div>
    <div style="position:absolute;left:95.24px;top:304.50px" class="cls_013"><span class="cls_013">T</span></div>
    <div style="position:absolute;left:122.56px;top:304.50px" class="cls_012"><span class="cls_012">resource.</span>
    </div>
    <div style="position:absolute;left:310.24px;top:304.50px" class="cls_013"><span class="cls_013">500 Internal Server Error</span><span
            class="cls_012"> for other</span></div>
    <div style="position:absolute;left:310.24px;top:320.61px" class="cls_012"><span class="cls_012">errors.</span></div>
    <div style="position:absolute;left:310.24px;top:368.23px" class="cls_013"><span class="cls_013">200 OK</span><span
            class="cls_012"> if successfully updated,</span></div>
    <div style="position:absolute;left:122.56px;top:378.04px" class="cls_012"><span class="cls_012">Updates a resource. If the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:385.04px" class="cls_013"><span
            class="cls_013">201 Created</span><span class="cls_012"> if a new resource is</span></div>
    <div style="position:absolute;left:122.56px;top:394.14px" class="cls_012"><span class="cls_012">resource does not exist, the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:401.85px" class="cls_012"><span
            class="cls_012">created, </span><span class="cls_013">404 Not found</span><span
            class="cls_012"> if the</span></div>
    <div style="position:absolute;left:95.24px;top:410.25px" class="cls_013"><span class="cls_013">PU</span><span
            class="cls_012">     server can either decide to</span></div>
    <div style="position:absolute;left:95.24px;top:426.36px" class="cls_013"><span class="cls_013">T</span></div>
    <div style="position:absolute;left:310.24px;top:418.65px" class="cls_012"><span class="cls_012">resource to be updated does</span>
    </div>
    <div style="position:absolute;left:122.56px;top:426.36px" class="cls_012"><span class="cls_012">create it with the provided</span>
    </div>
    <div style="position:absolute;left:310.24px;top:435.46px" class="cls_012"><span
            class="cls_012">not exist, and </span><span class="cls_013">500 Internal Server</span></div>
    <div style="position:absolute;left:122.56px;top:442.47px" class="cls_012"><span class="cls_012">identifer or return the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:452.27px" class="cls_013"><span class="cls_013">Error</span><span
            class="cls_012"> for other unexpected</span></div>
    <div style="position:absolute;left:122.56px;top:458.57px" class="cls_012"><span class="cls_012">appropriate status code.</span>
    </div>
    <div style="position:absolute;left:310.24px;top:469.08px" class="cls_012"><span class="cls_012">errors.</span></div>
    <div style="position:absolute;left:122.56px;top:516.00px" class="cls_012"><span class="cls_012">Creates a resource with an</span>
    </div>
    <div style="position:absolute;left:310.24px;top:516.00px" class="cls_013"><span
            class="cls_013">201 CREATED</span><span class="cls_012"> if a new resource is</span></div>
    <div style="position:absolute;left:122.56px;top:532.11px" class="cls_012"><span class="cls_012">identifier generated at</span>
    </div>
    <div style="position:absolute;left:310.24px;top:532.11px" class="cls_012"><span
            class="cls_012">created, </span><span class="cls_013">200 OK</span><span
            class="cls_012"> if the resource</span></div>
    <div style="position:absolute;left:122.56px;top:548.21px" class="cls_012"><span class="cls_012">server side or updates a</span>
    </div>
    <div style="position:absolute;left:310.24px;top:548.21px" class="cls_012"><span class="cls_012">has been updated successfully,</span>
    </div>
    <div style="position:absolute;left:122.56px;top:564.32px" class="cls_012"><span class="cls_012">resource with an existing</span>
    </div>
    <div style="position:absolute;left:310.24px;top:564.32px" class="cls_013"><span
            class="cls_013">409 Conflict</span><span class="cls_012"> if the resource</span></div>
    <div style="position:absolute;left:95.24px;top:578.33px" class="cls_013"><span class="cls_013">PO</span></div>
    <div style="position:absolute;left:95.24px;top:580.43px" class="cls_013"><span class="cls_013">ST</span><span
            class="cls_012">     i</span></div>
    <div style="position:absolute;left:126.66px;top:580.43px" class="cls_012"><span class="cls_012">dentifier provided from the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:580.43px" class="cls_012"><span class="cls_012">already exists and update is</span>
    </div>
    <div style="position:absolute;left:122.56px;top:596.54px" class="cls_012"><span class="cls_012">client. If this verb is to be</span>
    </div>
    <div style="position:absolute;left:310.24px;top:596.54px" class="cls_012"><span class="cls_012">not allowed, </span><span
            class="cls_013">404 Not Found</span><span class="cls_012"> if the</span></div>
    <div style="position:absolute;left:122.56px;top:612.64px" class="cls_012"><span class="cls_012">used only for creating but</span>
    </div>
    <div style="position:absolute;left:310.24px;top:612.64px" class="cls_012"><span class="cls_012">resource to be updated does</span>
    </div>
    <div style="position:absolute;left:122.56px;top:628.75px" class="cls_012"><span class="cls_012">not for updating, return the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:628.75px" class="cls_012"><span
            class="cls_012">not exist, and </span><span class="cls_013">500 Internal Server</span></div>
    <div style="position:absolute;left:122.56px;top:644.86px" class="cls_012"><span class="cls_012">appropriate status code.</span>
    </div>
    <div style="position:absolute;left:310.24px;top:644.86px" class="cls_013"><span class="cls_013">Error</span><span
            class="cls_012"> for other errors.</span></div>
    <div style="position:absolute;left:310.24px;top:675.67px" class="cls_013"><span class="cls_013">200 OK</span><span
            class="cls_012"> or </span><span class="cls_013">204 No Content</span><span class="cls_012"> if the</span>
    </div>
    <div style="position:absolute;left:310.24px;top:691.78px" class="cls_012"><span class="cls_012">resource has been deleted</span>
    </div>
    <div style="position:absolute;left:95.24px;top:709.99px" class="cls_013"><span class="cls_013">DE</span></div>
    <div style="position:absolute;left:310.24px;top:707.89px" class="cls_012"><span
            class="cls_012">successfully, </span><span class="cls_013">404 Not Found</span><span
            class="cls_012"> if the</span></div>
    <div style="position:absolute;left:95.24px;top:719.79px" class="cls_013"><span class="cls_013">LE</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:30636px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background037.jpg" width=595 height=841></div>
    <div style="position:absolute;left:95.24px;top:103.51px" class="cls_013"><span class="cls_013">TE</span></div>
    <div style="position:absolute;left:122.56px;top:103.51px" class="cls_012"><span
            class="cls_012">Deletes a resource.</span></div>
    <div style="position:absolute;left:310.24px;top:103.51px" class="cls_012"><span class="cls_012">resource to be deleted does</span>
    </div>
    <div style="position:absolute;left:310.24px;top:119.62px" class="cls_012"><span
            class="cls_012">not exist, and </span><span class="cls_013">500 Internal Server</span></div>
    <div style="position:absolute;left:310.24px;top:135.72px" class="cls_013"><span class="cls_013">Error</span><span
            class="cls_012"> for other errors.</span></div>
    <div style="position:absolute;left:87.54px;top:227.47px" class="cls_002"><span class="cls_002">Note that a resource might be created by either the </span><span
            class="cls_008">POST</span><span class="cls_002"> or </span><span class="cls_008">PUT</span><span
            class="cls_002"> HTTP</span></div>
    <div style="position:absolute;left:87.54px;top:244.27px" class="cls_002"><span class="cls_002">verbs, based on the policy of an application. However, if a resource</span>
    </div>
    <div style="position:absolute;left:87.54px;top:261.08px" class="cls_002"><span class="cls_002">has to be created under a specific URI with an identifier provided</span>
    </div>
    <div style="position:absolute;left:87.54px;top:277.89px" class="cls_002"><span
            class="cls_002">by the client, then </span><span class="cls_008">PUT</span><span class="cls_002"> is the appropriate action:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:322.01px" class="cls_010"><span class="cls_010">PUT /categories/watches/model-abc HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:334.62px" class="cls_010"><span class="cls_010">Content-Type: text/xml</span>
    </div>
    <div style="position:absolute;left:101.55px;top:347.22px" class="cls_010"><span class="cls_010">Host: </span><A
            HREF="http://www.mycatalog.com/">www.mycatalog.com</A></div>
    <div style="position:absolute;left:101.55px;top:372.43px" class="cls_010"><span class="cls_010">&lt;?xml version="1.0" encoding="utf-8"?></span>
    </div>
    <div style="position:absolute;left:101.55px;top:385.04px" class="cls_010"><span class="cls_010">&lt;Item category="watch"></span>
    </div>
    <div style="position:absolute;left:121.68px;top:397.65px" class="cls_010"><span class="cls_010">&lt;Brand>...&lt;/Brand></span>
    </div>
    <div style="position:absolute;left:121.68px;top:410.25px" class="cls_010"><span class="cls_010">&lt;/Price>&lt;/Price></span>
    </div>
    <div style="position:absolute;left:101.55px;top:422.86px" class="cls_010"><span class="cls_010">&lt;/Item></span>
    </div>
    <div style="position:absolute;left:101.55px;top:448.07px" class="cls_010"><span
            class="cls_010">HTTP/1.1 201 Created</span></div>
    <div style="position:absolute;left:101.55px;top:460.67px" class="cls_010"><span class="cls_010">Content-Type: text/xml</span>
    </div>
    <div style="position:absolute;left:101.55px;top:473.28px" class="cls_010"><span class="cls_010">Location: </span><A
            HREF="http://www.mycatalog.com/categories/watches/model-abc/">http://www.mycatalog.com/categories/watches/model-abc</A>
    </div>
    <div style="position:absolute;left:87.54px;top:517.40px" class="cls_002"><span class="cls_002">However, in your application, you may want to leave it up to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:534.21px" class="cls_002"><span class="cls_002">backend RESTful service to decide where to expose the newly</span>
    </div>
    <div style="position:absolute;left:87.54px;top:551.02px" class="cls_002"><span class="cls_002">created resource, and thus create it under an appropriate but still</span>
    </div>
    <div style="position:absolute;left:87.54px;top:567.82px" class="cls_002"><span class="cls_002">unknown or non-existent location.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:602.14px" class="cls_002"><span class="cls_002">For instance, in our example, we might want the server to define the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:618.95px" class="cls_002"><span class="cls_002">identifier of newly created items. In such cases, just use the </span><span
            class="cls_008">POST</span><span class="cls_002"> verb</span></div>
    <div style="position:absolute;left:87.54px;top:635.76px" class="cls_002"><span class="cls_002">to a URL without providing an identifier parameter. Then it is up to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:652.56px" class="cls_002"><span class="cls_002">the service itself to provide a new unique and valid identifier for the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:669.37px" class="cls_002"><span class="cls_002">new resource and to expose back this URL via the </span><span
            class="cls_008">Location</span><span class="cls_002"> header of</span></div>
    <div style="position:absolute;left:87.54px;top:686.18px" class="cls_002"><span class="cls_002">the response:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:31487px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background038.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">POST /categories/watches HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:126.62px" class="cls_010"><span class="cls_010">Content-Type: text/xml</span>
    </div>
    <div style="position:absolute;left:101.55px;top:139.23px" class="cls_010"><span class="cls_010">Host: </span><A
            HREF="http://www.mycatalog.com/">www.mycatalog.com</A></div>
    <div style="position:absolute;left:101.55px;top:164.44px" class="cls_010"><span class="cls_010">&lt;?xml version="1.0" encoding="utf-8"?></span>
    </div>
    <div style="position:absolute;left:101.55px;top:177.04px" class="cls_010"><span class="cls_010">&lt;Item category="watch"></span>
    </div>
    <div style="position:absolute;left:121.68px;top:189.65px" class="cls_010"><span class="cls_010">&lt;Brand>...&lt;/Brand></span>
    </div>
    <div style="position:absolute;left:121.68px;top:202.25px" class="cls_010"><span class="cls_010">&lt;/Price>&lt;/Price></span>
    </div>
    <div style="position:absolute;left:101.55px;top:214.86px" class="cls_010"><span class="cls_010">&lt;/Item></span>
    </div>
    <div style="position:absolute;left:101.55px;top:240.07px" class="cls_010"><span
            class="cls_010">HTTP/1.1 201 Created</span></div>
    <div style="position:absolute;left:101.55px;top:252.68px" class="cls_010"><span class="cls_010">Content-Type: text/xml</span>
    </div>
    <div style="position:absolute;left:101.55px;top:265.28px" class="cls_010"><span class="cls_010">Location: </span><A
            HREF="http://www.mycatalog.com/categories/watches/model-abc/">http://www.mycatalog.com/categories/watches/model-abc</A>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:32338px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background039.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Principle 4 - Resources can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">have multiple representations</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">A key feature of a resource is that it may be represented in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">different format from the one in which it is stored. Thus, it can be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">requested or created in different representations. As long as the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">specified format is supported, the REST-enabled endpoint should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">use it. In the preceding example, we posted an XML representation</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">of a watch item, but if the server had supported the JSON format,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">the following request would have been valid as well:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:380.84px" class="cls_010"><span class="cls_010">POST /categories/watches HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:393.44px" class="cls_010"><span class="cls_010">Content-Type: application/json</span>
    </div>
    <div style="position:absolute;left:101.55px;top:406.05px" class="cls_010"><span class="cls_010">Host: </span><A
            HREF="http://www.mycatalog.com/">www.mycatalog.com</A></div>
    <div style="position:absolute;left:101.55px;top:431.26px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:443.87px" class="cls_010"><span class="cls_010">"watch": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:456.47px" class="cls_010"><span
            class="cls_010">"id": ""watch-abc"",</span></div>
    <div style="position:absolute;left:121.68px;top:469.08px" class="cls_010"><span
            class="cls_010">"brand": "...",</span></div>
    <div style="position:absolute;left:121.68px;top:481.68px" class="cls_010"><span class="cls_010">"price": {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:494.29px" class="cls_010"><span
            class="cls_010">"-currency": "EUR",</span></div>
    <div style="position:absolute;left:131.75px;top:506.90px" class="cls_010"><span
            class="cls_010">"#text": "100"</span></div>
    <div style="position:absolute;left:121.68px;top:519.50px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:532.11px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:544.71px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:557.32px" class="cls_010"><span
            class="cls_010">HTTP/1.1 201 Created</span></div>
    <div style="position:absolute;left:101.55px;top:569.92px" class="cls_010"><span class="cls_010">Content-Type: application/json</span>
    </div>
    <div style="position:absolute;left:101.55px;top:582.53px" class="cls_010"><span class="cls_010">Location: </span><A
            HREF="http://mycatalog.com/categories/watches/watch-abc/">http://mycatalog.com/categories/watches/watch-abc</A>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:33189px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background040.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Principle 5 - Communicate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">with resources in a stateless</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_004"><span class="cls_004">manner</span></div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">Resource manipulation operations through HTTP requests should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">always be considered atomic. All modifications of a resource should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">be carried out within an HTTP request in an isolated manner. After</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">the request execution, the resource is left in a final state; this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">implicitly means that partial resource updates are not supported.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">You should always send the complete state of the resource.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:385.04px" class="cls_002"><span class="cls_002">Back to our catalog example, updating the price field of a given item</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.85px" class="cls_002"><span class="cls_002">would mean making a PUT request with a complete document</span>
    </div>
    <div style="position:absolute;left:87.54px;top:418.65px" class="cls_002"><span class="cls_002">(JSON or XML) that contains the entire data, including the updated</span>
    </div>
    <div style="position:absolute;left:87.54px;top:435.46px" class="cls_002"><span class="cls_002">price field. Posting only the updated price is not stateless, as it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.27px" class="cls_002"><span class="cls_002">implies that the application is aware that the resource has a price</span>
    </div>
    <div style="position:absolute;left:87.54px;top:469.08px" class="cls_002"><span class="cls_002">field, that is, it knows its state.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_002"><span class="cls_002">Another requirement for your RESTful application to be stateless is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:520.20px" class="cls_002"><span class="cls_002">that once the service gets deployed on a production environment, it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:537.01px" class="cls_002"><span class="cls_002">is likely that incoming requests are served by a load balancer,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.82px" class="cls_002"><span class="cls_002">ensuring scalability and high availability. Once exposed via a load</span>
    </div>
    <div style="position:absolute;left:87.54px;top:570.62px" class="cls_002"><span class="cls_002">balancer, the idea of keeping your application state at server side</span>
    </div>
    <div style="position:absolute;left:87.54px;top:587.43px" class="cls_002"><span class="cls_002">gets compromised. This doesn't mean that you are not allowed to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:604.24px" class="cls_002"><span class="cls_002">keep the state of your application. It just means that you should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:621.05px" class="cls_002"><span class="cls_002">keep it in a RESTful way. For example, keep a part of the state</span>
    </div>
    <div style="position:absolute;left:87.54px;top:637.86px" class="cls_002"><span class="cls_002">within the URI, or use HTTP headers to provide additional state-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:654.66px" class="cls_002"><span class="cls_002">related data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:688.98px" class="cls_002"><span class="cls_002">The statelessness of your RESTful API isolates the caller against</span>
    </div>
    <div style="position:absolute;left:87.54px;top:705.79px" class="cls_002"><span class="cls_002">changes at the server side. Thus, the caller is not expected to</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:34040px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background041.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">communicate with the same server in consecutive requests. This</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">allows easy application of changes within the server infrastructure,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">such as adding or removing nodes.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:172.14px" class="cls_009"><span class="cls_009">Remember that it is your responsibility to keep your RESTful APIs stateless,</span>
    </div>
    <div style="position:absolute;left:132.36px;top:184.05px" class="cls_009"><span class="cls_009">as the consumers of the APIs would expect them to be.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:209.26px" class="cls_002"><span class="cls_002">Now that you know that REST is around 18 years old, a sensible</span>
    </div>
    <div style="position:absolute;left:87.54px;top:226.06px" class="cls_002"><span class="cls_002">question would be, "Why has it become so popular just quite</span>
    </div>
    <div style="position:absolute;left:87.54px;top:242.87px" class="cls_002"><span class="cls_002">recently?" Well, we the developers usually reject simple,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:259.68px" class="cls_002"><span class="cls_002">straightforward approaches and, most of the time, prefer spending</span>
    </div>
    <div style="position:absolute;left:87.54px;top:276.49px" class="cls_002"><span class="cls_002">more time on turning already-complex solutions into even more</span>
    </div>
    <div style="position:absolute;left:87.54px;top:293.30px" class="cls_002"><span class="cls_002">complex and sophisticated ones.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:327.61px" class="cls_002"><span class="cls_002">Take classical SOAP web services, for example. Their various WS-*</span>
    </div>
    <div style="position:absolute;left:87.54px;top:344.42px" class="cls_002"><span class="cls_002">specifications are so many, and sometimes so loosely defined, that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:361.23px" class="cls_002"><span class="cls_002">in order to make different solutions from different vendors</span>
    </div>
    <div style="position:absolute;left:87.54px;top:378.04px" class="cls_002"><span class="cls_002">interoperable, a separate specification, WS-Basic Profile, has been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:394.84px" class="cls_002"><span class="cls_002">introduced. It defines extra interoperability rules in order to ensure</span>
    </div>
    <div style="position:absolute;left:87.54px;top:411.65px" class="cls_002"><span class="cls_002">that all WS-* specifications in SOAP-based web services can work</span>
    </div>
    <div style="position:absolute;left:87.54px;top:428.46px" class="cls_002"><span class="cls_002">together.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:462.77px" class="cls_002"><span class="cls_002">When it comes to transporting binary data with classical web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:479.58px" class="cls_002"><span class="cls_002">services over HTTP, things get even more complex, as SOAP-based</span>
    </div>
    <div style="position:absolute;left:87.54px;top:496.39px" class="cls_002"><span class="cls_002">web services provide different ways of transporting binary data.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:513.20px" class="cls_002"><span class="cls_002">Each way is defined in other sets of specifications, such as SOAP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:530.01px" class="cls_002"><span class="cls_002">with Attachment References (SwaRef) and Message</span>
    </div>
    <div style="position:absolute;left:87.54px;top:546.81px" class="cls_002"><span class="cls_002">Transmission Optimization Mechanism (MTOM). All this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:563.62px" class="cls_002"><span class="cls_002">complexity was caused mainly because the initial idea of the web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:580.43px" class="cls_002"><span class="cls_002">service was to execute business logic remotely, not to transport</span>
    </div>
    <div style="position:absolute;left:87.54px;top:597.24px" class="cls_002"><span class="cls_002">large amounts of data.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:631.55px" class="cls_002"><span class="cls_002">The real world has shown us that, when it comes to data transfer,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:648.36px" class="cls_002"><span class="cls_002">things should not be that complex. This is where REST fits into the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:665.17px" class="cls_002"><span class="cls_002">big picture—by introducing the concept of resources and a standard</span>
    </div>
    <div style="position:absolute;left:87.54px;top:681.98px" class="cls_002"><span class="cls_002">means for manipulating them.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:34891px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background042.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">The REST goals</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Now that we've covered the main REST principles, it is time to dive</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">deeper into what can be achieved when they are followed:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:261.78px" class="cls_002"><span class="cls_002">Separation of the representation and the resource</span>
    </div>
    <div style="position:absolute;left:133.06px;top:291.90px" class="cls_002"><span class="cls_002">Visibility</span>
    </div>
    <div style="position:absolute;left:133.06px;top:322.01px" class="cls_002"><span class="cls_002">Reliability</span>
    </div>
    <div style="position:absolute;left:133.06px;top:352.12px" class="cls_002"><span class="cls_002">Scalability</span>
    </div>
    <div style="position:absolute;left:133.06px;top:382.24px" class="cls_002"><span class="cls_002">Performance</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:35742px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background043.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Separation of the</span></div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">representation and the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_004"><span class="cls_004">resource</span></div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">A resource is just a set of information, and as defined by principle 4,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">it can have multiple representations; however, its state is atomic. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">is up to the caller to specify the desired media type with the </span><span
            class="cls_008">Accept</span></div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">header in the HTTP request, and then it is up to the server</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">application to handle the representation accordingly, returning the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">appropriate content type of the resource together with a relevant</span>
    </div>
    <div style="position:absolute;left:87.54px;top:367.53px" class="cls_002"><span
            class="cls_002">HTTP status code:</span></div>
    <div style="position:absolute;left:133.06px;top:407.45px" class="cls_008"><span
            class="cls_008">HTTP 200 OK</span><span class="cls_002"> in the case of success</span></div>
    <div style="position:absolute;left:133.06px;top:437.56px" class="cls_008"><span
            class="cls_008">HTTP 400 Bad Request</span><span class="cls_002"> if an unsupported format is given or for any</span>
    </div>
    <div style="position:absolute;left:133.06px;top:458.57px" class="cls_002"><span class="cls_002">other invalid request information</span>
    </div>
    <div style="position:absolute;left:133.06px;top:488.69px" class="cls_008"><span class="cls_008">HTTP 406 Not Acceptable</span><span
            class="cls_002"> if an unsupported media type is</span></div>
    <div style="position:absolute;left:133.06px;top:509.70px" class="cls_002"><span class="cls_002">requested</span>
    </div>
    <div style="position:absolute;left:133.06px;top:558.72px" class="cls_008"><span class="cls_008">HTTP 500 Internal Server Error</span><span
            class="cls_002"> when something unexpected</span></div>
    <div style="position:absolute;left:133.06px;top:579.73px" class="cls_002"><span class="cls_002">happens during the request processing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:626.65px" class="cls_002"><span class="cls_002">Let's assume that, at server side, we have items resources stored in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:643.46px" class="cls_002"><span class="cls_002">an XML format. We can have an API that allows a consumer to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:660.27px" class="cls_002"><span class="cls_002">request the item resources in various formats, such as </span><span
            class="cls_008">application/xml</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:677.07px" class="cls_008"><span
            class="cls_008">application/json</span><span class="cls_002">, </span><span
            class="cls_008">application/zip</span><span class="cls_002">, </span><span class="cls_008">application/octet-stream</span><span
            class="cls_002">, and so on.</span></div>
    <div style="position:absolute;left:87.54px;top:711.39px" class="cls_002"><span class="cls_002">It would be up to the API itself to load the requested resource,</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:36593px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background044.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">transform it into the requested type (for example, JSON or XML),</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">and either use ZIP to compress it or directly flush it to the HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">response output.</span></div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">The caller would make use of the </span><span
            class="cls_008">Accept</span><span class="cls_002"> HTTP header to specify the</span></div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">media type of the response they expect. So, if we want to request</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">our item data inserted in the previous section in XML format, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">following request should be executed:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:266.68px" class="cls_010"><span class="cls_010">GET /category/watches/watch-abc HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:279.29px" class="cls_010"><span class="cls_010">Host: my-computer-hostname</span>
    </div>
    <div style="position:absolute;left:101.55px;top:291.90px" class="cls_010"><span
            class="cls_010">Accept: text/xml</span></div>
    <div style="position:absolute;left:101.55px;top:317.11px" class="cls_010"><span
            class="cls_010">HTTP/1.1 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:329.71px" class="cls_010"><span class="cls_010">Content-Type: text/xml</span>
    </div>
    <div style="position:absolute;left:101.55px;top:342.32px" class="cls_010"><span class="cls_010">&lt;?xml version="1.0" encoding="utf-8"?></span>
    </div>
    <div style="position:absolute;left:101.55px;top:354.92px" class="cls_010"><span class="cls_010">&lt;Item category="watch"></span>
    </div>
    <div style="position:absolute;left:121.68px;top:367.53px" class="cls_010"><span class="cls_010">&lt;Brand>...&lt;/Brand></span>
    </div>
    <div style="position:absolute;left:121.68px;top:380.14px" class="cls_010"><span class="cls_010">&lt;/Price>&lt;/Price></span>
    </div>
    <div style="position:absolute;left:101.55px;top:392.74px" class="cls_010"><span class="cls_010">&lt;/Item></span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">To request the same item in JSON format, the </span><span
            class="cls_008">Accept</span><span class="cls_002"> header needs to</span></div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span
            class="cls_002">be set to </span><span class="cls_008">application/json</span><span class="cls_002">:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:485.18px" class="cls_010"><span class="cls_010">GET /categoery/watches/watch-abc HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:497.79px" class="cls_010"><span class="cls_010">Host: my-computer-hostname</span>
    </div>
    <div style="position:absolute;left:101.55px;top:510.40px" class="cls_010"><span class="cls_010">Accept: application/json</span>
    </div>
    <div style="position:absolute;left:101.55px;top:535.61px" class="cls_010"><span
            class="cls_010">HTTP/1.1 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:548.21px" class="cls_010"><span class="cls_010">Content-Type: application/json</span>
    </div>
    <div style="position:absolute;left:101.55px;top:560.82px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:573.43px" class="cls_010"><span class="cls_010">"watch": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:586.03px" class="cls_010"><span
            class="cls_010">"id": ""watch-abc"",</span></div>
    <div style="position:absolute;left:121.68px;top:598.64px" class="cls_010"><span
            class="cls_010">"brand": "...",</span></div>
    <div style="position:absolute;left:121.68px;top:611.24px" class="cls_010"><span class="cls_010">"price": {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:623.85px" class="cls_010"><span
            class="cls_010">"-currency": "EUR",</span></div>
    <div style="position:absolute;left:131.75px;top:636.45px" class="cls_010"><span
            class="cls_010">"#text": "100"</span></div>
    <div style="position:absolute;left:121.68px;top:649.06px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:661.67px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:674.27px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:37444px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background045.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Visibility</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">REST is designed to be visible and simple. Visibility of the service</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">means that every aspect of it should self-descriptive and follow the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">natural HTTP language according to principles 3, 4, and 5.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">Visibility in the context of the outer world would mean that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">monitoring applications would be interested only in the HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">communication between the REST service and the caller. Since the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">requests and responses are stateless and atomic, nothing more is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">needed to flow the behavior of the application and to understand</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">whether anything has gone wrong.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:391.34px" class="cls_009"><span class="cls_009">Remember that caching reduces the visibility of your RESTful applications</span>
    </div>
    <div style="position:absolute;left:132.36px;top:403.25px" class="cls_009"><span class="cls_009">and in general should be avoided, unless needed for serving resources</span>
    </div>
    <div style="position:absolute;left:132.36px;top:415.15px" class="cls_009"><span class="cls_009">subject to large amounts of callers. In such cases, caching may be an option,</span>
    </div>
    <div style="position:absolute;left:132.36px;top:427.06px" class="cls_009"><span class="cls_009">after carefully evaluating the possible consequences of serving obsolete data.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:38295px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background046.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Reliability</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Before talking about reliability, we need to define which HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">methods are safe and which are idempotent in the REST context.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">So, let's first define what safe and idempotent methods are:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:278.59px" class="cls_002"><span class="cls_002">An HTTP method is considered to be safe provided that,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:299.60px" class="cls_002"><span class="cls_002">when requested, it does not modify or cause any side effects</span>
    </div>
    <div style="position:absolute;left:133.06px;top:320.61px" class="cls_002"><span class="cls_002">on the state of the resource</span>
    </div>
    <div style="position:absolute;left:133.06px;top:350.72px" class="cls_002"><span class="cls_002">An HTTP method is considered to be idempotent if its</span>
    </div>
    <div style="position:absolute;left:133.06px;top:371.73px" class="cls_002"><span class="cls_002">response stays the same, regardless of the number of times</span>
    </div>
    <div style="position:absolute;left:133.06px;top:392.74px" class="cls_002"><span class="cls_002">it is requested, am idempotent request always gives back the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:413.75px" class="cls_002"><span class="cls_002">same request, if repeated identically.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:460.67px" class="cls_002"><span class="cls_002">The following table lists which HTTP methods are safe and which</span>
    </div>
    <div style="position:absolute;left:87.54px;top:477.48px" class="cls_002"><span
            class="cls_002">are idempotent:</span></div>
    <div style="position:absolute;left:95.24px;top:518.80px" class="cls_012"><span class="cls_012">HTTP method</span>
    </div>
    <div style="position:absolute;left:280.83px;top:518.80px" class="cls_012"><span class="cls_012">Safe</span></div>
    <div style="position:absolute;left:354.36px;top:518.80px" class="cls_012"><span class="cls_012">Idempotent</span>
    </div>
    <div style="position:absolute;left:95.24px;top:552.42px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:280.83px;top:549.62px" class="cls_012"><span class="cls_012">Yes</span></div>
    <div style="position:absolute;left:354.36px;top:549.62px" class="cls_012"><span class="cls_012">Yes</span></div>
    <div style="position:absolute;left:95.24px;top:583.23px" class="cls_013"><span class="cls_013">POST</span></div>
    <div style="position:absolute;left:280.83px;top:580.43px" class="cls_012"><span class="cls_012">No</span></div>
    <div style="position:absolute;left:354.36px;top:580.43px" class="cls_012"><span class="cls_012">No</span></div>
    <div style="position:absolute;left:95.24px;top:614.04px" class="cls_013"><span class="cls_013">PUT</span></div>
    <div style="position:absolute;left:280.83px;top:611.24px" class="cls_012"><span class="cls_012">No</span></div>
    <div style="position:absolute;left:354.36px;top:611.24px" class="cls_012"><span class="cls_012">Yes</span></div>
    <div style="position:absolute;left:95.24px;top:644.86px" class="cls_013"><span class="cls_013">DELETE</span></div>
    <div style="position:absolute;left:280.83px;top:642.06px" class="cls_012"><span class="cls_012">No</span></div>
    <div style="position:absolute;left:354.36px;top:642.06px" class="cls_012"><span class="cls_012">Yes</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:39146px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background047.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Consumers should consider operation's safety and the idempotence</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">features in order to be served reliably.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:39997px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background048.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Scalability and performance</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">So far, we stressed the importance of having stateless behavior for a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">RESTful web application. The World Wide Web (WWW) is an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">enormous universe, containing huge amount of data and a lot of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">users, eager to get that data. The evolution of the WWW has</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">brought the requirement that applications should scale easily as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">their load increases. Scaling applications that have a state is difficult</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">to achieve, especially when zero or close-to-zero operational</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span
            class="cls_002">downtime is expected.</span></div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">That's why staying stateless is crucial for any application that needs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">to scale. In the best-case scenario, scaling your application would</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">require you to put another piece of hardware for a load balancer, or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">bring another instance in your cloud environment. There would be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">no need for the different nodes to sync between each other, as they</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">should not care about the state at all. Scalability is all about serving</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span class="cls_002">all your clients in an acceptable amount of time. Its main idea is to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:474.68px" class="cls_002"><span class="cls_002">keep your application running and to prevent Denial of Service</span>
    </div>
    <div style="position:absolute;left:87.54px;top:491.49px" class="cls_002"><span class="cls_002">(DoS) caused by a huge amount of incoming requests.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">Scalability should not be confused with the performance of an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span class="cls_002">application. Performance is measured by the time needed for a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">single request to be processed, not by the total number of requests</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span class="cls_002">that the application can handle. The asynchronous non-blocking</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.04px" class="cls_002"><span class="cls_002">architecture and event-driven design of Node.js make it a logical</span>
    </div>
    <div style="position:absolute;left:87.54px;top:609.84px" class="cls_002"><span class="cls_002">choice for implementing an application that scales and performs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:626.65px" class="cls_002"><span class="cls_002">well.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:40848px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background049.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Working with WADL</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">If you are familiar with SOAP web services, you may have heard of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">the Web Service Definition Language (WSDL). It is an XML</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">description of the interface of the service and defines an endpoint</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">URL for invocation. It is mandatory for a SOAP web service to be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">described by such a WSDL definition.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">Similar to SOAP web services, RESTful services can also make use</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">of a description language, called WADL. WADL stands for Web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Application Definition Language. Unlike WSDL for SOAP web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">services, a WADL description of a RESTful service is optional, that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">is, consuming the service has nothing to do with its description.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">Here is a sample part of a WADL file that describes the </span><span
            class="cls_008">GET</span><span class="cls_002"> operation</span></div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">of our catalog service:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:485.19px" class="cls_010"><span class="cls_010">&lt;?xml version="1.0" encoding="UTF-8"?></span>
    </div>
    <div style="position:absolute;left:101.55px;top:497.79px" class="cls_010"><span class="cls_010">&lt;application xmlns="</span><A
            HREF="http://wadl.dev.java.net/2009/02"/">http://wadl.dev.java.net/2009/02"</A> </div>
    <div style="position:absolute;left:101.55px;top:510.40px" class="cls_010"><span
            class="cls_010">xmlns:service="</span><A HREF="http://localhost:8080/catalog/"/">http://localhost:8080/catalog/"</A>
    </div>
    <div style="position:absolute;left:101.55px;top:523.00px" class="cls_010"><span class="cls_010">xmlns:xsd="</span><A
            HREF="http://www.w3.org/2001/xmlschema"/">http://www.w3.org/2001/XMLSchema"</A>>
    </div>
    <div style="position:absolute;left:111.61px;top:535.61px" class="cls_010"><span class="cls_010">&lt;grammer></span>
    </div>
    <div style="position:absolute;left:121.68px;top:548.21px" class="cls_010"><span class="cls_010">&lt;include href="items.xsd" /></span>
    </div>
    <div style="position:absolute;left:121.68px;top:560.82px" class="cls_010"><span class="cls_010">&lt;include href="error.xsd" /></span>
    </div>
    <div style="position:absolute;left:111.61px;top:573.43px" class="cls_010"><span class="cls_010">&lt;/grammer></span>
    </div>
    <div style="position:absolute;left:111.61px;top:586.03px" class="cls_010"><span
            class="cls_010">&lt;resources base="</span><A HREF="http://localhost:8080/catalog/categories"/">http://localhost:8080/catalog/categories"</A>
        >
    </div>
    <div style="position:absolute;left:121.68px;top:598.64px" class="cls_010"><span class="cls_010">&lt;resource path="{category}"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:611.24px" class="cls_010"><span class="cls_010">&lt;method name="GET"></span>
    </div>
    <div style="position:absolute;left:141.82px;top:623.85px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:151.88px;top:636.46px" class="cls_010"><span class="cls_010">&lt;param name="category" type="xsd:string" style="template" /></span>
    </div>
    <div style="position:absolute;left:141.82px;top:649.06px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:141.82px;top:661.67px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:151.88px;top:674.27px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/xml" element="service:item"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:686.88px" class="cls_010"><span class="cls_010">/></span></div>
    <div style="position:absolute;left:151.88px;top:699.48px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:141.82px;top:712.09px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:41699px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background050.jpg" width=595 height=841></div>
    <div style="position:absolute;left:141.82px;top:104.91px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:151.88px;top:117.51px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/xml" element="service:item"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">/></span></div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span
            class="cls_010">&lt;/resource></span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span
            class="cls_010">&lt;/resources></span></div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span
            class="cls_010">&lt;/application></span></div>
    <div style="position:absolute;left:87.54px;top:224.66px" class="cls_002"><span class="cls_002">This extract of a WADL file shows how application, exposing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:241.47px" class="cls_002"><span class="cls_002">resources is described. Briefly, each resource must be part of an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:258.28px" class="cls_002"><span class="cls_002">application. The resource provides a, where it is located with the </span><span
            class="cls_008">base</span></div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_002"><span class="cls_002">attribute, and describes each of its supported HTTP methods in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:291.90px" class="cls_002"><span class="cls_002">method. Additionally, an optional </span><span
            class="cls_008">doc</span><span class="cls_002"> element can be used at</span></div>
    <div style="position:absolute;left:87.54px;top:308.70px" class="cls_002"><span class="cls_002">resource and application to provide additional documentation</span>
    </div>
    <div style="position:absolute;left:87.54px;top:325.51px" class="cls_002"><span class="cls_002">about the service and its operations.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:359.83px" class="cls_002"><span class="cls_002">Though WADL is optional, it significantly reduces the efforts of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:376.63px" class="cls_002"><span class="cls_002">discovering RESTful services.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:42550px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background051.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Documenting RESTful APIs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">with Swagger</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Public APIs exposed on the web should be well documented,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">otherwise it would be difficult for developers to use them in their</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">applications. While WADL definitions might be considered a source</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">of documentation, they address a different problem—the discovery</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">of the service. They serve metadata for the services to machines, not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">to humans. The Swagger project (</span><A
            HREF="https://swagger.io/">https://swagger.io/</A> </span><span class="cls_002">) addresses the</span></div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">need for neat documentation of RESTful APIs. It defines a meta</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">description of an API from an almost human-readable JSON</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">format. The following is a sample </span><span
            class="cls_008">swagger.json</span><span class="cls_002"> file, partially describing</span></div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span
            class="cls_002">the catalog service:</span></div>
    <div style="position:absolute;left:101.55px;top:431.26px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:443.87px" class="cls_010"><span
            class="cls_010">"swagger": "2.0",</span></div>
    <div style="position:absolute;left:111.61px;top:456.47px" class="cls_010"><span class="cls_010">"info": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:469.08px" class="cls_010"><span class="cls_010">"title": "Catalog API Documentation",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:481.68px" class="cls_010"><span
            class="cls_010">"version": "v1"</span></div>
    <div style="position:absolute;left:111.61px;top:494.29px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:506.90px" class="cls_010"><span class="cls_010">"paths": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:519.50px" class="cls_010"><span class="cls_010">"/categories/{id}" : {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:532.11px" class="cls_010"><span class="cls_010">"get": {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:544.71px" class="cls_010"><span class="cls_010">"operationId": "getCategoryV1",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:557.32px" class="cls_010"><span class="cls_010">"summary": "Get a specific category ",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:569.92px" class="cls_010"><span class="cls_010">"produces": [</span>
    </div>
    <div style="position:absolute;left:151.88px;top:582.53px" class="cls_010"><span
            class="cls_010">"application/json"</span></div>
    <div style="position:absolute;left:141.82px;top:595.14px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:141.82px;top:607.74px" class="cls_010"><span
            class="cls_010">"responses": {</span></div>
    <div style="position:absolute;left:151.88px;top:620.35px" class="cls_010"><span class="cls_010">"200": {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:632.95px" class="cls_010"><span class="cls_010">"description": "200 OK",</span>
    </div>
    <div style="position:absolute;left:161.95px;top:645.56px" class="cls_010"><span class="cls_010">"examples":</span>
    </div>
    <div style="position:absolute;left:172.02px;top:658.17px" class="cls_010"><span class="cls_010">{"application/json": {</span>
    </div>
    <div style="position:absolute;left:182.08px;top:670.77px" class="cls_010"><span class="cls_010">"id": 1,</span>
    </div>
    <div style="position:absolute;left:182.08px;top:683.38px" class="cls_010"><span
            class="cls_010">"name": "Watches",</span></div>
    <div style="position:absolute;left:182.08px;top:695.98px" class="cls_010"><span
            class="cls_010">"itemsCount": 550</span></div>
    <div style="position:absolute;left:182.08px;top:708.59px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:172.02px;top:721.19px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:43401px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background052.jpg" width=595 height=841></div>
    <div style="position:absolute;left:151.88px;top:104.91px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:151.88px;top:117.51px" class="cls_010"><span class="cls_010">"404": {"description" : "404 Not Found"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:130.12px" class="cls_010"><span class="cls_010">"500": {"description": "500 Internal Server Error"}</span>
    </div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span class="cls_010">"consumes": ["application/json"]</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:237.27px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">swagger.json</span><span class="cls_002"> file is really straightforward: it defines a name and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:254.08px" class="cls_002"><span class="cls_002">version of your API and gives a brief description of each operation it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:270.89px" class="cls_002"><span class="cls_002">exposes, nicely coupled with a sample payload. But the real benefit</span>
    </div>
    <div style="position:absolute;left:87.54px;top:287.69px" class="cls_002"><span class="cls_002">from it comes in another subproject of Swagger, called </span><span
            class="cls_008">swagger-ui</span><span class="cls_002"> (</span><span class="cls_007">http</span></div>
    <div style="position:absolute;left:87.54px;top:304.50px" class="cls_007"><span class="cls_007">s://swagger.io/swagger-ui/</span><span
            class="cls_002">), which actually renders this data</span></div>
    <div style="position:absolute;left:87.54px;top:321.31px" class="cls_002"><span class="cls_002">from </span><span
            class="cls_008">swagger.json</span><span
            class="cls_002"> nicely into an interactive web page that only</span></div>
    <div style="position:absolute;left:87.54px;top:338.12px" class="cls_002"><span class="cls_002">provides documentation, but also allows interaction with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.92px" class="cls_002"><span class="cls_002">service:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:44252px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background053.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:45103px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background054.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:114.71px" class="cls_002"><span class="cls_002">We will have a look at and utilize the </span><span
            class="cls_008">swagger-ui</span><span class="cls_002"> Node.js module to</span></div>
    <div style="position:absolute;left:87.54px;top:131.52px" class="cls_002"><span class="cls_002">provide the API that we will develop later in the book, with up-to-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:148.33px" class="cls_002"><span
            class="cls_002">date documentation.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:45954px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background055.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Taking advantage of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">existing infrastructure</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">The best part of developing and distributing RESTful applications is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">that the infrastructure needed is already out there, available to you.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">As RESTful applications use the existing web space heavily, you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">need to do nothing more than follow the REST principles when</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">developing. In addition, there are plenty of libraries available out</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">there for any platform, and I do mean any platform. This eases the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">development of RESTful applications, so you just need to choose</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">your preferred platform and start developing.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:46805px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background056.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, you learned about foundation of a REST, looking at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">five key principles that transform a web application into a REST-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">enabled application. We made a brief comparison between RESTful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">services and classical SOAP web services, and finally took a look at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">how RESTful services are documented and how we can simplify the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">discovery of the services we develop.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">Now that you know the basics, we are ready to dive into the Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">way of implementing RESTful services. In the next chapter, you will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">learn about the essentials of Node.js and the accompanying tools</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">that it is necessary to use and understand in order to build a real-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">life fully-fledged web service.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:47656px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background057.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Getting Started with Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, you will gain your first real Node.js experience. We</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">will start by installing Node.js, along with some modules we will use</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">throughout this book. Then, we will set up a development</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">environment. Throughout the book, the Atom IDE will be used. Yes,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">GitHub's online editor has finally landed for desktop environment</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">and is available on a platform of your preference!</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">Next, we will create a workspace and start developing our first</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Node.js application. It will be a simple server application processing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">incoming HTTP requests. We will go one step further,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">demonstrating how to modularize and unit test our JavaScript code.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">Finally, we will deploy our first application on the Heroku Cloud</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span
            class="cls_002">Application platform.</span></div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">To sum up, in this chapter, we will cover the following topics:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:481.68px" class="cls_002"><span
            class="cls_002">Installing Node.js</span></div>
    <div style="position:absolute;left:133.06px;top:511.80px" class="cls_002"><span class="cls_002">Installing the Express framework and other modules</span>
    </div>
    <div style="position:absolute;left:133.06px;top:541.91px" class="cls_002"><span class="cls_002">Setting up a development environment</span>
    </div>
    <div style="position:absolute;left:133.06px;top:572.03px" class="cls_002"><span class="cls_002">Handling HTTP requests</span>
    </div>
    <div style="position:absolute;left:133.06px;top:602.14px" class="cls_002"><span
            class="cls_002">Modularizing code</span></div>
    <div style="position:absolute;left:133.06px;top:632.25px" class="cls_002"><span
            class="cls_002">Testing Node.js</span></div>
    <div style="position:absolute;left:133.06px;top:662.37px" class="cls_002"><span class="cls_002">Deploying an application</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:48507px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background058.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Installing Node.js</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Let's start our journey through Node.js with a Node.js installation.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">Installers are available for both Windows and macOS at </span><A
            HREF="https://nodejs/">https://nodejs</A> </span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_007"><span
            class="cls_007">.org/en/download/</span><span class="cls_002">.  At the time of writing, Node.js 10 has just been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">released as the current version, and is about to become the next</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">Long Term Support version, in August 2018. Linux users can either</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">build Node.js from the available Linux binaries or make use of their</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">package manager, as Node.js is available with most of the popular</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">package repositories for different Linux distributions. For instance,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">Ubuntu and other Debian-based distributions should first point to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">the latest Node.js 10 package and then install via the </span><span
            class="cls_008">apt-get</span></div>
    <div style="position:absolute;left:87.54px;top:373.13px" class="cls_002"><span class="cls_002">command from the shell:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:417.25px" class="cls_010"><span class="cls_010">curl -sL </span><A
            HREF="https://deb.nodesource.com/setup_10.x/">https://deb.nodesource.com/setup_10.x</A> | sudo -E bash -
    </div>
    <div style="position:absolute;left:101.55px;top:429.86px" class="cls_010"><span class="cls_010">sudo apt-get install nodejs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:461.37px" class="cls_002"><span class="cls_002">If you decide to go with an installer available for macOS or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:478.18px" class="cls_002"><span class="cls_002">Windows, a wizard will guide you through a rather typical</span>
    </div>
    <div style="position:absolute;left:87.54px;top:494.99px" class="cls_002"><span class="cls_002">installation procedure, where you will have to accept the Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:511.80px" class="cls_002"><span class="cls_002">license agreement and then provide an installation path.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:546.11px" class="cls_002"><span class="cls_002">Linux users performing installations via package managers will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:562.92px" class="cls_002"><span class="cls_002">need to install Node Package Manager (npm) separately; we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:579.73px" class="cls_002"><span class="cls_002">will do that in the next section.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:614.04px" class="cls_002"><span class="cls_002">After a successful installation, you should have Node set on</span>
    </div>
    <div style="position:absolute;left:87.54px;top:630.85px" class="cls_002"><span class="cls_002">your </span><span
            class="cls_008">PATH</span><span class="cls_002"> environment variable.</span></div>
    <div style="position:absolute;left:87.54px;top:665.17px" class="cls_002"><span class="cls_002">The installer will have preselected for you the Node.js runtime,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:681.98px" class="cls_002"><span class="cls_002">npm, shortcuts to online documentation resources, as well as the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:698.78px" class="cls_002"><span class="cls_002">option to add Node.js and npm to your operating system </span><span
            class="cls_008">PATH</span></div>
    <div style="position:absolute;left:87.54px;top:715.59px" class="cls_002"><span
            class="cls_002">environment variable.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:49358px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background059.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">To verify that your installation was successful, execute the following</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span
            class="cls_002">from your shell:</span></div>
    <div style="position:absolute;left:101.55px;top:165.14px" class="cls_010"><span
            class="cls_010">node --version</span></div>
    <div style="position:absolute;left:132.36px;top:186.15px" class="cls_009"><span class="cls_009">At the time of writing, the latest Node.js version is 10.0.0 so, as expected, this</span>
    </div>
    <div style="position:absolute;left:132.36px;top:198.05px" class="cls_009"><span class="cls_009">version number will be the output of the version check. Node.js 10 will be the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:209.96px" class="cls_009"><span class="cls_009">next Long Term Supported version, so it will stay actual for the next few</span>
    </div>
    <div style="position:absolute;left:132.36px;top:221.86px" class="cls_009"><span class="cls_009">years</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:50209px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background060.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Npm</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Node.js eases support to third-party open source-developed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">modules by providing npm. It allows you, as a developer, to easily</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">install, manage, and even provide your own module packages. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">npm package repository is available at </span><A
            HREF="http://www.npmjs.org/">http://www.npmjs.org/</A> </span><span class="cls_002"> and is</span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">accessible via its command-line interface.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">If you didn't use the installer, then you will need to install </span><span
            class="cls_008">npm</span></div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">separately. For example, Ubuntu users can make use of their</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">package installer as follows:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:384.34px" class="cls_010"><span
            class="cls_010">apt-get npm install</span></div>
    <div style="position:absolute;left:87.54px;top:415.85px" class="cls_002"><span class="cls_002">If you upgraded your Node.js installation and you had previously</span>
    </div>
    <div style="position:absolute;left:87.54px;top:432.66px" class="cls_002"><span class="cls_002">installed npm 5.6, you would be asked to upgrade it to version 6. To</span>
    </div>
    <div style="position:absolute;left:87.54px;top:449.47px" class="cls_002"><span class="cls_002">do that, just execute:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:493.59px" class="cls_010"><span
            class="cls_010">sudo npm i -g npm</span></div>
    <div style="position:absolute;left:87.54px;top:525.10px" class="cls_002"><span class="cls_002">Once npm is installed, it is useful to set it permanently in your user</span>
    </div>
    <div style="position:absolute;left:87.54px;top:541.91px" class="cls_002"><span
            class="cls_002">profile's </span><span class="cls_008">PATH</span><span class="cls_002"> environment variable by editing the </span><span
            class="cls_008">~/.profile</span><span class="cls_002"> file to</span></div>
    <div style="position:absolute;left:87.54px;top:558.72px" class="cls_002"><span class="cls_002">export the path to npm as follows:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:602.84px" class="cls_010"><span class="cls_010">export PATH=$PATH:/path/to/npm</span>
    </div>
    <div style="position:absolute;left:87.54px;top:634.35px" class="cls_002"><span class="cls_002">After a successful npm installation, use npm's </span><span
            class="cls_008">ls</span><span class="cls_002"> option to display</span></div>
    <div style="position:absolute;left:87.54px;top:651.16px" class="cls_002"><span class="cls_002">the currently-installed Node.js modules:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:695.28px" class="cls_010"><span class="cls_010">bojinov@developer-machine:~$ npm ls</span>
    </div>
    <div style="position:absolute;left:101.55px;top:707.89px" class="cls_010"><span class="cls_010">/home/bojinov</span>
    </div>
    <div style="position:absolute;left:101.55px;top:720.49px" class="cls_010"><span
            class="cls_010">├─┬ accepts@1.3.3</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:51060px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background061.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">│ ├─┬ mime-types@2.1.13</span>
    </div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">│ │ └── mime-db@1.25.0</span>
    </div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">│ └── negotiator@0.6.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">├── array-flatten@1.1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">├─┬ cache-control@1.0.3</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">│ ├─┬ cache-header@1.0.3</span>
    </div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span class="cls_010">│ │ ├── lodash.isnumber@2.4.1 deduped</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">│ │ ├── lodash.isstring@2.4.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">│ │ └── regular@0.1.6 deduped</span>
    </div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">│ ├─┬ fast-url-parser@1.1.3</span>
    </div>
    <div style="position:absolute;left:101.55px;top:230.97px" class="cls_010"><span class="cls_010">│ │ └── punycode@1.4.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:243.57px" class="cls_010"><span class="cls_010">│ ├─┬ glob-slasher@1.0.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:256.18px" class="cls_010"><span class="cls_010">│ │ ├── glob-slash@1.0.0</span>
    </div>
    <div style="position:absolute;left:101.55px;top:268.78px" class="cls_010"><span class="cls_010">│ │ ├─┬ lodash.isobject@2.4.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:281.39px" class="cls_010"><span class="cls_010">│ │ │ └── lodash._objecttypes@2.4.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span
            class="cls_010">│ │ └─┬ toxic@1.0.0</span></div>
    <div style="position:absolute;left:101.55px;top:306.60px" class="cls_010"><span
            class="cls_010">│ │ └── lodash@2.4.2</span></div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span
            class="cls_010">│ ├─┬ globject@1.0.1</span></div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">│ │ └── minimatch@2.0.10 extraneous</span>
    </div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">│ ├── lodash.isnumber@2.4.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:357.03px" class="cls_010"><span class="cls_010">│ ├── on-headers@1.0.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:369.63px" class="cls_010"><span
            class="cls_010">│ └── regular@0.1.6</span></div>
    <div style="position:absolute;left:101.55px;top:382.24px" class="cls_010"><span class="cls_010">├── content-disposition@0.5.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:394.84px" class="cls_010"><span class="cls_010">├── content-type@1.0.2</span>
    </div>
    <div style="position:absolute;left:101.55px;top:407.45px" class="cls_010"><span
            class="cls_010">├── cookie@0.3.1</span></div>
    <div style="position:absolute;left:101.55px;top:420.05px" class="cls_010"><span class="cls_010">├── cookie-signature@1.0.6</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:51911px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background062.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Installing the Express</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">framework and other modules</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span
            class="cls_002">Now that we have </span><span class="cls_008">npm</span><span class="cls_002"> installed, let's make use of it and install some</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">of the modules we will be using heavily throughout this book. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">most important among them is the Express framework</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">(</span><A
            HREF="http://www.expressjs.com/">http://www.expressjs.com/</A> </span><span class="cls_002">). It is a flexible web application framework for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">Node.js, providing a robust RESTful API for developing single or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">multi-page web applications. The following command will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">download the Express module from the npm repository and make it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">available for our local Node.js installation:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:397.64px" class="cls_010"><span class="cls_010">npm install -g express</span>
    </div>
    <div style="position:absolute;left:87.54px;top:429.16px" class="cls_002"><span
            class="cls_002">You will find the </span><span class="cls_008">express</span><span class="cls_002"> module among the results of an </span><span
            class="cls_008">npm ls</span><span class="cls_002"> after a</span></div>
    <div style="position:absolute;left:87.54px;top:445.97px" class="cls_002"><span class="cls_002">successful installation. Later in this chapter, we will learn how to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:462.77px" class="cls_002"><span class="cls_002">write unit tests for our Node.js modules. We will need the </span><span
            class="cls_008">nodeunit</span></div>
    <div style="position:absolute;left:87.54px;top:479.58px" class="cls_002"><span class="cls_002">module for that purpose:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:523.70px" class="cls_010"><span class="cls_010">npm install nodeunit -g</span>
    </div>
    <div style="position:absolute;left:87.54px;top:555.22px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">-g</span><span class="cls_002"> option will install </span><span
            class="cls_008">nodeunit</span><span class="cls_002"> globally. This means that the</span></div>
    <div style="position:absolute;left:87.54px;top:572.03px" class="cls_002"><span class="cls_002">module will be stored at a central place on your filesystem; usually,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:588.83px" class="cls_002"><span
            class="cls_002">that is either </span><span class="cls_008">/usr/lib/node_modules</span><span
            class="cls_002">  or </span><span class="cls_008">/usr/lib/node</span><span class="cls_002">, but that can be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:605.64px" class="cls_002"><span class="cls_002">configured to the global configuration of your Node.js. Globally</span>
    </div>
    <div style="position:absolute;left:87.54px;top:622.45px" class="cls_002"><span class="cls_002">installed modules are available to all running node applications.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:656.76px" class="cls_002"><span class="cls_002">Locally installed modules will be stored in a </span><span
            class="cls_008">node_modules</span><span class="cls_002"> subdirectory</span></div>
    <div style="position:absolute;left:87.54px;top:673.57px" class="cls_002"><span class="cls_002">of the current working directory of your project and will be available</span>
    </div>
    <div style="position:absolute;left:87.54px;top:690.38px" class="cls_002"><span class="cls_002">only to that single project.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:52762px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background063.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Now, coming back to the </span><span
            class="cls_008">nodeunit</span><span class="cls_002"> module—it provides basic assert</span></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">test functions for creating basic unit tests as well as tools for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">executing them.</span></div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">Before starting to develop with Node.js, we have one more thing to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">look into: the package descriptor file of a Node.js application.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_002"><span class="cls_002">All Node.js applications or modules contain a </span><span
            class="cls_008">package.json</span><span class="cls_002"> descriptor</span></div>
    <div style="position:absolute;left:87.54px;top:240.07px" class="cls_002"><span class="cls_002">file. It provides meta-information about the module, its authors,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.88px" class="cls_002"><span class="cls_002">and the dependencies it uses. Let's take a look at the </span><span
            class="cls_008">package.json</span></div>
    <div style="position:absolute;left:87.54px;top:273.69px" class="cls_002"><span
            class="cls_002">file of the </span><span class="cls_008">express</span><span class="cls_002"> module we installed earlier:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:317.81px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:330.41px" class="cls_010"><span
            class="cls_010">"_from": "express",</span></div>
    <div style="position:absolute;left:111.61px;top:343.02px" class="cls_010"><span class="cls_010">"_id": "express@4.16.1",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:355.62px" class="cls_010"><span
            class="cls_010">"_inBundle": false,</span></div>
    <div style="position:absolute;left:111.61px;top:368.23px" class="cls_010"><span class="cls_010">"_integrity": "sha512-</span>
    </div>
    <div style="position:absolute;left:101.55px;top:380.84px" class="cls_010"><span class="cls_010">STB7LZ4N0L+81FJHGla2oboUHTk4PaN1RsOkoRh9OSeEKylvF5hwKYVX1xCLFaCT7MD0BNG/gX2WF</span>
    </div>
    <div style="position:absolute;left:101.55px;top:393.44px" class="cls_010"><span class="cls_010">MLqY6EMBw==",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:406.05px" class="cls_010"><span class="cls_010">"_location": "/express",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:418.65px" class="cls_010"><span class="cls_010">"_phantomChildren": {},</span>
    </div>
    <div style="position:absolute;left:111.61px;top:431.26px" class="cls_010"><span
            class="cls_010">"_requested": {</span></div>
    <div style="position:absolute;left:121.68px;top:443.87px" class="cls_010"><span class="cls_010">"type": "tag", "registry": true, "raw": "express", "name": "express",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:456.47px" class="cls_010"><span class="cls_010">"escapedName": "express","rawSpec": "", "saveSpec": null, "fetchSpec":</span>
    </div>
    <div style="position:absolute;left:101.55px;top:469.08px" class="cls_010"><span class="cls_010">"latest"</span>
    </div>
    <div style="position:absolute;left:111.61px;top:481.68px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:494.29px" class="cls_010"><span
            class="cls_010">"_requiredBy": [</span></div>
    <div style="position:absolute;left:121.68px;top:506.89px" class="cls_010"><span class="cls_010">"#USER"</span></div>
    <div style="position:absolute;left:111.61px;top:519.50px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:111.61px;top:532.11px" class="cls_010"><span
            class="cls_010">"_resolved": "</span><A HREF="https://registry.npmjs.org/express/-/express-4.16.1.tgz"/">https://registry.npmjs.org/express/-/express-4.16.1.tgz"</A>
        ,
    </div>
    <div style="position:absolute;left:111.61px;top:544.71px" class="cls_010"><span class="cls_010">"_shasum": "6b33b560183c9b253b7b62144df33a4654ac9ed0",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:557.32px" class="cls_010"><span
            class="cls_010">"_spec": "express",</span></div>
    <div style="position:absolute;left:111.61px;top:569.92px" class="cls_010"><span class="cls_010">"_where": "/home/valio/Downloads",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:582.53px" class="cls_010"><span class="cls_010">"author": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:595.14px" class="cls_010"><span class="cls_010">"name": "TJ Holowaychuk",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:607.74px" class="cls_010"><span class="cls_010">"email": "tj@vision-media.ca"</span>
    </div>
    <div style="position:absolute;left:111.61px;top:620.35px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:632.95px" class="cls_010"><span class="cls_010">"bugs": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:645.56px" class="cls_010"><span class="cls_010">"url": "</span><A
            HREF="https://github.com/expressjs/express/issues"/">https://github.com/expressjs/express/issues"</A> </div>
    <div style="position:absolute;left:111.61px;top:658.16px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:670.77px" class="cls_010"><span class="cls_010">"bundleDependencies": false,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:683.38px" class="cls_010"><span
            class="cls_010">"contributors": [</span></div>
    <div style="position:absolute;left:121.68px;top:695.98px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:708.59px" class="cls_010"><span class="cls_010">"name": "Aaron Heckmann",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:721.19px" class="cls_010"><span class="cls_010">"email": "aaron.heckmann+github@gmail.com"</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:53613px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background064.jpg" width=595 height=841></div>
    <div style="position:absolute;left:121.68px;top:104.91px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:116.65px;top:117.52px" class="cls_010"><span class="cls_010">...,</span></div>
    <div style="position:absolute;left:121.68px;top:130.12px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:142.73px" class="cls_010"><span class="cls_010">"name": "Young Jae Sim",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">"email": "hanul@hanul.me"</span>
    </div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span
            class="cls_010">"dependencies": {</span></div>
    <div style="position:absolute;left:121.68px;top:205.76px" class="cls_010"><span
            class="cls_010">"accepts": "~1.3.4",</span></div>
    <div style="position:absolute;left:121.68px;top:218.36px" class="cls_010"><span class="cls_010">"array-flatten": "1.1.1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:230.97px" class="cls_010"><span class="cls_010">"body-parser": "1.18.2",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:243.57px" class="cls_010"><span class="cls_010">...,</span></div>
    <div style="position:absolute;left:121.68px;top:256.18px" class="cls_010"><span class="cls_010">"type-is": "~1.6.15",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:268.79px" class="cls_010"><span class="cls_010">"utils-merge": "1.0.1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:281.39px" class="cls_010"><span
            class="cls_010">"vary": "~1.1.2"</span></div>
    <div style="position:absolute;left:111.61px;top:294.00px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:306.60px" class="cls_010"><span
            class="cls_010">"deprecated": false,</span></div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">"description": "Fast, unopinionated, minimalist web framework",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:331.81px" class="cls_010"><span
            class="cls_010">"devDependencies": {</span></div>
    <div style="position:absolute;left:121.68px;top:344.42px" class="cls_010"><span
            class="cls_010">"after": "0.8.2",</span></div>
    <div style="position:absolute;left:121.68px;top:357.03px" class="cls_010"><span class="cls_010">"connect-redis": "~2.4.1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:369.63px" class="cls_010"><span class="cls_010">...,</span></div>
    <div style="position:absolute;left:121.68px;top:382.24px" class="cls_010"><span
            class="cls_010">"should": "13.1.0",</span></div>
    <div style="position:absolute;left:121.68px;top:394.84px" class="cls_010"><span class="cls_010">"supertest": "1.2.0",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:407.45px" class="cls_010"><span
            class="cls_010">"vhost": "~3.0.2"</span></div>
    <div style="position:absolute;left:111.61px;top:420.06px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:432.66px" class="cls_010"><span class="cls_010">"engines": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:445.27px" class="cls_010"><span
            class="cls_010">"node": ">= 0.10.0"</span></div>
    <div style="position:absolute;left:111.61px;top:457.87px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:470.48px" class="cls_010"><span class="cls_010">"files": ["LICENSE", "History.md", "Readme.md", "index.js","lib/"],</span>
    </div>
    <div style="position:absolute;left:111.61px;top:483.08px" class="cls_010"><span class="cls_010">"homepage": "</span><A
            HREF="http://expressjs.com/"/">http://expressjs.com/"</A>,
    </div>
    <div style="position:absolute;left:111.61px;top:495.69px" class="cls_010"><span class="cls_010">"keywords": [</span>
    </div>
    <div style="position:absolute;left:121.68px;top:508.30px" class="cls_010"><span class="cls_010">"express", "framework", "sinatra", "web", "rest", "restful", "router",</span>
    </div>
    <div style="position:absolute;left:101.55px;top:520.90px" class="cls_010"><span class="cls_010">"app", "api"</span>
    </div>
    <div style="position:absolute;left:111.61px;top:533.51px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:111.61px;top:546.11px" class="cls_010"><span
            class="cls_010">"license": "MIT",</span></div>
    <div style="position:absolute;left:111.61px;top:558.72px" class="cls_010"><span
            class="cls_010">"name": "express",</span></div>
    <div style="position:absolute;left:111.61px;top:571.33px" class="cls_010"><span
            class="cls_010">"repository": {</span></div>
    <div style="position:absolute;left:121.68px;top:583.93px" class="cls_010"><span
            class="cls_010">"type": "git",</span></div>
    <div style="position:absolute;left:121.68px;top:596.54px" class="cls_010"><span
            class="cls_010">"url": "git+</span><A HREF="https://github.com/expressjs/express.git"/">https://github.com/expressjs/express.git"</A>
    </div>
    <div style="position:absolute;left:111.61px;top:609.14px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:621.75px" class="cls_010"><span class="cls_010">"scripts": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:634.35px" class="cls_010"><span
            class="cls_010">"lint": "eslint .",</span></div>
    <div style="position:absolute;left:121.68px;top:646.96px" class="cls_010"><span class="cls_010">"test": "mocha --require test/support/env --reporter spec --bail --check-</span>
    </div>
    <div style="position:absolute;left:101.55px;top:659.57px" class="cls_010"><span class="cls_010">leaks test/ test/acceptance/"</span>
    </div>
    <div style="position:absolute;left:111.61px;top:672.17px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:684.78px" class="cls_010"><span
            class="cls_010">"version": "4.16.1"</span></div>
    <div style="position:absolute;left:101.55px;top:697.38px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:54464px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background065.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">The name and the version of the package are mandatory properties</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">for every module. All other pieces of meta-information, such as the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">contributors list, repository type and location, license information,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">and so on, are optional. One of the most interesting properties,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">which is worth mentioning, is the </span><span
            class="cls_008">dependencies</span><span class="cls_002"> property. It tells npm</span></div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">which modules your package depends on. Let's take a deeper look at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">how this is specified. Each dependency has a name and a version.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">This tells npm that the package depends on the </span><span
            class="cls_008">accepts</span><span class="cls_002"> module with</span></div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span
            class="cls_002">version 1.3.4 and the </span><span class="cls_008">body-parse</span><span class="cls_002"> module with version 1.8.2. So,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">when npm installs the module, it will implicitly download and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">install the latest minor versions of the dependencies, in case they</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">are not already available.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.92px" class="cls_002"><span class="cls_002">The version of a dependency is specified in the following format:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_008"><span class="cls_008">major.minor.patch-version</span><span
            class="cls_002">.  You can specify npm if you want npm to use</span></div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span class="cls_002">exactly the specified version, or you can have npm always download</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span class="cls_002">the latest available minor version, by starting the version with </span><span
            class="cls_008">~</span><span class="cls_002">; see</span></div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">accepts</span><span class="cls_002"> dependency for reference.</span></div>
    <div style="position:absolute;left:132.36px;top:442.47px" class="cls_009"><span class="cls_009">For more information on versioning, visit the website of the semantic</span>
    </div>
    <div style="position:absolute;left:132.36px;top:454.37px" class="cls_009"><span class="cls_009">versioning specification at </span><span
            class="cls_011">http://www.semver.org/</span><span class="cls_009">.</span></div>
    <div style="position:absolute;left:132.36px;top:466.28px" class="cls_009"><span class="cls_009">Depending on automatically managed version may result in backward</span>
    </div>
    <div style="position:absolute;left:132.36px;top:478.18px" class="cls_009"><span class="cls_009">incompatibility, make sure you test your application each time you switch a</span>
    </div>
    <div style="position:absolute;left:132.36px;top:490.09px" class="cls_009"><span class="cls_009">version.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:55315px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background066.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Setting up a development</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">environment</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">JavaScript developers are rarely used to developing their projects in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">an IDE; most of them use text editors and tend to be prejudiced</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">against anything that contradicts their views. GitHub has finally</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">managed to calm most of them down by releasing the Atom IDE for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">the desktop environment. This may not solve all of the arguments</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">about which is the best environment, but will at least bring some</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">peace, and let people concentrate on their code, not on the tooling,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">which in the end is a matter of personal preference. The samples in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">this book are developed in the Atom IDE, but feel free to use any</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">piece of software that can create files, including command-line</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.95px" class="cls_002"><span class="cls_002">editors such as vi or vim, if that would make you feel like a JS</span>
    </div>
    <div style="position:absolute;left:450.87px;top:418.65px" class="cls_014"><span class="cls_014">th</span></div>
    <div style="position:absolute;left:87.54px;top:420.76px" class="cls_002"><span class="cls_002">superhero, though bear in mind that superheroes are so 20</span>
    </div>
    <div style="position:absolute;left:87.54px;top:437.56px" class="cls_002"><span class="cls_002">century!</span></div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span class="cls_002">You can download the Atom IDE from </span><span
            class="cls_007">https://ide.atom.io/</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:506.20px" class="cls_002"><span class="cls_002">It is time to start our first Node.js application, a simple web server</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span
            class="cls_002">responding with </span><span class="cls_008">Hello from Node.js</span><span class="cls_002">. Select a directory from your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span
            class="cls_002">project, for example, </span><span class="cls_008">hello-node</span><span class="cls_002">, then open a shell Terminal from it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span
            class="cls_002">and execute </span><span class="cls_008">npm init</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:600.74px" class="cls_010"><span class="cls_010">npm init</span>
    </div>
    <div style="position:absolute;left:101.55px;top:625.95px" class="cls_010"><span class="cls_010">package name: (hello-node)</span>
    </div>
    <div style="position:absolute;left:101.55px;top:638.56px" class="cls_010"><span
            class="cls_010">version: (1.0.0)</span></div>
    <div style="position:absolute;left:101.55px;top:651.16px" class="cls_010"><span class="cls_010">description: Simple hello world http handler</span>
    </div>
    <div style="position:absolute;left:101.55px;top:663.77px" class="cls_010"><span class="cls_010">entry point: (index.js) app.js</span>
    </div>
    <div style="position:absolute;left:101.55px;top:676.37px" class="cls_010"><span
            class="cls_010">test command: test</span></div>
    <div style="position:absolute;left:101.55px;top:688.98px" class="cls_010"><span
            class="cls_010">git repository:</span></div>
    <div style="position:absolute;left:101.55px;top:701.59px" class="cls_010"><span class="cls_010">keywords:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:714.19px" class="cls_010"><span class="cls_010">author: Valentin Bojinov</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:56166px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background067.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span
            class="cls_010">license: (ISC)</span></div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">About to write to /home/valio/nodejs8/hello-node/package.json:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">"name": "hello-node",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span
            class="cls_010">"version": "1.0.0",</span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">"description": "Simple hello world http handler",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span
            class="cls_010">"main": "app.js",</span></div>
    <div style="position:absolute;left:111.61px;top:205.76px" class="cls_010"><span class="cls_010">"scripts": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:218.36px" class="cls_010"><span
            class="cls_010">"test": "test"</span></div>
    <div style="position:absolute;left:111.61px;top:230.97px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:243.57px" class="cls_010"><span class="cls_010">"author": "Valentin Bojinov",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:256.18px" class="cls_010"><span
            class="cls_010">"license": "ISC"</span></div>
    <div style="position:absolute;left:101.55px;top:268.78px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:306.60px" class="cls_010"><span class="cls_010">Is this ok? (yes) yes</span>
    </div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">A command-line interaction wizard will ask you for your project</span>
    </div>
    <div style="position:absolute;left:87.54px;top:367.53px" class="cls_002"><span class="cls_002">name, its version, as well as some other metadata such as Git</span>
    </div>
    <div style="position:absolute;left:87.54px;top:384.34px" class="cls_002"><span class="cls_002">repository, your name, and so on, and will finally preview the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.15px" class="cls_008"><span
            class="cls_008">package.json</span><span class="cls_002"> file it is to generate; when complete, your first Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:417.95px" class="cls_002"><span class="cls_002">project is ready to begin.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.27px" class="cls_002"><span class="cls_002">Now is the appropriate time to spend some time on the code</span>
    </div>
    <div style="position:absolute;left:87.54px;top:469.08px" class="cls_002"><span class="cls_002">convention used in this book; ES6 inline anonymous functions will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:485.89px" class="cls_002"><span class="cls_002">be used when short callback functions should be defined, while</span>
    </div>
    <div style="position:absolute;left:87.54px;top:502.69px" class="cls_002"><span class="cls_002">regular javascript function will be used when reusability and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:519.50px" class="cls_002"><span class="cls_002">testability is expected.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.82px" class="cls_002"><span class="cls_002">Start the Atom IDE, select File | Add Project Folder..., and import</span>
    </div>
    <div style="position:absolute;left:87.54px;top:570.62px" class="cls_002"><span class="cls_002">the directory you defined the project in. Finally, after a successful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:587.43px" class="cls_002"><span class="cls_002">import, you will see the generated </span><span
            class="cls_008">package.json</span><span class="cls_002"> file in the project.</span></div>
    <div style="position:absolute;left:87.54px;top:604.24px" class="cls_002"><span class="cls_002">Right-click on the directory, select New File, and create a file called</span>
    </div>
    <div style="position:absolute;left:87.54px;top:621.05px" class="cls_008"><span
            class="cls_008">hello-node.js</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:665.17px" class="cls_010"><span class="cls_010">var http = require('http');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:690.38px" class="cls_010"><span class="cls_010">http.createServer((request, response) => {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:702.99px" class="cls_010"><span class="cls_010">response.writeHead(200, {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:715.59px" class="cls_010"><span class="cls_010">'Content-Type' : 'text/plain'</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:57017px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background068.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:117.52px" class="cls_010"><span class="cls_010">response.end('Hello from Node.JS');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:130.12px" class="cls_010"><span class="cls_010">console.log('Hello handler requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">}).listen(8180, '127.0.0.1', () => {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">console.log('Started Node.js http server at </span><A
            HREF="http://127.0.0.1:8180'/">http://127.0.0.1:8180'</A>);
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:199.45px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">hello-node.js</span><span class="cls_002"> file uses the Node.js HTTP module to start listening</span>
    </div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_002"><span class="cls_002">for incoming requests on port </span><span
            class="cls_008">8180</span><span class="cls_002">. It will reply with static </span><span class="cls_008">Hello from</span>
    </div>
    <div style="position:absolute;left:87.54px;top:233.07px" class="cls_008"><span class="cls_008">Node.JS</span><span
            class="cls_002"> to each request and will log a hello log entry in the console.</span></div>
    <div style="position:absolute;left:87.54px;top:249.88px" class="cls_002"><span class="cls_002">Before starting the application, we have to install the </span><span
            class="cls_008">http</span><span class="cls_002"> module</span></div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">that creates an HTTP server for it. Let's install it globally together</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">with the </span><span
            class="cls_008">--save</span><span class="cls_002"> option, which will add a dependency to it in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_008"><span
            class="cls_008">package.json</span><span
            class="cls_002"> file of the project. Then we can start the app:</span></div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">npm install -g http --save</span>
    </div>
    <div style="position:absolute;left:101.55px;top:357.03px" class="cls_010"><span
            class="cls_010">node hello-node.js</span></div>
    <div style="position:absolute;left:87.54px;top:388.54px" class="cls_002"><span class="cls_002">Opening </span><A
            HREF="http://localhost:8180/">http://localhost:8180/</A> </span><span class="cls_002"> from your browser will result in sending</span>
    </div>
    <div style="position:absolute;left:87.54px;top:405.35px" class="cls_002"><span class="cls_002">a request to the server application, which will make a log entry in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:422.16px" class="cls_002"><span class="cls_002">the console and will output </span><span
            class="cls_008">Hello from Node.JS</span><span class="cls_002"> in your browser:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:57868px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background069.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Handling HTTP requests</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Currently, our server application will behave in the same way, no</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">matter what kind of HTTP request is processed. Let's extend it in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">such a way that it behaves more like an HTTP server, and start</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">differentiating the incoming requests based on their type, by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">implementing handler functions for each type of request.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span
            class="cls_002">Let's create a new </span><span class="cls_008">hello-node-http-server.js</span><span
            class="cls_002"> as follows:</span></div>
    <div style="position:absolute;left:101.55px;top:350.72px" class="cls_010"><span class="cls_010">var http = require('http');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:363.33px" class="cls_010"><span
            class="cls_010">var port = 8180;</span></div>
    <div style="position:absolute;left:101.55px;top:388.54px" class="cls_010"><span class="cls_010">function handleGetRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:401.15px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:413.75px" class="cls_010"><span class="cls_010">response.end('Get action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:426.36px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:451.57px" class="cls_010"><span class="cls_010">function handlePostRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:464.18px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:476.78px" class="cls_010"><span class="cls_010">response.end('Post action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:489.39px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:514.60px" class="cls_010"><span class="cls_010">function handlePutRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:527.20px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:539.81px" class="cls_010"><span class="cls_010">response.end('Put action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:552.42px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:577.63px" class="cls_010"><span class="cls_010">function handleDeleteRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:590.23px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:602.84px" class="cls_010"><span class="cls_010">response.end('Delete action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:615.45px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:640.66px" class="cls_010"><span class="cls_010">function handleBadRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:653.26px" class="cls_010"><span class="cls_010">console.log('Unsupported http mehtod');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:665.87px" class="cls_010"><span class="cls_010">response.writeHead(400, {'Content-Type' : 'text/plain'</span>
    </div>
    <div style="position:absolute;left:393.49px;top:665.87px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:678.47px" class="cls_010"><span class="cls_010">response.end('Bad request');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:691.08px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:716.29px" class="cls_010"><span class="cls_010">function handleRequest(request, response) {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:58719px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background070.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">switch (request.method) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:117.51px" class="cls_010"><span class="cls_010">case 'GET':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:130.12px" class="cls_010"><span class="cls_010">handleGetRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:142.73px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:155.33px" class="cls_010"><span class="cls_010">case 'POST':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:167.94px" class="cls_010"><span class="cls_010">handlePostRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:180.54px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:193.15px" class="cls_010"><span class="cls_010">case 'PUT':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:205.76px" class="cls_010"><span class="cls_010">handlePutRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:218.36px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:230.97px" class="cls_010"><span
            class="cls_010">case 'DELETE':</span></div>
    <div style="position:absolute;left:131.75px;top:243.57px" class="cls_010"><span class="cls_010">handleDeleteRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:256.18px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:268.78px" class="cls_010"><span class="cls_010">default:</span>
    </div>
    <div style="position:absolute;left:131.75px;top:281.39px" class="cls_010"><span class="cls_010">handleBadRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:294.00px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:111.61px;top:306.60px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">console.log('Request processing completed');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:357.03px" class="cls_010"><span class="cls_010">http.createServer(handleRequest).listen(8180, '127.0.0.1', () => {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:369.63px" class="cls_010"><span class="cls_010">console.log('Started Node.js http server at </span><A
            HREF="http://127.0.0.1:8180'/">http://127.0.0.1:8180'</A>);
    </div>
    <div style="position:absolute;left:101.55px;top:382.24px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:413.75px" class="cls_002"><span class="cls_002">When we run this application, our HTTP server will recognize</span>
    </div>
    <div style="position:absolute;left:87.54px;top:430.56px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">GET</span><span class="cls_002">, </span><span class="cls_008">POST</span><span
            class="cls_002">, </span><span class="cls_008">PUT</span><span class="cls_002">, and </span><span
            class="cls_008">DELETE</span><span class="cls_002"> HTTP methods, and will handle them in</span></div>
    <div style="position:absolute;left:87.54px;top:447.37px" class="cls_002"><span class="cls_002">different functions. To all other HTTP requests, it will gracefully</span>
    </div>
    <div style="position:absolute;left:87.54px;top:464.18px" class="cls_002"><span
            class="cls_002">respond with the </span><span class="cls_008">HTTP 400 BAD REQUEST</span><span
            class="cls_002"> status code. To interact with the</span></div>
    <div style="position:absolute;left:87.54px;top:480.98px" class="cls_002"><span class="cls_002">HTTP applications,  we will use Postman, available to download</span>
    </div>
    <div style="position:absolute;left:87.54px;top:497.79px" class="cls_002"><span class="cls_002">from </span><span
            class="cls_007">https://www.getpostman.com/</span><span class="cls_002">. It is a lightweight application for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:514.60px" class="cls_002"><span class="cls_002">sending HTTP requests to an endpoint, specifying HTTP headers,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:531.41px" class="cls_002"><span class="cls_002">and providing payload. Give it a try and execute test requests for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:548.21px" class="cls_002"><span class="cls_002">each of the handler functions we implemented previously:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:59570px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background071.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:60421px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background072.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Modularizing code</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">What we have developed so far is a simple HTTP server application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">that listens and processes known request types; however, it is not so</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">well structured, as the functions handling the requests are not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">reusable. Node.js supports modules embracing code isolation and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">reusability.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:306.60px" class="cls_009"><span class="cls_009">A user</span><span
            class="cls_015">-</span><span class="cls_009">defined module is a logical unit consisting of one or more related</span>
    </div>
    <div style="position:absolute;left:132.36px;top:318.51px" class="cls_009"><span class="cls_009">functions. The module can export one or more functions to other components</span>
    </div>
    <div style="position:absolute;left:132.36px;top:330.41px" class="cls_009"><span class="cls_009">while keeping other functions visible only to itself.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:352.82px" class="cls_002"><span class="cls_002">We will rework our HTTP server application in such a way that the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:369.63px" class="cls_002"><span class="cls_002">entire request handling functionality will be wrapped in a module.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:386.44px" class="cls_002"><span class="cls_002">The module will export only a generic handler function that will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.25px" class="cls_002"><span class="cls_002">take a request object as argument and, based on its request type, it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:420.06px" class="cls_002"><span class="cls_002">will delegate the handling to inner functions not visible outside the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:436.86px" class="cls_002"><span class="cls_002">module.</span></div>
    <div style="position:absolute;left:87.54px;top:471.18px" class="cls_002"><span class="cls_002">Let's start by creating a new module directory within our project.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:487.99px" class="cls_002"><span class="cls_002">We will refactor our previous source file by extracting the following</span>
    </div>
    <div style="position:absolute;left:87.54px;top:504.79px" class="cls_002"><span
            class="cls_002">functions to a new </span><span class="cls_008">http-module.js</span><span class="cls_002"> file inside the newly created</span>
    </div>
    <div style="position:absolute;left:87.54px;top:521.60px" class="cls_002"><span class="cls_002">directory:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:565.72px" class="cls_010"><span class="cls_010">function handleGetRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:578.33px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:590.93px" class="cls_010"><span class="cls_010">response.end('Get action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:603.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:628.75px" class="cls_010"><span class="cls_010">function handlePostRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:641.36px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:653.96px" class="cls_010"><span class="cls_010">response.end('Post action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:666.57px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:691.78px" class="cls_010"><span class="cls_010">function handlePutRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:704.39px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:716.99px" class="cls_010"><span class="cls_010">response.end('Put action was requested');</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:61272px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background073.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">function handleDeleteRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">response.writeHead(200, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">response.end('Delete action was requested');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">function handleBadRequest(response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:205.76px" class="cls_010"><span class="cls_010">console.log('Unsupported http mehtod');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:218.36px" class="cls_010"><span class="cls_010">response.writeHead(400, {'Content-Type' : 'text/plain'</span>
    </div>
    <div style="position:absolute;left:393.49px;top:218.36px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:230.97px" class="cls_010"><span class="cls_010">response.end('Bad request');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:243.57px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:268.78px" class="cls_010"><span class="cls_010">exports.handleRequest = function(request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:281.39px" class="cls_010"><span class="cls_010">switch (request.method) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:294.00px" class="cls_010"><span class="cls_010">case 'GET':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:306.60px" class="cls_010"><span class="cls_010">handleGetRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:319.21px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:331.81px" class="cls_010"><span class="cls_010">case 'POST':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">handlePostRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:357.03px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:369.63px" class="cls_010"><span class="cls_010">case 'PUT':</span>
    </div>
    <div style="position:absolute;left:131.75px;top:382.24px" class="cls_010"><span class="cls_010">handlePutRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:394.84px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:407.45px" class="cls_010"><span
            class="cls_010">case 'DELETE':</span></div>
    <div style="position:absolute;left:131.75px;top:420.05px" class="cls_010"><span class="cls_010">handleDeleteRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:432.66px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:445.27px" class="cls_010"><span class="cls_010">default:</span>
    </div>
    <div style="position:absolute;left:131.75px;top:457.87px" class="cls_010"><span class="cls_010">handleBadRequest(response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:470.48px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:111.61px;top:483.08px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:495.69px" class="cls_010"><span class="cls_010">console.log('Request processing completed');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:508.30px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">This file creates a user-defined module that exports the </span><span
            class="cls_008">handleRequest</span></div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">function, making it available to the other components. All the other</span>
    </div>
    <div style="position:absolute;left:87.54px;top:573.43px" class="cls_002"><span class="cls_002">functions are accessible only within the module. Although the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">sample exports only one function, a module can export as many</span>
    </div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">functions as is feasible.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:641.36px" class="cls_002"><span
            class="cls_002">Let's use the new </span><span class="cls_008">http-module</span><span class="cls_002"> in the </span><span
            class="cls_008">main.js</span><span class="cls_002"> file in the </span><span
            class="cls_008">main</span><span class="cls_002"> directory of</span></div>
    <div style="position:absolute;left:87.54px;top:658.16px" class="cls_002"><span class="cls_002">our first project. We have to create an </span><span
            class="cls_008">http</span><span class="cls_002"> server using the Node.js</span></div>
    <div style="position:absolute;left:87.54px;top:674.97px" class="cls_002"><span class="cls_002">built-in </span><span
            class="cls_008">http</span><span class="cls_002"> module, and its </span><span
            class="cls_008">createServer</span><span class="cls_002"> will pass its </span><span class="cls_008">handleRequest</span>
    </div>
    <div style="position:absolute;left:87.54px;top:691.78px" class="cls_002"><span class="cls_002">function as its argument. It will serve as a callback function that the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:708.59px" class="cls_002"><span class="cls_002">server will invoke on each request:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:62123px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background074.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">var http = require('http');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:126.62px" class="cls_010"><span
            class="cls_010">var port = 8180;</span></div>
    <div style="position:absolute;left:101.55px;top:151.83px" class="cls_010"><span class="cls_010">var httpModule = require('./modules/http-module');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:177.04px" class="cls_010"><span class="cls_010">http.createServer(httpModule.handleRequest).listen(8180, '127.0.0.1', () => {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:189.65px" class="cls_010"><span class="cls_010">console.log('Started Node.js http server at </span><A
            HREF="http://127.0.0.1:8180'/">http://127.0.0.1:8180'</A>);
    </div>
    <div style="position:absolute;left:101.55px;top:202.25px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:233.77px" class="cls_002"><span class="cls_002">We separated the creation of the server socket from the business</span>
    </div>
    <div style="position:absolute;left:87.54px;top:250.58px" class="cls_002"><span class="cls_002">logic that handles the incoming requests bound to it. The </span><span
            class="cls_008">require</span></div>
    <div style="position:absolute;left:87.54px;top:267.38px" class="cls_002"><span class="cls_002">directive is used to import our module. It uses a relative path to it.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:284.19px" class="cls_002"><span class="cls_002">Try this version as well by executing another test request with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:301.00px" class="cls_002"><span
            class="cls_002">Postman tooling.</span></div>
    <div style="position:absolute;left:132.36px;top:335.32px" class="cls_009"><span class="cls_009">Luckily, we will not be creating our own HTTP handlers when implementing</span>
    </div>
    <div style="position:absolute;left:132.36px;top:347.22px" class="cls_009"><span class="cls_009">our RESTful-enabled applications. The Express framework will do this for</span>
    </div>
    <div style="position:absolute;left:132.36px;top:359.13px" class="cls_009"><span class="cls_009">us. The examples in this chapter are meant to provide a clear example of the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:371.03px" class="cls_009"><span class="cls_009">Node.js possibilities when it comes to handling HTTP requests and how user</span>
    </div>
    <div style="position:absolute;left:132.36px;top:382.94px" class="cls_009"><span class="cls_009">modules are implemented. We will take a detailed look at the Express</span>
    </div>
    <div style="position:absolute;left:132.36px;top:394.84px" class="cls_009"><span class="cls_009">framework in </span><span
            class="cls_011">Chapter 3</span><span class="cls_009">, Building a Typical Web API.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:62974px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background075.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Testing Node.js</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Now we will extend our project by providing a unit test for the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">HTTP module, but before diving into that, let's have a look at how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">Node.js supports unit testing in general. At the beginning of this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">chapter, we installed the Nodeunit module. Well, it's about time we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">started playing around with it.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">First, let's create another simple Node.js module that we will use to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">implement our first unit test. Then we will move to more advanced</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">topics, such as mocking JavaScript objects and using them to create</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">unit tests for our HTTP module.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span class="cls_002">I have chosen to develop a simple math module that exports</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">functions for adding and subtracting integer numbers, as it is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">straightforward enough and the results of each operation are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span
            class="cls_002">strictly defined.</span></div>
    <div style="position:absolute;left:87.54px;top:476.08px" class="cls_002"><span class="cls_002">Let's start with the module and create the following </span><span
            class="cls_008">math.js</span><span class="cls_002"> file in our</span></div>
    <div style="position:absolute;left:87.54px;top:492.89px" class="cls_008"><span class="cls_008">module</span><span
            class="cls_002"> directory:</span></div>
    <div style="position:absolute;left:101.55px;top:537.01px" class="cls_010"><span class="cls_010">exports.add = function (x, y) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:549.62px" class="cls_010"><span class="cls_010">return x + y;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:562.22px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:101.55px;top:574.83px" class="cls_010"><span class="cls_010">exports.subtract = function (x, y) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:587.43px" class="cls_010"><span class="cls_010">return x - y;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:600.04px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:631.55px" class="cls_002"><span class="cls_002">The next step will be to create a </span><span
            class="cls_008">test-math.js</span><span class="cls_002"> file in the </span><span
            class="cls_008">test</span></div>
    <div style="position:absolute;left:87.54px;top:648.36px" class="cls_002"><span class="cls_002">subdirectory of our project:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:692.48px" class="cls_010"><span class="cls_010">var math = require('../modules/math');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:705.09px" class="cls_010"><span class="cls_010">exports.addTest = function (test) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:717.69px" class="cls_010"><span class="cls_010">test.equal(math.add(1, 1), 2);</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:63825px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background076.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">test.done();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">exports.subtractTest = function (test) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">test.equals(math.subtract(4,2), 2);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">test.done();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:199.45px" class="cls_002"><span class="cls_002">Finally, run the test module from a shell Terminal with </span><span
            class="cls_008">nodeunit</span></div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_008"><span
            class="cls_008">test/test-math.js</span><span class="cls_002">. The output will show the results of all the test</span>
    </div>
    <div style="position:absolute;left:87.54px;top:233.07px" class="cls_002"><span class="cls_002">methods, specifying whether they passed successfully or not:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:277.19px" class="cls_010"><span class="cls_010">nodeunit test/test-math.js</span>
    </div>
    <div style="position:absolute;left:121.68px;top:289.79px" class="cls_010"><span class="cls_010">test-math.js</span>
    </div>
    <div style="position:absolute;left:121.68px;top:302.40px" class="cls_010"><span class="cls_010">test-math.js</span>
    </div>
    <div style="position:absolute;left:106.58px;top:315.01px" class="cls_010"><span class="cls_010">addTest</span></div>
    <div style="position:absolute;left:106.58px;top:327.61px" class="cls_010"><span class="cls_010">subtractTest</span>
    </div>
    <div style="position:absolute;left:101.55px;top:352.82px" class="cls_010"><span class="cls_010">OK: 2 assertions (5ms)</span>
    </div>
    <div style="position:absolute;left:87.54px;top:384.34px" class="cls_002"><span
            class="cls_002">Let's modify </span><span class="cls_008">addTest</span><span class="cls_002"> in such a way that it gets broken and to see how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.15px" class="cls_002"><span class="cls_002">test failures are reported by the Nodeunit module:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:445.27px" class="cls_010"><span class="cls_010">exports.test_add = function (test) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:457.87px" class="cls_010"><span class="cls_010">test.equal(math.add(1, 1), 3);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:470.48px" class="cls_010"><span class="cls_010">test.done();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:483.08px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:514.60px" class="cls_002"><span class="cls_002">Executing the test this time results in a failure with some assert</span>
    </div>
    <div style="position:absolute;left:87.54px;top:531.41px" class="cls_002"><span class="cls_002">failure messages, and in the end, there is an aggregation saying how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:548.21px" class="cls_002"><span class="cls_002">many of the executed tests failed:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:592.33px" class="cls_010"><span class="cls_010">nodeunit test-math.js</span>
    </div>
    <div style="position:absolute;left:101.55px;top:604.94px" class="cls_010"><span class="cls_010">test-math.js</span>
    </div>
    <div style="position:absolute;left:106.58px;top:617.55px" class="cls_010"><span class="cls_010">addTest</span></div>
    <div style="position:absolute;left:101.55px;top:630.15px" class="cls_010"><span class="cls_010">at Object.equal (/usr/lib/node_modules/nodeunit/lib/types.js:83:39)</span>
    </div>
    <div style="position:absolute;left:101.55px;top:642.76px" class="cls_010"><span class="cls_010">at Object.exports.addTest (../hello-node/test/test-math.js:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:655.36px" class="cls_010"><span class="cls_010">(..)</span></div>
    <div style="position:absolute;left:101.55px;top:680.58px" class="cls_010"><span class="cls_010">AssertionError: 2 == 3</span>
    </div>
    <div style="position:absolute;left:106.58px;top:693.18px" class="cls_010"><span class="cls_010">subtractTest</span>
    </div>
    <div style="position:absolute;left:101.55px;top:705.79px" class="cls_010"><span class="cls_010">FAILURES: 1/2 assertions failed (12ms)</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:64676px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background077.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">We just created our Nodeunit's first unit test. However, it tests</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">math function in a rather isolated way. I suppose you are wondering</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">how we can use Nodeunit to test functions with complex arguments</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">such as HTTP request and response, that are bound to a context.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">This is possible using so-called mock objects. They are a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">predefined version of the state of complex context-based arguments</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">or functions, in objects that we want to use in our unit test in order</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">to test the behavior of our module for the exact state of the object.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">To use mock objects, we will need to install a module that supports</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">object mocking. There are various types of testing tools and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.80px" class="cls_002"><span class="cls_002">modules available out there. Most of them, however, are designed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">to test the JavaScript client functionality. There are modules such</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">as JsMockito, a JavaScript fork of the famous Mockito framework</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">for Java, and node-inspector, a module that provides a JavaScript</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">debugger that starts implicitly in the Google Chrome browser.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span class="cls_002">Native support for the Chrome browser is logical, since Node.js is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">built on top of the Google V8 JavaScript Engine. As we are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">developing a server-side application, these are not the most</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">convenient tools, as JsMockito is not pluggable as a Node.js</span>
    </div>
    <div style="position:absolute;left:87.54px;top:458.57px" class="cls_002"><span class="cls_002">module, and using a debugger within your browser to debug backed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:475.38px" class="cls_002"><span class="cls_002">applications just doesn't seem right to me. Anyway, if you are about</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">to dive deeper into Node.js, you should definitely give them a try.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:526.50px" class="cls_009"><span class="cls_009">For testing server-side JavaScript modules, we will use the Sinon.JS module.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:538.41px" class="cls_009"><span class="cls_009">Like all the other modules, it is available in the npm repository, so execute</span>
    </div>
    <div style="position:absolute;left:132.36px;top:550.32px" class="cls_009"><span class="cls_009">the following command to install it:</span>
    </div>
    <div style="position:absolute;left:142.87px;top:569.92px" class="cls_016"><span
            class="cls_016">npm install -g sinon</span></div>
    <div style="position:absolute;left:87.54px;top:597.24px" class="cls_002"><span class="cls_002">Sinon.JS is a very flexible JavaScript testing library providing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:614.05px" class="cls_002"><span class="cls_002">functionality for mocking, stubbing, and spying on JavaScript</span>
    </div>
    <div style="position:absolute;left:87.54px;top:630.85px" class="cls_002"><span class="cls_002">objects. It is available at </span><A
            HREF="http://sinonjs.org/">http://sinonjs.org</A> </span><span
            class="cls_002"> and can be used with any</span></div>
    <div style="position:absolute;left:87.54px;top:647.66px" class="cls_002"><span class="cls_002">JavaScript testing framework. Let's see what we need in order to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:664.47px" class="cls_002"><span class="cls_002">test our HTTP module. It exports a single method, </span><span
            class="cls_008">handleRequest</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:681.28px" class="cls_002"><span class="cls_002">which takes the HTTP request and response objects as arguments.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:698.08px" class="cls_002"><span class="cls_002">Based on the requested method, the module calls its internal</span>
    </div>
    <div style="position:absolute;left:87.54px;top:714.89px" class="cls_002"><span class="cls_002">functions to handle different requests. Each request handler writes</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:65527px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background078.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.45px" class="cls_002"><span class="cls_002">a different output to the response.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:138.52px" class="cls_002"><span class="cls_002">To test this functionality in an isolated environment such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:155.33px" class="cls_002"><span class="cls_002">Nodeunit, we need mock objects, which will then be passed as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">arguments. To ensure that the module behaves as expected, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">need to have access to the data stored in those objects.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:66378px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background079.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Working with mock objects</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Here are the steps that need to be carried out when using mock</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">objects:</span></div>
    <div style="position:absolute;left:115.55px;top:261.78px" class="cls_002"><span
            class="cls_002">1. Call the </span><span class="cls_008">require</span><span
            class="cls_002"> function with </span><span class="cls_008">sinon</span><span class="cls_002"> as a parameter and export</span>
    </div>
    <div style="position:absolute;left:133.06px;top:282.79px" class="cls_002"><span class="cls_002">a </span><span
            class="cls_008">test</span><span class="cls_002"> function from it:</span></div>
    <div style="position:absolute;left:140.77px;top:339.52px" class="cls_010"><span class="cls_010">var sinon = require('sinon');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:352.12px" class="cls_010"><span class="cls_010">exports.testAPI(test){...}</span>
    </div>
    <div style="position:absolute;left:114.15px;top:396.24px" class="cls_002"><span class="cls_002">2. Define an API description of the method you want to mock</span>
    </div>
    <div style="position:absolute;left:133.06px;top:417.25px" class="cls_002"><span class="cls_002">as follows:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:473.98px" class="cls_010"><span class="cls_010">var api = {'methodX' : function () {},</span>
    </div>
    <div style="position:absolute;left:150.83px;top:486.59px" class="cls_010"><span class="cls_010">'methodY' : function() {},</span>
    </div>
    <div style="position:absolute;left:150.83px;top:499.19px" class="cls_010"><span class="cls_010">'methodZ' : function() {}};</span>
    </div>
    <div style="position:absolute;left:114.15px;top:543.31px" class="cls_002"><span class="cls_002">3. Use </span><span
            class="cls_008">sinon</span><span class="cls_002"> within the exported function in order to create</span>
    </div>
    <div style="position:absolute;left:133.06px;top:564.32px" class="cls_002"><span class="cls_002">mock objects out of the </span><span
            class="cls_008">api</span><span class="cls_002"> description:</span></div>
    <div style="position:absolute;left:140.77px;top:621.05px" class="cls_010"><span class="cls_010">var mock = sinon.mock(api);</span>
    </div>
    <div style="position:absolute;left:114.15px;top:665.17px" class="cls_002"><span class="cls_002">4. Set the expectations on the mock objects. Expectations are</span>
    </div>
    <div style="position:absolute;left:133.06px;top:686.18px" class="cls_002"><span class="cls_002">set on the mocked objects by describing how the mocked</span>
    </div>
    <div style="position:absolute;left:133.06px;top:707.19px" class="cls_002"><span class="cls_002">method should behave, what arguments it is supposed to</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:67229px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background080.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">take, and what value it is supposed to return. When the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_002"><span class="cls_002">mocked method is called with a different state than what is</span>
    </div>
    <div style="position:absolute;left:133.06px;top:148.33px" class="cls_002"><span class="cls_002">described, the expectation will fail when verified later:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:205.06px" class="cls_010"><span class="cls_010">mock.expects('methodX').once().withArgs('xyz')</span>
    </div>
    <div style="position:absolute;left:140.77px;top:217.66px" class="cls_010"><span
            class="cls_010">.returns('abc');</span></div>
    <div style="position:absolute;left:140.77px;top:230.27px" class="cls_010"><span
            class="cls_010">api.methodX('xyz')</span></div>
    <div style="position:absolute;left:114.15px;top:274.39px" class="cls_002"><span class="cls_002">5. The preceding sample expects that </span><span
            class="cls_008">methodX</span><span class="cls_002"> gets called exactly</span></div>
    <div style="position:absolute;left:133.06px;top:295.40px" class="cls_002"><span
            class="cls_002">once with the </span><span class="cls_008">xyz</span><span class="cls_002"> argument, and it will force the method to</span>
    </div>
    <div style="position:absolute;left:133.06px;top:316.41px" class="cls_002"><span class="cls_002">return </span><span
            class="cls_008">abc</span><span class="cls_002">. The Sinon.JS module makes that possible for us.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:363.33px" class="cls_009"><span class="cls_009">The method of the description object is called and not that of the mocked</span>
    </div>
    <div style="position:absolute;left:132.36px;top:375.23px" class="cls_009"><span class="cls_009">object. The mocked object is used to set the expectations for the mocked</span>
    </div>
    <div style="position:absolute;left:132.36px;top:387.14px" class="cls_009"><span class="cls_009">method, and later to check whether those expectations have been fulfilled.</span>
    </div>
    <div style="position:absolute;left:113.45px;top:422.16px" class="cls_002"><span class="cls_002">6. Use the mocked object in the test environment and, later,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:443.17px" class="cls_002"><span
            class="cls_002">call its </span><span class="cls_008">verify()</span><span class="cls_002"> method. This method will check whether the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:464.18px" class="cls_002"><span class="cls_002">code being tested interacted correctly with mock, that is,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:485.18px" class="cls_002"><span class="cls_002">how many times the method has been called and whether it</span>
    </div>
    <div style="position:absolute;left:133.06px;top:506.19px" class="cls_002"><span class="cls_002">has been called with the expected arguments. If any of the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:527.20px" class="cls_002"><span class="cls_002">expectations is not met, then an error will be thrown,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:548.21px" class="cls_002"><span class="cls_002">causing the test to fail.</span>
    </div>
    <div style="position:absolute;left:114.85px;top:569.22px" class="cls_002"><span
            class="cls_002">7. The exported </span><span class="cls_008">test</span><span class="cls_002"> function of our test module has an</span>
    </div>
    <div style="position:absolute;left:133.06px;top:590.23px" class="cls_002"><span class="cls_002">argument. That argument provides assert methods that can</span>
    </div>
    <div style="position:absolute;left:133.06px;top:611.24px" class="cls_002"><span class="cls_002">be used to check test conditions. In our example, we mocked</span>
    </div>
    <div style="position:absolute;left:133.06px;top:632.25px" class="cls_002"><span class="cls_002">the method to always return </span><span
            class="cls_008">abc</span><span class="cls_002"> when called with the </span><span
            class="cls_008">'xyz'</span></div>
    <div style="position:absolute;left:133.06px;top:653.26px" class="cls_002"><span class="cls_002">arguments. So, to complete the test, the following assert can</span>
    </div>
    <div style="position:absolute;left:133.06px;top:674.27px" class="cls_002"><span class="cls_002">be done, and in the end, the mock object needs to be</span>
    </div>
    <div style="position:absolute;left:133.06px;top:695.28px" class="cls_002"><span class="cls_002">verified:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:68080px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background081.jpg" width=595 height=841></div>
    <div style="position:absolute;left:140.77px;top:114.01px" class="cls_010"><span class="cls_010">mock.expects('methodX').once().withArgs('xyz')</span>
    </div>
    <div style="position:absolute;left:140.77px;top:126.62px" class="cls_010"><span
            class="cls_010">.returns('abc');</span></div>
    <div style="position:absolute;left:140.77px;top:139.23px" class="cls_010"><span class="cls_010">test.equals(api.methodX('xyz'), 'abc');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:151.83px" class="cls_010"><span
            class="cls_010">mock.verify();</span></div>
    <div style="position:absolute;left:113.45px;top:195.95px" class="cls_002"><span class="cls_002">8. Try modifying the arguments passed to </span><span
            class="cls_008">methodX</span><span class="cls_002"> such that they</span></div>
    <div style="position:absolute;left:133.06px;top:216.96px" class="cls_002"><span class="cls_002">don't match the expectation, and you will see this breaking</span>
    </div>
    <div style="position:absolute;left:133.06px;top:237.97px" class="cls_002"><span class="cls_002">your test.</span>
    </div>
    <div style="position:absolute;left:113.45px;top:286.99px" class="cls_002"><span class="cls_002">9. Let's put these steps into practice and create the following</span>
    </div>
    <div style="position:absolute;left:133.06px;top:308.00px" class="cls_008"><span
            class="cls_008">test-http-module.js</span><span class="cls_002"> file in the </span><span class="cls_008">test</span><span
            class="cls_002"> directory:</span></div>
    <div style="position:absolute;left:140.77px;top:364.73px" class="cls_010"><span class="cls_010">var sinon = require('sinon');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:377.34px" class="cls_010"><span class="cls_010">exports.handleGetRequestTest =</span>
    </div>
    <div style="position:absolute;left:301.84px;top:377.34px" class="cls_010"><span class="cls_010">(test) => {</span>
    </div>
    <div style="position:absolute;left:150.83px;top:389.94px" class="cls_010"><span class="cls_010">var response = {'writeHead' : () => {}, 'end': () => {}};</span>
    </div>
    <div style="position:absolute;left:150.83px;top:402.55px" class="cls_010"><span class="cls_010">var responseMock = sinon.mock(response);</span>
    </div>
    <div style="position:absolute;left:160.90px;top:415.15px" class="cls_010"><span class="cls_010">responseMock.expects('end').once().withArgs('Get action was</span>
    </div>
    <div style="position:absolute;left:140.77px;top:427.76px" class="cls_010"><span class="cls_010">requested');</span>
    </div>
    <div style="position:absolute;left:160.90px;top:440.36px" class="cls_010"><span class="cls_010">responseMock.expects('writeHead').once().withArgs(200, {</span>
    </div>
    <div style="position:absolute;left:170.97px;top:452.97px" class="cls_010"><span class="cls_010">'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:150.83px;top:478.18px" class="cls_010"><span
            class="cls_010">var request = {};</span></div>
    <div style="position:absolute;left:150.83px;top:490.79px" class="cls_010"><span class="cls_010">var requestMock = sinon.mock(request);</span>
    </div>
    <div style="position:absolute;left:150.83px;top:503.39px" class="cls_010"><span class="cls_010">requestMock.method = 'GET';</span>
    </div>
    <div style="position:absolute;left:150.83px;top:528.61px" class="cls_010"><span class="cls_010">var http_module = require('../modules/http-module');</span>
    </div>
    <div style="position:absolute;left:150.83px;top:541.21px" class="cls_010"><span class="cls_010">http_module.handleRequest(requestMock, response);</span>
    </div>
    <div style="position:absolute;left:150.83px;top:553.82px" class="cls_010"><span class="cls_010">responseMock.verify();</span>
    </div>
    <div style="position:absolute;left:150.83px;top:566.42px" class="cls_010"><span class="cls_010">test.done();</span>
    </div>
    <div style="position:absolute;left:140.77px;top:579.03px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:107.15px;top:623.15px" class="cls_002"><span class="cls_002">10. Start the test with Nodeunit's </span><span
            class="cls_008">test-http-module.js</span><span class="cls_002"> to verify that it</span></div>
    <div style="position:absolute;left:133.06px;top:644.16px" class="cls_002"><span class="cls_002">passes successfully. Your next step will be to extend the test</span>
    </div>
    <div style="position:absolute;left:133.06px;top:665.17px" class="cls_002"><span class="cls_002">so that it covers the handling of all the HTTP methods in our</span>
    </div>
    <div style="position:absolute;left:133.06px;top:686.18px" class="cls_002"><span class="cls_002">HTTP module:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:68931px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background082.jpg" width=595 height=841></div>
    <div style="position:absolute;left:140.77px;top:112.61px" class="cls_010"><span class="cls_010">nodeunit test/test-http-module.js</span>
    </div>
    <div style="position:absolute;left:140.77px;top:137.82px" class="cls_010"><span
            class="cls_010">test-http-module.js</span></div>
    <div style="position:absolute;left:140.77px;top:150.43px" class="cls_010"><span class="cls_010">Request processing completed</span>
    </div>
    <div style="position:absolute;left:145.80px;top:163.04px" class="cls_010"><span
            class="cls_010">handleGetRequestTest</span></div>
    <div style="position:absolute;left:140.77px;top:188.25px" class="cls_010"><span class="cls_010">OK: 0 assertions (32ms)</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:69782px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background083.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Deploying an application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Node.js has an event-driven, non-blocking I/O model, which makes</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">it perfect for real-time applications that scale well in distributed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">environments, such as public or private cloud platforms. Each cloud</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">platform offers tools that allow seamless deployment, distribution,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">and scaling of its hosted applications. In this section, we will look at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">two publicly available Node.js application cloud providers—</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">Nodejitsu and Microsoft Azure.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">But first, let's spend some time on the clustering support, as it is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">fundamental for understanding why Node.js fits so well into the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">cloud environment. Node.js comes with clustering support built in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">to its core. Using the cluster module in your applications allows</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">them to start as many workers as necessary to handle the load they</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">will face. Generally, it is recommended to match the number of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">workers to the number of threads or logical cores your environment</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span class="cls_002">has.</span></div>
    <div style="position:absolute;left:132.36px;top:492.19px" class="cls_009"><span class="cls_009">The heart of your application is the master process. It is responsible for</span>
    </div>
    <div style="position:absolute;left:132.36px;top:504.09px" class="cls_009"><span class="cls_009">keeping a registry of active workers and the load of the application, and how</span>
    </div>
    <div style="position:absolute;left:132.36px;top:516.00px" class="cls_009"><span class="cls_009">to create it. It also creates more workers when needed and reduces them</span>
    </div>
    <div style="position:absolute;left:132.36px;top:527.90px" class="cls_009"><span class="cls_009">when the load decreases.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:550.32px" class="cls_002"><span class="cls_002">The cloud platform should also ensure that there is zero downtime</span>
    </div>
    <div style="position:absolute;left:87.54px;top:567.12px" class="cls_002"><span class="cls_002">when deploying new versions of the applications. In such cases, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:583.93px" class="cls_002"><span class="cls_002">master process needs to be notified that a newer version should be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:600.74px" class="cls_002"><span class="cls_002">distributed. It should fork the new workers' new application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:617.55px" class="cls_002"><span class="cls_002">version, and notify the workers currently running with the old</span>
    </div>
    <div style="position:absolute;left:87.54px;top:634.35px" class="cls_002"><span class="cls_002">version to close their listeners; thus, it stops accepting connections</span>
    </div>
    <div style="position:absolute;left:87.54px;top:651.16px" class="cls_002"><span class="cls_002">and exits gracefully once they finish. Thus, all the new incoming</span>
    </div>
    <div style="position:absolute;left:87.54px;top:667.97px" class="cls_002"><span class="cls_002">requests will be handled by the newly-started workers, and after the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:684.78px" class="cls_002"><span class="cls_002">obsolete workers terminate, all the running workers will be running</span>
    </div>
    <div style="position:absolute;left:87.54px;top:701.59px" class="cls_002"><span
            class="cls_002">the latest version.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:70633px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background084.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Nodejitsu</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Let's take a closer look at some of the Node.js Platform as a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">Service (PaaS) offerings. The first PaaS we will look at is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">Nodejitsu, available at </span><span
            class="cls_007">https://www.nodejitsu.com</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">This allows seamless deployment of Node.js applications on the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">cloud, with many useful features for development, management,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">deployment, and monitoring of Node.js applications. To interact</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">with jitsu, you need to install its command-line interface, which is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">available as a Node.js module:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:384.34px" class="cls_010"><span
            class="cls_010">npm install -g jitsu</span></div>
    <div style="position:absolute;left:87.54px;top:415.85px" class="cls_002"><span class="cls_002">After installing jitsu and starting it with </span><span
            class="cls_008">jitsu</span><span class="cls_002">, you will be given a</span></div>
    <div style="position:absolute;left:87.54px;top:432.66px" class="cls_002"><span class="cls_002">warm welcome, with a friendly console screen that will introduce</span>
    </div>
    <div style="position:absolute;left:87.54px;top:449.47px" class="cls_002"><span class="cls_002">you to the basic jitsu commands, as follows:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:71484px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background085.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:492.89px" class="cls_002"><span class="cls_002">In order to interact with jitsu, you will need to sign up for it. Jitsu</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.70px" class="cls_002"><span class="cls_002">offers different pricing plans, as well as free trial services.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:544.01px" class="cls_002"><span class="cls_002">You can do that either from their website or with the </span><span
            class="cls_008">jitsu signup</span></div>
    <div style="position:absolute;left:87.54px;top:560.82px" class="cls_002"><span class="cls_002">command. Then you can start making use of the tools the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:577.63px" class="cls_002"><span class="cls_002">command-line interface offers.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:72335px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background086.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Microsoft Azure</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Microsoft's cloud platform as a service, Azure, also offers hosting of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">Node.js applications. They have chosen a slightly different</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">approach, and instead of providing a command-line interface to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">interact with their repositories, they make use of their Git</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">integration; that is, you interact with Azure as you would interact</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">with any other Git repository. If you are not familiar with Git, I</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">strongly recommend that you learn more about this distributed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">source code version control system.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:357.03px" class="cls_009"><span class="cls_009">If you've chosen Azure as your platform, you will find the following link very</span>
    </div>
    <div style="position:absolute;left:132.36px;top:368.93px" class="cls_009"><span class="cls_009">useful: </span><span
            class="cls_011">http://azure.microsoft.com/en-us/develop/nodejs/</span><span class="cls_009">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:73186px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background087.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Heroku</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Heroku is a public cloud offering that allows you to manage, deploy,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">and scale Node.js applications. Preparing your Node application for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">the Heroku environment does not take too much effort, as long as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">you install its command-line interface, available either at </span><A
            HREF="https://devce/">https://devce</A> </span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_007"><span class="cls_007">nter.heroku.com/articles/heroku-cli</span><span
            class="cls_002"> or through your package manager with</span></div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">the following:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:333.21px" class="cls_010"><span class="cls_010">npm install -g heroku-cli</span>
    </div>
    <div style="position:absolute;left:87.54px;top:364.73px" class="cls_002"><span class="cls_002">All you have to do is provide a </span><span
            class="cls_008">'start script'</span><span class="cls_002"> element in the </span><span class="cls_008">package.json</span>
    </div>
    <div style="position:absolute;left:87.54px;top:381.54px" class="cls_002"><span class="cls_002">file, push it to your relevant origin Git repository using </span><span
            class="cls_008">git push master</span></div>
    <div style="position:absolute;left:87.54px;top:398.35px" class="cls_008"><span class="cls_008">heroku</span><span
            class="cls_002">, then log in and create your application, using the </span><span class="cls_008">heroku login</span>
    </div>
    <div style="position:absolute;left:87.54px;top:415.15px" class="cls_002"><span class="cls_002">and </span><span
            class="cls_008">heroku create</span><span class="cls_002"> commands.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:74037px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background088.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Self-test questions</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">To get additional confidence about your newly-gained knowledge,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">go through the next set of statements and state whether they are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">true or false:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:278.59px" class="cls_002"><span class="cls_002">1. Node modules can export more than one function to outer</span>
    </div>
    <div style="position:absolute;left:133.06px;top:299.60px" class="cls_002"><span class="cls_002">components</span>
    </div>
    <div style="position:absolute;left:114.15px;top:320.61px" class="cls_002"><span class="cls_002">2. Node modules are extensible</span>
    </div>
    <div style="position:absolute;left:114.15px;top:341.62px" class="cls_002"><span class="cls_002">3. Modules always need to explicitly declare their</span>
    </div>
    <div style="position:absolute;left:133.06px;top:362.63px" class="cls_002"><span class="cls_002">dependencies to other modules</span>
    </div>
    <div style="position:absolute;left:114.15px;top:383.64px" class="cls_002"><span class="cls_002">4. When using mocking in a test environment, the mocked</span>
    </div>
    <div style="position:absolute;left:133.06px;top:404.65px" class="cls_002"><span class="cls_002">method is called on the mocked object</span>
    </div>
    <div style="position:absolute;left:114.15px;top:425.66px" class="cls_002"><span class="cls_002">5. Debugging Node.js code is not as straightforward as other</span>
    </div>
    <div style="position:absolute;left:133.06px;top:446.67px" class="cls_002"><span class="cls_002">pieces of non-JavaScript code</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:74888px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background089.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, you gained your first Node.js experience, starting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">from a simple </span><span
            class="cls_008">Hello world</span><span class="cls_002"> application and moving on to a more</span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">complex sample HTTP server-like application that handles</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">incoming HTTP requests. Being more confident with Node.js, you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">refactored the application to use user modules, and then created</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">unit tests for your module using a mocking framework to eliminate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">dependencies on complex objects in your test environment.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Now that you've understood how to handle and test incoming HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">requests, in the next chapter, our next step will be to define what a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">typical web API looks like and how it can be tested.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:75739px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background090.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Building a Typical Web API</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Our first draft API will be a read-only version and will not support</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">creating or updating items in the catalog as real-world applications</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">do. Instead, we will concentrate on the API definition itself, and will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">worry about data storage later on. Of course, using file storage for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">data exposed to millions of users is anything but an option, so a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">database layer will be provided to our application further in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">book, after we have looked into modern NoSQL database solutions.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">We will also cover the topic of content negotiation, a mechanism</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">that allows consumers to specify the expected format of requested</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">data. Finally, we will take a look at several ways to expose different</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">versions of a service, in case it evolves in a backward-incompatible</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">way.</span></div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">To sum up, in this chapter, you will learn the following:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:481.68px" class="cls_002"><span class="cls_002">How to specify a web API</span>
    </div>
    <div style="position:absolute;left:133.06px;top:511.80px" class="cls_002"><span class="cls_002">How to implement routes</span>
    </div>
    <div style="position:absolute;left:133.06px;top:541.91px" class="cls_002"><span class="cls_002">How to query your API</span>
    </div>
    <div style="position:absolute;left:133.06px;top:572.03px" class="cls_002"><span
            class="cls_002">Content negotiation</span></div>
    <div style="position:absolute;left:133.06px;top:602.14px" class="cls_002"><span
            class="cls_002">API versioning</span></div>
    <div style="position:absolute;left:87.54px;top:649.06px" class="cls_002"><span class="cls_002">After this chapter, you should be able to completely specify a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:665.87px" class="cls_002"><span class="cls_002">RESTful API and will be almost ready to start implementing real-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:682.68px" class="cls_002"><span class="cls_002">life Node.js RESTful services.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:76590px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background091.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Specifying the API</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">The very first thing a project usually starts with is a definition of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">operations the API will expose. According to the REST principles,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">an operation is exposed by an HTTP method and a URI. The action</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">performed by each operation should not contradict the natural</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">meaning of its HTTP method. The following table specifies the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">operations of our API in detail:</span>
    </div>
    <div style="position:absolute;left:95.24px;top:330.41px" class="cls_012"><span class="cls_012">Me</span></div>
    <div style="position:absolute;left:95.24px;top:346.52px" class="cls_012"><span class="cls_012">tho   URI</span>
    </div>
    <div style="position:absolute;left:239.51px;top:346.52px" class="cls_012"><span class="cls_012">Description</span>
    </div>
    <div style="position:absolute;left:95.24px;top:362.63px" class="cls_012"><span class="cls_012">d</span></div>
    <div style="position:absolute;left:239.51px;top:393.44px" class="cls_012"><span class="cls_012">Retrieves all available categories in the</span>
    </div>
    <div style="position:absolute;left:95.24px;top:404.65px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:134.46px;top:404.65px" class="cls_013"><span class="cls_013">/category</span>
    </div>
    <div style="position:absolute;left:239.51px;top:409.55px" class="cls_012"><span class="cls_012">catalog.</span>
    </div>
    <div style="position:absolute;left:239.51px;top:440.36px" class="cls_012"><span class="cls_012">Retrieves all the items available under a</span>
    </div>
    <div style="position:absolute;left:134.46px;top:446.67px" class="cls_013"><span
            class="cls_013">/category/{categor</span></div>
    <div style="position:absolute;left:95.24px;top:451.57px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:134.46px;top:456.47px" class="cls_013"><span class="cls_013">y-id}/</span></div>
    <div style="position:absolute;left:239.51px;top:456.47px" class="cls_012"><span
            class="cls_012">specific category.</span></div>
    <div style="position:absolute;left:137.83px;top:487.29px" class="cls_013"><span
            class="cls_013">/category/{catego</span><span class="cls_012">    Retrieves an item by its ID under a</span>
    </div>
    <div style="position:absolute;left:95.24px;top:494.99px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:134.46px;top:503.39px" class="cls_013"><span
            class="cls_013">ry-id}/{item-id}</span></div>
    <div style="position:absolute;left:239.51px;top:503.39px" class="cls_012"><span
            class="cls_012">specific category.</span></div>
    <div style="position:absolute;left:239.51px;top:551.02px" class="cls_012"><span class="cls_012">Creates a new category; if it exists, it will</span>
    </div>
    <div style="position:absolute;left:95.24px;top:562.22px" class="cls_013"><span class="cls_013">POST</span></div>
    <div style="position:absolute;left:134.46px;top:562.22px" class="cls_013"><span class="cls_013">/category</span>
    </div>
    <div style="position:absolute;left:239.51px;top:567.82px" class="cls_012"><span class="cls_012">update it.</span>
    </div>
    <div style="position:absolute;left:134.46px;top:614.75px" class="cls_013"><span
            class="cls_013">/category/{categor</span><span class="cls_012">    Creates a new item in a specified category.</span>
    </div>
    <div style="position:absolute;left:95.24px;top:622.45px" class="cls_013"><span class="cls_013">POST</span></div>
    <div style="position:absolute;left:134.46px;top:627.35px" class="cls_013"><span class="cls_013">y-id}/</span></div>
    <div style="position:absolute;left:239.51px;top:630.85px" class="cls_012"><span class="cls_012">If the item exists, it will update it.</span>
    </div>
    <div style="position:absolute;left:137.83px;top:667.27px" class="cls_013"><span
            class="cls_013">/category/{catego</span></div>
    <div style="position:absolute;left:95.24px;top:669.37px" class="cls_013"><span class="cls_013">PUT</span></div>
    <div style="position:absolute;left:239.51px;top:669.37px" class="cls_012"><span
            class="cls_012">Updates a category.</span></div>
    <div style="position:absolute;left:134.46px;top:677.77px" class="cls_013"><span class="cls_013">ry-id}</span></div>
    <div style="position:absolute;left:134.46px;top:708.59px" class="cls_013"><span
            class="cls_013">/category/{categor</span></div>
    <div style="position:absolute;left:95.24px;top:715.59px" class="cls_013"><span class="cls_013">PUT</span></div>
    <div style="position:absolute;left:239.51px;top:710.69px" class="cls_012"><span class="cls_012">Updates an item in a specified category.</span>
    </div>
    <div style="position:absolute;left:134.46px;top:718.39px" class="cls_013"><span
            class="cls_013">y-id}/{item-id}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:77441px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background092.jpg" width=595 height=841></div>
    <div style="position:absolute;left:95.24px;top:121.72px" class="cls_013"><span class="cls_013">DELET</span></div>
    <div style="position:absolute;left:134.46px;top:121.72px" class="cls_013"><span
            class="cls_013">/category/{categor</span></div>
    <div style="position:absolute;left:95.24px;top:131.52px" class="cls_013"><span class="cls_013">E</span></div>
    <div style="position:absolute;left:134.46px;top:131.52px" class="cls_013"><span class="cls_013">y-id}</span></div>
    <div style="position:absolute;left:239.51px;top:123.12px" class="cls_012"><span class="cls_012">Deletes an existing category.</span>
    </div>
    <div style="position:absolute;left:95.24px;top:156.03px" class="cls_013"><span class="cls_013">DELET</span></div>
    <div style="position:absolute;left:134.46px;top:156.03px" class="cls_013"><span
            class="cls_013">/category/{categor</span></div>
    <div style="position:absolute;left:239.51px;top:157.43px" class="cls_012"><span class="cls_012">Deletes an item in a specified category.</span>
    </div>
    <div style="position:absolute;left:95.24px;top:165.84px" class="cls_013"><span class="cls_013">E</span></div>
    <div style="position:absolute;left:134.46px;top:165.84px" class="cls_013"><span
            class="cls_013">y-id}/{item-id}</span></div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">The second step is to choose an appropriate format for our catalog</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">application's data. JSON objects are natively supported by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">JavaScript. They are easy to extend during the evolution of an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">application and are consumable by almost any platform available.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">Thus, the JSON format seems to be our logical choice for us. Here is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">the JSON representation of an item, and category objects that will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">be used throughout this book:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:384.34px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:121.68px;top:396.94px" class="cls_010"><span class="cls_010">"itemId": "item-identifier-1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:409.55px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:422.16px" class="cls_010"><span class="cls_010">"category": "Watches",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:434.76px" class="cls_010"><span
            class="cls_010">"categoryId": 1,</span></div>
    <div style="position:absolute;left:121.68px;top:447.37px" class="cls_010"><span class="cls_010">"price": 150,</span>
    </div>
    <div style="position:absolute;left:121.68px;top:459.97px" class="cls_010"><span
            class="cls_010">"currency": "EUR"</span></div>
    <div style="position:absolute;left:101.55px;top:472.58px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:497.79px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:121.68px;top:510.40px" class="cls_010"><span class="cls_010">"categoryName" : "Watches",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:523.00px" class="cls_010"><span
            class="cls_010">"categoryId" : "1",</span></div>
    <div style="position:absolute;left:121.68px;top:535.61px" class="cls_010"><span
            class="cls_010">"itemsCount" : 100,</span></div>
    <div style="position:absolute;left:121.68px;top:548.21px" class="cls_010"><span class="cls_010">"items" : [{</span>
    </div>
    <div style="position:absolute;left:161.95px;top:560.82px" class="cls_010"><span class="cls_010">"itemId" : "item-identifier-1",</span>
    </div>
    <div style="position:absolute;left:161.95px;top:573.43px" class="cls_010"><span class="cls_010">"itemName":"Sports Watch",</span>
    </div>
    <div style="position:absolute;left:161.95px;top:586.03px" class="cls_010"><span class="cls_010">"price": 150,</span>
    </div>
    <div style="position:absolute;left:161.95px;top:598.64px" class="cls_010"><span
            class="cls_010">"currency" : "EUR"</span></div>
    <div style="position:absolute;left:126.71px;top:611.24px" class="cls_010"><span class="cls_010">}]</span></div>
    <div style="position:absolute;left:101.55px;top:623.85px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:655.36px" class="cls_002"><span class="cls_002">So far, our API has defined a set of operations and the data format</span>
    </div>
    <div style="position:absolute;left:87.54px;top:672.17px" class="cls_002"><span class="cls_002">to be used. The next step is to implement a  module that will export</span>
    </div>
    <div style="position:absolute;left:87.54px;top:688.98px" class="cls_002"><span class="cls_002">functions serving each of the operations in the route.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:78292px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background093.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">To begin with, let's create a new Node.js Express project. Select a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">directory where your projects will be stored and from your shell</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">Terminal, execute </span><span class="cls_008">express chapter3</span><span class="cls_002">. If you are using Windows, you will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span
            class="cls_002">need to install the </span><span class="cls_008">express-generator</span><span
            class="cls_002"> module before generating the</span></div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span
            class="cls_002">project. The </span><span class="cls_008">express-generator</span><span class="cls_002"> will create your an initial express project</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">layout in the selected directory. This layout provides the default</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">project structure for you, ensuring that your Express project follows</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">the standard project structure. It makes your project easier to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">navigate.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">The next step is to import the project into the Atom IDE. Right-click</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.80px" class="cls_002"><span class="cls_002">anywhere in the Projects tab and select Add project folder then</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">select the directory Express generated for you.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.92px" class="cls_002"><span class="cls_002">As you can see, Express has done some background work for us and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span class="cls_002">has created a starting point for our application: </span><span
            class="cls_008">app.js</span><span class="cls_002">. It has also</span></div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span
            class="cls_002">created the </span><span class="cls_008">package.json</span><span class="cls_002"> file for us. Let's take a look at each of these</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span
            class="cls_002">files, starting with </span><span class="cls_008">package.json</span><span
            class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:435.46px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:448.07px" class="cls_010"><span
            class="cls_010">"name": "chapter3",</span></div>
    <div style="position:absolute;left:111.61px;top:460.67px" class="cls_010"><span
            class="cls_010">"version": "1.0.0",</span></div>
    <div style="position:absolute;left:111.61px;top:473.28px" class="cls_010"><span
            class="cls_010">"description": "",</span></div>
    <div style="position:absolute;left:111.61px;top:485.89px" class="cls_010"><span
            class="cls_010">"main": "app.js",</span></div>
    <div style="position:absolute;left:111.61px;top:498.49px" class="cls_010"><span class="cls_010">"scripts": {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:511.10px" class="cls_010"><span
            class="cls_010">"test": "test"</span></div>
    <div style="position:absolute;left:111.61px;top:523.70px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:111.61px;top:536.31px" class="cls_010"><span class="cls_010">"author": "",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:548.92px" class="cls_010"><span
            class="cls_010">"license": "ISC",</span></div>
    <div style="position:absolute;left:111.61px;top:561.52px" class="cls_010"><span
            class="cls_010">"dependencies": {</span></div>
    <div style="position:absolute;left:106.58px;top:574.13px" class="cls_010"><span
            class="cls_010">"dependencies": {</span></div>
    <div style="position:absolute;left:121.68px;top:586.73px" class="cls_010"><span class="cls_010">"body-parser": "~1.13.2",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:599.34px" class="cls_010"><span class="cls_010">"cookie-parser": "~1.3.5",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:611.94px" class="cls_010"><span
            class="cls_010">"debug": "~2.2.0",</span></div>
    <div style="position:absolute;left:121.68px;top:624.55px" class="cls_010"><span class="cls_010">"express": "~4.16.1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:637.16px" class="cls_010"><span
            class="cls_010">"jade": "~1.11.0",</span></div>
    <div style="position:absolute;left:121.68px;top:649.76px" class="cls_010"><span
            class="cls_010">"morgan": "~1.6.1",</span></div>
    <div style="position:absolute;left:121.68px;top:662.37px" class="cls_010"><span class="cls_010">"serve-favicon": "~2.3.0"</span>
    </div>
    <div style="position:absolute;left:111.61px;top:687.58px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:700.19px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:79143px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background094.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">As we created a blank Node.js Express project, we initially have</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">dependencies only to the Express framework, some middleware</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">modules such as </span><span class="cls_008">morgan</span><span
            class="cls_002">, </span><span class="cls_008">body-parser</span><span class="cls_002">, and </span><span
            class="cls_008">cookie-parser</span><span class="cls_002">, and the Jade</span></div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">template language. Jade is a straightforward template language</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">used to produce HTML code inside templates. If you are interested</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">in it, you can find out more about it at </span><span
            class="cls_007">http://www.jade-lang.com</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">The current version of the Express framework at the time of writing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">is 4.16.1; to update it, execute </span><span
            class="cls_008">npm install express@4.16.1 --save</span><span class="cls_002"> from the</span></div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_008"><span class="cls_008">chapter3</span><span
            class="cls_002"> directory. This command will update the dependency of the</span></div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">application to the desired version. The </span><span
            class="cls_008">--save</span><span class="cls_002"> option will update and</span></div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">save the new version of the dependency in the project's </span><span
            class="cls_008">package.json</span></div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">file.</span></div>
    <div style="position:absolute;left:132.36px;top:340.92px" class="cls_009"><span class="cls_009">When you introduce new module dependencies, it is up to you to keep the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:352.82px" class="cls_017"><span
            class="cls_017">package.json</span><span class="cls_009"> file up to date in order to maintain an accurate state of the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:364.73px" class="cls_009"><span class="cls_009">modules your application depends on.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">We will come to what middleware modules are a bit later in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.95px" class="cls_002"><span class="cls_002">chapter.</span></div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">For now, we will ignore the content of the </span><span
            class="cls_008">public</span><span class="cls_002"> and </span><span class="cls_008">view</span><span
            class="cls_002"> directories</span></div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">as it is not relevant to our RESTful service. They contain the auto-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span class="cls_002">generated stylesheets and template files that might be helpful, if we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:488.69px" class="cls_002"><span class="cls_002">decide to develop a web-based consumer of the services at a later</span>
    </div>
    <div style="position:absolute;left:87.54px;top:505.49px" class="cls_002"><span class="cls_002">stage.</span></div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">We've already mentioned that the Express project created a starting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">point for our web application in </span><span
            class="cls_008">app.js</span><span class="cls_002">. Let's take a deeper look at it:</span></div>
    <div style="position:absolute;left:101.55px;top:600.74px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:613.34px" class="cls_010"><span class="cls_010">var path = require('path');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:625.95px" class="cls_010"><span class="cls_010">var favicon = require('serve-favicon');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:638.56px" class="cls_010"><span class="cls_010">var logger = require('morgan');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:651.16px" class="cls_010"><span class="cls_010">var cookieParser = require('cookie-parser');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:663.77px" class="cls_010"><span class="cls_010">var bodyParser = require('body-parser');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:688.98px" class="cls_010"><span class="cls_010">var routes = require('./routes/index');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:701.59px" class="cls_010"><span class="cls_010">var users = require('./routes/users');</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:79994px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background095.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span
            class="cls_010">// view engine setup</span></div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">app.set('views', path.join(__dirname, 'views'));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">app.set('view engine', 'jade');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span class="cls_010">// uncomment after placing your favicon in /public</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">app.use(logger('dev'));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">app.use(bodyParser.json());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:230.97px" class="cls_010"><span class="cls_010">app.use(bodyParser.urlencoded({ extended: false }));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:243.57px" class="cls_010"><span class="cls_010">app.use(cookieParser());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:256.18px" class="cls_010"><span class="cls_010">app.use(express.static(path.join(__dirname, 'public')));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:281.39px" class="cls_010"><span class="cls_010">app.use('/', routes);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span class="cls_010">app.use('/users', users);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span class="cls_010">// catch 404 and forward to error handler</span>
    </div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">app.use(function(req, res, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:344.42px" class="cls_010"><span class="cls_010">var err = new Error('Not Found');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:357.03px" class="cls_010"><span
            class="cls_010">err.status = 404;</span></div>
    <div style="position:absolute;left:111.61px;top:369.63px" class="cls_010"><span class="cls_010">next(err);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:382.24px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:407.45px" class="cls_010"><span
            class="cls_010">// error handlers</span></div>
    <div style="position:absolute;left:101.55px;top:432.66px" class="cls_010"><span class="cls_010">// development error handler</span>
    </div>
    <div style="position:absolute;left:101.55px;top:445.27px" class="cls_010"><span class="cls_010">// will print stacktrace</span>
    </div>
    <div style="position:absolute;left:101.55px;top:457.87px" class="cls_010"><span class="cls_010">if (app.get('env') === 'development') {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:470.48px" class="cls_010"><span class="cls_010">app.use(function(err, req, res, next) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:483.08px" class="cls_010"><span class="cls_010">res.status(err.status || 500);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:495.69px" class="cls_010"><span class="cls_010">res.render('error', {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:508.30px" class="cls_010"><span class="cls_010">message: err.message,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:520.90px" class="cls_010"><span class="cls_010">error: err</span>
    </div>
    <div style="position:absolute;left:121.68px;top:533.51px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:546.11px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:558.72px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:583.93px" class="cls_010"><span class="cls_010">// production error handler</span>
    </div>
    <div style="position:absolute;left:101.55px;top:596.54px" class="cls_010"><span class="cls_010">// no stacktraces leaked to user</span>
    </div>
    <div style="position:absolute;left:101.55px;top:609.14px" class="cls_010"><span class="cls_010">app.use(function(err, req, res, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:621.75px" class="cls_010"><span class="cls_010">res.status(err.status || 500);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:634.35px" class="cls_010"><span class="cls_010">res.render('error', {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:646.96px" class="cls_010"><span class="cls_010">message: err.message,</span>
    </div>
    <div style="position:absolute;left:121.68px;top:659.57px" class="cls_010"><span class="cls_010">error: {}</span>
    </div>
    <div style="position:absolute;left:111.61px;top:672.17px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:684.78px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:722.60px" class="cls_010"><span class="cls_010">module.exports = app;</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:80845px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background096.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:123.82px" class="cls_002"><span class="cls_002">Obviously, the Express generator has done a lot for us as it has</span>
    </div>
    <div style="position:absolute;left:87.54px;top:140.63px" class="cls_002"><span class="cls_002">instantiated the Express framework and has assigned a complete</span>
    </div>
    <div style="position:absolute;left:87.54px;top:157.43px" class="cls_002"><span class="cls_002">development environment around it. It has done the following:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:197.35px" class="cls_002"><span class="cls_002">Configured the middleware to be used in our</span>
    </div>
    <div style="position:absolute;left:133.06px;top:218.36px" class="cls_002"><span class="cls_002">application, </span><span
            class="cls_008">body-parser</span><span class="cls_002">, the default router, as well as error</span></div>
    <div style="position:absolute;left:133.06px;top:239.37px" class="cls_002"><span class="cls_002">handler middleware for our development environment</span>
    </div>
    <div style="position:absolute;left:133.06px;top:269.49px" class="cls_002"><span class="cls_002">Injected a logger instance of the morgan middleware module</span>
    </div>
    <div style="position:absolute;left:133.06px;top:299.60px" class="cls_002"><span class="cls_002">Configured the Jade template, as it has been selected as the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:320.61px" class="cls_002"><span class="cls_002">default template for our application</span>
    </div>
    <div style="position:absolute;left:133.06px;top:350.72px" class="cls_002"><span class="cls_002">Configured the default URI that our Express application will</span>
    </div>
    <div style="position:absolute;left:133.06px;top:371.73px" class="cls_002"><span
            class="cls_002">be listening to, </span><span class="cls_008">/</span><span
            class="cls_002"> and </span><span class="cls_008">/users</span><span class="cls_002">, and created dummy handle</span>
    </div>
    <div style="position:absolute;left:133.06px;top:392.74px" class="cls_002"><span
            class="cls_002">functions for them</span></div>
    <div style="position:absolute;left:87.54px;top:439.66px" class="cls_002"><span class="cls_002">You will have to install all the modules used in </span><span
            class="cls_008">app.js</span><span class="cls_002"> in order to start</span></div>
    <div style="position:absolute;left:87.54px;top:456.47px" class="cls_002"><span class="cls_002">the generated application successfully. Also, make sure you update</span>
    </div>
    <div style="position:absolute;left:87.54px;top:473.28px" class="cls_002"><span class="cls_002">the dependencies of your </span><span
            class="cls_008">package.json</span><span class="cls_002"> file using the </span><span
            class="cls_008">--save</span><span class="cls_002"> option after</span></div>
    <div style="position:absolute;left:87.54px;top:490.09px" class="cls_002"><span
            class="cls_002">installing them.</span></div>
    <div style="position:absolute;left:87.54px;top:524.40px" class="cls_002"><span class="cls_002">The Express generator also created a starting script for the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:541.21px" class="cls_002"><span class="cls_002">application. It is under the  </span><span
            class="cls_008">bin/www</span><span class="cls_002"> directory of your project and</span></div>
    <div style="position:absolute;left:87.54px;top:558.02px" class="cls_002"><span class="cls_002">looks like the following snippet:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:602.14px" class="cls_010"><span
            class="cls_010">#!/usr/bin/env node</span></div>
    <div style="position:absolute;left:101.55px;top:627.35px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:639.96px" class="cls_010"><span class="cls_010">* Module dependencies.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:652.56px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:677.77px" class="cls_010"><span class="cls_010">var app = require('../app');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:690.38px" class="cls_010"><span class="cls_010">var debug = require('debug')('chapter3:server');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:702.99px" class="cls_010"><span class="cls_010">var http = require('http');</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:81696px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background097.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:117.52px" class="cls_010"><span class="cls_010">* Get port from environment and store in Express.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:130.12px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">var port = normalizePort(process.env.PORT || '3000');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">app.set('port', port);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:205.76px" class="cls_010"><span class="cls_010">* Create HTTP server.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:218.36px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:243.57px" class="cls_010"><span class="cls_010">var server = http.createServer(app);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:268.79px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:281.39px" class="cls_010"><span class="cls_010">* Listen on provided port, on all network interfaces.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:294.00px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span
            class="cls_010">server.listen(port);</span></div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">server.on('error', onError);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">server.on('listening', onListening);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:369.63px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:382.24px" class="cls_010"><span class="cls_010">* Normalize a port into a number, string, or false.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:394.84px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:420.06px" class="cls_010"><span class="cls_010">function normalizePort(val) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:432.66px" class="cls_010"><span class="cls_010">var port = parseInt(val, 10);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:457.87px" class="cls_010"><span
            class="cls_010">if (isNaN(port)) {</span></div>
    <div style="position:absolute;left:121.68px;top:470.48px" class="cls_010"><span class="cls_010">// named pipe</span>
    </div>
    <div style="position:absolute;left:121.68px;top:483.08px" class="cls_010"><span class="cls_010">return val;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:495.69px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:520.90px" class="cls_010"><span
            class="cls_010">if (port >= 0) {</span></div>
    <div style="position:absolute;left:121.68px;top:533.51px" class="cls_010"><span
            class="cls_010">// port number</span></div>
    <div style="position:absolute;left:121.68px;top:546.11px" class="cls_010"><span class="cls_010">return port;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:558.72px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:583.93px" class="cls_010"><span class="cls_010">return false;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:596.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:621.75px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:634.35px" class="cls_010"><span class="cls_010">* Event listener for HTTP server "error" event.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:646.96px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:672.17px" class="cls_010"><span class="cls_010">function onError(error) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:684.78px" class="cls_010"><span class="cls_010">if (error.syscall !== 'listen') {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:697.38px" class="cls_010"><span class="cls_010">throw error;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:709.99px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:82547px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background098.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">var bind = typeof port === 'string'</span>
    </div>
    <div style="position:absolute;left:121.68px;top:117.52px" class="cls_010"><span
            class="cls_010">? 'Pipe ' + port</span></div>
    <div style="position:absolute;left:121.68px;top:130.12px" class="cls_010"><span
            class="cls_010">: 'Port ' + port;</span></div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">// handle specific listen errors with friendly messages</span>
    </div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span class="cls_010">switch (error.code) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:180.54px" class="cls_010"><span
            class="cls_010">case 'EACCES':</span></div>
    <div style="position:absolute;left:131.75px;top:193.15px" class="cls_010"><span class="cls_010">console.error(bind + ' requires elevated privileges');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:205.76px" class="cls_010"><span
            class="cls_010">process.exit(1);</span></div>
    <div style="position:absolute;left:131.75px;top:218.36px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:230.97px" class="cls_010"><span
            class="cls_010">case 'EADDRINUSE':</span></div>
    <div style="position:absolute;left:131.75px;top:243.57px" class="cls_010"><span class="cls_010">console.error(bind + ' is already in use');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:256.18px" class="cls_010"><span
            class="cls_010">process.exit(1);</span></div>
    <div style="position:absolute;left:131.75px;top:268.79px" class="cls_010"><span class="cls_010">break;</span></div>
    <div style="position:absolute;left:121.68px;top:281.39px" class="cls_010"><span class="cls_010">default:</span>
    </div>
    <div style="position:absolute;left:131.75px;top:294.00px" class="cls_010"><span class="cls_010">throw error;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:306.60px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">/**</span></div>
    <div style="position:absolute;left:106.58px;top:357.03px" class="cls_010"><span class="cls_010">* Event listener for HTTP server "listening" event.</span>
    </div>
    <div style="position:absolute;left:106.58px;top:369.63px" class="cls_010"><span class="cls_010">*/</span></div>
    <div style="position:absolute;left:101.55px;top:394.84px" class="cls_010"><span class="cls_010">function onListening() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:407.45px" class="cls_010"><span class="cls_010">var addr = server.address();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:420.06px" class="cls_010"><span class="cls_010">var bind = typeof addr === 'string'</span>
    </div>
    <div style="position:absolute;left:121.68px;top:432.66px" class="cls_010"><span
            class="cls_010">? 'pipe ' + addr</span></div>
    <div style="position:absolute;left:121.68px;top:445.27px" class="cls_010"><span class="cls_010">: 'port ' + addr.port;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:457.87px" class="cls_010"><span class="cls_010">debug('Listening on ' + bind);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:470.48px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_002"><span class="cls_002">To start the application, execute </span><span
            class="cls_008">node bin/www</span><span class="cls_002">; this will execute the</span></div>
    <div style="position:absolute;left:87.54px;top:518.80px" class="cls_002"><span class="cls_002">script above and will start the Node.js application. So requesting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:535.61px" class="cls_008"><span class="cls_008"> </span><A
            HREF="http://localhost:3000/">http://localhost:3000</A> <span class="cls_002"> in your browser will result in calling the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:552.42px" class="cls_002"><span class="cls_002">default </span><span
            class="cls_008">GET</span><span class="cls_002"> handler, which gives a warm welcome response:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:83398px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background099.jpg" width=595 height=841></div>
    <div style="position:absolute;left:196.93px;top:414.45px" class="cls_005"><span class="cls_005">Default welcome message from an Express application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:434.76px" class="cls_002"><span class="cls_002">The generator created a dummy </span><span
            class="cls_008">routes/users.js</span><span class="cls_002">; it exposes a route</span></div>
    <div style="position:absolute;left:87.54px;top:451.57px" class="cls_002"><span class="cls_002">linked to a dummy module available at the </span><span
            class="cls_008">/users</span><span class="cls_002"> location.</span></div>
    <div style="position:absolute;left:87.54px;top:468.38px" class="cls_002"><span class="cls_002">Requesting it will result in calling the </span><span
            class="cls_008">list</span><span class="cls_002"> function of the user's</span></div>
    <div style="position:absolute;left:87.54px;top:485.19px" class="cls_002"><span class="cls_002">route, which outputs a static response: </span><span
            class="cls_008">respond with a resource</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:519.50px" class="cls_002"><span class="cls_002">Our application will not be using a template language and style</span>
    </div>
    <div style="position:absolute;left:87.54px;top:536.31px" class="cls_002"><span class="cls_002">sheets, so let's get rid of the lines that set the views and view engine</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.12px" class="cls_002"><span class="cls_002">properties in the application configuration. In addition, we will be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:569.92px" class="cls_002"><span class="cls_002">implementing our own routes. Thus, we don't need the binding of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:586.73px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">/</span><span class="cls_002"> and </span><span class="cls_008">/users</span><span
            class="cls_002"> URIs for our app, neither do we need the </span><span class="cls_008">user</span></div>
    <div style="position:absolute;left:87.54px;top:603.54px" class="cls_002"><span class="cls_002">module; instead, we will utilize a </span><span
            class="cls_008">catalog</span><span class="cls_002"> module and from a route:</span></div>
    <div style="position:absolute;left:101.55px;top:647.66px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:660.27px" class="cls_010"><span class="cls_010">var path = require('path');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:672.87px" class="cls_010"><span class="cls_010">var favicon = require('serve-favicon');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:685.48px" class="cls_010"><span class="cls_010">var logger = require('morgan');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:698.08px" class="cls_010"><span class="cls_010">var cookieParser = require('cookie-parser');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:710.69px" class="cls_010"><span class="cls_010">var bodyParser = require('body-parser');</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:84249px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background100.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:117.38px" class="cls_010"><span class="cls_010">var routes = require('./routes/index');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:129.99px" class="cls_010"><span class="cls_010">var catalog = require('./routes/catalog')</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.59px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:101.55px;top:167.81px" class="cls_010"><span class="cls_010">//uncomment after placing your favicon in /public</span>
    </div>
    <div style="position:absolute;left:101.55px;top:180.41px" class="cls_010"><span class="cls_010">//app.use(favicon(path.join(__dirname, 'public', 'favicon.ico')));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.02px" class="cls_010"><span class="cls_010">app.use(logger('dev'));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.62px" class="cls_010"><span class="cls_010">app.use(bodyParser.json());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:218.23px" class="cls_010"><span class="cls_010">app.use(bodyParser.urlencoded({ extended: false }));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:230.84px" class="cls_010"><span class="cls_010">app.use(cookieParser());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:243.44px" class="cls_010"><span class="cls_010">app.use(express.static(path.join(__dirname, 'public')));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:268.65px" class="cls_010"><span class="cls_010">app.use('/', routes);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:281.26px" class="cls_010"><span class="cls_010">app.use('/catalog', catalog);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:319.08px" class="cls_010"><span class="cls_010">// catch 404 and forward to error handler</span>
    </div>
    <div style="position:absolute;left:101.55px;top:331.68px" class="cls_010"><span class="cls_010">app.use(function(req, res, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:344.29px" class="cls_010"><span class="cls_010">var err = new Error('Not Found');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:356.89px" class="cls_010"><span
            class="cls_010">err.status = 404;</span></div>
    <div style="position:absolute;left:111.61px;top:369.50px" class="cls_010"><span class="cls_010">next(err);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:382.11px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:407.32px" class="cls_010"><span class="cls_010">//development error handler will print stacktrace</span>
    </div>
    <div style="position:absolute;left:101.55px;top:419.92px" class="cls_010"><span class="cls_010">if (app.get('env') === 'development') {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:432.53px" class="cls_010"><span class="cls_010">app.use(function(err, req, res, next) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:445.13px" class="cls_010"><span class="cls_010">res.status(err.status || 500);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:457.74px" class="cls_010"><span class="cls_010">res.render('error', {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:470.35px" class="cls_010"><span class="cls_010">message: err.message,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:482.95px" class="cls_010"><span class="cls_010">error: err</span>
    </div>
    <div style="position:absolute;left:121.68px;top:495.56px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:508.16px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:520.77px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:545.98px" class="cls_010"><span class="cls_010">// production error handler no stacktraces leaked to user</span>
    </div>
    <div style="position:absolute;left:101.55px;top:558.59px" class="cls_010"><span class="cls_010">app.use(function(err, req, res, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:571.19px" class="cls_010"><span class="cls_010">res.status(err.status || 500);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:583.80px" class="cls_010"><span class="cls_010">res.render('error', {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:596.40px" class="cls_010"><span class="cls_010">message: err.message,</span>
    </div>
    <div style="position:absolute;left:121.68px;top:609.01px" class="cls_010"><span class="cls_010">error: {}</span>
    </div>
    <div style="position:absolute;left:111.61px;top:621.62px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:634.22px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:659.43px" class="cls_010"><span class="cls_010">module.exports = app;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:703.69px" class="cls_002"><span class="cls_002">So after this cleanup, our application looks a lot cleaner and we are</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:85100px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background101.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">ready to move forward.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:138.52px" class="cls_009"><span class="cls_009">Before doing that, though, there is one term that needs further explanation:</span>
    </div>
    <div style="position:absolute;left:132.36px;top:150.43px" class="cls_009"><span class="cls_009">middleware. It is a subset of chained functions called by the </span><span
            class="cls_017">Еxpress.js</span><span class="cls_009"> routing</span></div>
    <div style="position:absolute;left:132.36px;top:162.34px" class="cls_009"><span class="cls_009">layer before а user-defined handler is invoked. Middleware functions have</span>
    </div>
    <div style="position:absolute;left:132.36px;top:174.24px" class="cls_009"><span
            class="cls_009">full access to the </span><span class="cls_017">request</span><span
            class="cls_009"> and </span><span class="cls_017">response</span><span class="cls_009"> objects and can modify either of them. The</span>
    </div>
    <div style="position:absolute;left:132.36px;top:186.15px" class="cls_009"><span class="cls_009">middleware chain is always called in the exact order in which it has been</span>
    </div>
    <div style="position:absolute;left:132.36px;top:198.05px" class="cls_009"><span class="cls_009">defined, so it is vital for you to know exactly what a specific piece of</span>
    </div>
    <div style="position:absolute;left:132.36px;top:209.96px" class="cls_009"><span class="cls_009">middleware is doing. Once a middleware function finishes, it calls the next</span>
    </div>
    <div style="position:absolute;left:132.36px;top:221.86px" class="cls_009"><span class="cls_009">function in the chain by invoking its next argument as a function. After the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:233.77px" class="cls_009"><span class="cls_009">complete chain gets executed, the user-defined request handler is called.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">Here are the basic rules that apply to the middleware chain:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:296.10px" class="cls_002"><span class="cls_002">A middleware function has the following signature: </span><span
            class="cls_008">function</span></div>
    <div style="position:absolute;left:133.06px;top:317.11px" class="cls_008"><span class="cls_008">(request, response, next)</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:133.06px;top:347.22px" class="cls_002"><span class="cls_002">Middleware functions are executed in the exact order in</span>
    </div>
    <div style="position:absolute;left:133.06px;top:368.23px" class="cls_002"><span class="cls_002">which they have been added to the application chain. This</span>
    </div>
    <div style="position:absolute;left:133.06px;top:389.24px" class="cls_002"><span class="cls_002">means that if you want your middleware function to be</span>
    </div>
    <div style="position:absolute;left:133.06px;top:410.25px" class="cls_002"><span class="cls_002">called before a specific route, you need to add it before</span>
    </div>
    <div style="position:absolute;left:133.06px;top:431.26px" class="cls_002"><span
            class="cls_002">declaring the route.</span></div>
    <div style="position:absolute;left:133.06px;top:461.37px" class="cls_002"><span class="cls_002">Middleware functions use their third parameter, </span><span
            class="cls_008">next</span><span class="cls_002">, as a</span></div>
    <div style="position:absolute;left:133.06px;top:482.38px" class="cls_002"><span class="cls_002">function to indicate that they have completed their work and</span>
    </div>
    <div style="position:absolute;left:133.06px;top:503.39px" class="cls_002"><span
            class="cls_002">to exit. When the </span><span class="cls_008">next()</span><span class="cls_002"> parameter of the last function in the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:524.40px" class="cls_002"><span class="cls_002">chain has been called, the chained execution is completed</span>
    </div>
    <div style="position:absolute;left:133.06px;top:545.41px" class="cls_002"><span class="cls_002">and the </span><span
            class="cls_008">request</span><span class="cls_002"> and the </span><span
            class="cls_008">response</span><span class="cls_002"> objects reach the defined</span></div>
    <div style="position:absolute;left:133.06px;top:566.42px" class="cls_002"><span class="cls_002">handlers, in the state set by the middleware.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:613.34px" class="cls_002"><span class="cls_002">Now that we know what a middleware function is, let's clarify what</span>
    </div>
    <div style="position:absolute;left:87.54px;top:630.15px" class="cls_002"><span class="cls_002">the currently used middleware functions provide our application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:646.96px" class="cls_002"><span
            class="cls_002">with. The </span><span class="cls_008">body-parser</span><span class="cls_002"> middleware is the Express framework built in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:663.77px" class="cls_002"><span
            class="cls_002">parser. It parses the </span><span class="cls_008">request</span><span class="cls_002"> body and populates the </span><span
            class="cls_008">request</span><span class="cls_002"> object</span></div>
    <div style="position:absolute;left:87.54px;top:680.58px" class="cls_002"><span class="cls_002">after the middleware execution finishes, that is, it provides JSON</span>
    </div>
    <div style="position:absolute;left:87.54px;top:697.38px" class="cls_002"><span
            class="cls_002">payload handling.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:85951px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background102.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Now it is time to move on and implement our user module that will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">be mapped to our URIs. The module will be named </span><span
            class="cls_008">modules/catalog.js</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:165.14px" class="cls_010"><span class="cls_010">var fs = require('fs');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:190.35px" class="cls_010"><span class="cls_010">function readCatalogSync() {</span>
    </div>
    <div style="position:absolute;left:116.65px;top:202.95px" class="cls_010"><span class="cls_010">var file = './data/catalog.json';</span>
    </div>
    <div style="position:absolute;left:116.65px;top:215.56px" class="cls_010"><span class="cls_010">if (fs.existsSync(file)) {</span>
    </div>
    <div style="position:absolute;left:126.71px;top:228.17px" class="cls_010"><span class="cls_010">var content = fs.readFileSync(file);</span>
    </div>
    <div style="position:absolute;left:126.71px;top:240.77px" class="cls_010"><span class="cls_010">var catalog = JSON.parse(content);</span>
    </div>
    <div style="position:absolute;left:126.71px;top:253.38px" class="cls_010"><span
            class="cls_010">return catalog;</span></div>
    <div style="position:absolute;left:116.65px;top:265.98px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:116.65px;top:278.59px" class="cls_010"><span
            class="cls_010">return undefined;</span></div>
    <div style="position:absolute;left:106.58px;top:291.20px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:316.41px" class="cls_010"><span class="cls_010">exports.findItems = function(categoryId) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:329.01px" class="cls_010"><span class="cls_010">console.log('Returning all items for categoryId: ' + categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:341.62px" class="cls_010"><span class="cls_010">var catalog = readCatalogSync();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:354.22px" class="cls_010"><span
            class="cls_010">if (catalog) {</span></div>
    <div style="position:absolute;left:121.68px;top:366.83px" class="cls_010"><span
            class="cls_010">var items = [];</span></div>
    <div style="position:absolute;left:121.68px;top:379.44px" class="cls_010"><span class="cls_010">for (var index in catalog.catalog) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:392.04px" class="cls_010"><span class="cls_010">if (catalog.catalog[index].categoryId === categoryId) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:404.65px" class="cls_010"><span class="cls_010">var category = catalog.catalog[index];</span>
    </div>
    <div style="position:absolute;left:151.88px;top:417.25px" class="cls_010"><span class="cls_010">for (var itemIndex in category.items) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:429.86px" class="cls_010"><span class="cls_010">items.push(category.items[itemIndex]);</span>
    </div>
    <div style="position:absolute;left:151.88px;top:442.47px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:455.07px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:467.68px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:480.28px" class="cls_010"><span class="cls_010">return items;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:492.89px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:505.50px" class="cls_010"><span
            class="cls_010">return undefined;</span></div>
    <div style="position:absolute;left:101.55px;top:518.10px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:543.31px" class="cls_010"><span class="cls_010">exports.findItem = function(categoryId, itemId) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:555.92px" class="cls_010"><span class="cls_010">console.log('Looking for item with id' + itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:568.52px" class="cls_010"><span class="cls_010">var catalog = readCatalogSync();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:581.13px" class="cls_010"><span
            class="cls_010">if (catalog) {</span></div>
    <div style="position:absolute;left:121.68px;top:593.74px" class="cls_010"><span class="cls_010">for (var index in catalog.catalog) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:606.34px" class="cls_010"><span class="cls_010">if (catalog.catalog[index].categoryId === categoryId) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:618.95px" class="cls_010"><span class="cls_010">var category = catalog.catalog[index];</span>
    </div>
    <div style="position:absolute;left:151.88px;top:631.55px" class="cls_010"><span class="cls_010">for (var itemIndex in category.items) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:644.16px" class="cls_010"><span class="cls_010">if (category.items[itemIndex].itemId === itemId) {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:656.77px" class="cls_010"><span class="cls_010">return category.items[itemIndex];</span>
    </div>
    <div style="position:absolute;left:161.95px;top:669.37px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:151.88px;top:681.98px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:694.58px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:707.19px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:719.79px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:86802px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background103.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span
            class="cls_010">return undefined;</span></div>
    <div style="position:absolute;left:101.55px;top:117.52px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">exports.findCategoryies = function() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">console.log('Returning all categories');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span class="cls_010">var catalog = readCatalogSync();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span
            class="cls_010">if (catalog) {</span></div>
    <div style="position:absolute;left:121.68px;top:193.15px" class="cls_010"><span
            class="cls_010">var categories = [];</span></div>
    <div style="position:absolute;left:121.68px;top:205.76px" class="cls_010"><span class="cls_010">for (var index in catalog.catalog) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:218.36px" class="cls_010"><span
            class="cls_010">var category = {};</span></div>
    <div style="position:absolute;left:141.82px;top:230.97px" class="cls_010"><span class="cls_010">category["categoryId"] = catalog.catalog[index].categoryId;</span>
    </div>
    <div style="position:absolute;left:141.82px;top:243.57px" class="cls_010"><span class="cls_010">category["categoryName"] = catalog.catalog[index].categoryName;</span>
    </div>
    <div style="position:absolute;left:141.82px;top:268.79px" class="cls_010"><span class="cls_010">categories.push(category);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:281.39px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:294.00px" class="cls_010"><span
            class="cls_010">return categories;</span></div>
    <div style="position:absolute;left:111.61px;top:306.60px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">return [];</span>
    </div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:363.33px" class="cls_002"><span class="cls_002">The catalog module is built around the </span><span
            class="cls_008">catalog.json</span><span class="cls_002"> file, stored in the</span></div>
    <div style="position:absolute;left:87.54px;top:380.14px" class="cls_008"><span class="cls_008">data</span><span
            class="cls_002"> directory. The content of the source file is read synchronously</span></div>
    <div style="position:absolute;left:87.54px;top:396.94px" class="cls_002"><span class="cls_002">using the File System module, </span><span
            class="cls_008">fs</span><span class="cls_002">, within the </span><span
            class="cls_008">readCatalogSync</span><span class="cls_002"> function.</span></div>
    <div style="position:absolute;left:87.54px;top:413.75px" class="cls_002"><span class="cls_002">The File System module provides multiple useful filesystem</span>
    </div>
    <div style="position:absolute;left:87.54px;top:430.56px" class="cls_002"><span class="cls_002">operations such as functions for creating, renaming, or deleting files</span>
    </div>
    <div style="position:absolute;left:87.54px;top:447.37px" class="cls_002"><span class="cls_002">or directories; truncating; linking; </span><span
            class="cls_008">chmod</span><span class="cls_002"> functions; as well as</span></div>
    <div style="position:absolute;left:87.54px;top:464.18px" class="cls_002"><span class="cls_002">synchronous and asynchronous file access for reading and writing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:480.98px" class="cls_002"><span class="cls_002">data. In our sample application, we aim to use the most</span>
    </div>
    <div style="position:absolute;left:87.54px;top:497.79px" class="cls_002"><span class="cls_002">straightforward approach, so we implement functions that read the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:514.60px" class="cls_008"><span
            class="cls_008">catalog.json</span><span class="cls_002"> file by utilizing the </span><span
            class="cls_008">readFileSync</span><span class="cls_002"> function of the File System</span></div>
    <div style="position:absolute;left:87.54px;top:531.41px" class="cls_002"><span class="cls_002">module. It returns the content of a file as a string, within a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:548.21px" class="cls_002"><span class="cls_002">synchronous call. All other functions of the module are exported</span>
    </div>
    <div style="position:absolute;left:87.54px;top:565.02px" class="cls_002"><span class="cls_002">and can be used to query the content of the source file, based on</span>
    </div>
    <div style="position:absolute;left:87.54px;top:581.83px" class="cls_002"><span
            class="cls_002">different criteria.</span></div>
    <div style="position:absolute;left:87.54px;top:616.15px" class="cls_002"><span class="cls_002">The catalog module exports the following functions:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:656.06px" class="cls_008"><span
            class="cls_008">findCategories</span><span class="cls_002">: This returns an array of JSON objects</span>
    </div>
    <div style="position:absolute;left:133.06px;top:677.07px" class="cls_002"><span class="cls_002">containing all the categories in the </span><span
            class="cls_008">catalog.json</span><span class="cls_002"> file</span></div>
    <div style="position:absolute;left:133.06px;top:707.19px" class="cls_008"><span class="cls_008">findItems (categoryId)</span><span
            class="cls_002">: This returns an array JSON objects</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:87653px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background104.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">representing all the items in a given category</span>
    </div>
    <div style="position:absolute;left:133.06px;top:155.33px" class="cls_008"><span class="cls_008">findItem(categoryId, itemId)</span><span
            class="cls_002">: This returns a JSON object</span></div>
    <div style="position:absolute;left:133.06px;top:176.34px" class="cls_002"><span class="cls_002">representing a single item in a given category</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_002"><span class="cls_002">Now that we have three complete functions, let's see how to bind</span>
    </div>
    <div style="position:absolute;left:87.54px;top:240.07px" class="cls_002"><span class="cls_002">them to our Express application.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:88504px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background105.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Implementing routes</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In Node.js terms, a route is a binding between a URI and function.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">The Express framework provides built-in support for routing. An</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_008"><span class="cls_008">express</span><span
            class="cls_002"> object instance contains functions named after each HTTP</span></div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">verb: </span><span
            class="cls_008">get</span><span class="cls_002">, </span><span class="cls_008">post</span><span
            class="cls_002">, </span><span class="cls_008">put</span><span class="cls_002">, and </span><span
            class="cls_008">delete</span><span class="cls_002">. They have the following syntax:</span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_008"><span class="cls_008">function(uri, handler);</span><span
            class="cls_002">. They are used to bind a handler function to a</span></div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">specific HTTP action executed over a URI. The handler function</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">usually takes two arguments: </span><span
            class="cls_008">request</span><span class="cls_002"> and </span><span class="cls_008">response</span><span
            class="cls_002">. Let's see it with a</span></div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">simple </span><span
            class="cls_008">Hello route</span><span class="cls_002"> application:</span></div>
    <div style="position:absolute;left:101.55px;top:366.83px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:379.44px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:101.55px;top:404.65px" class="cls_010"><span class="cls_010">app.get('/hello', function(request, response){</span>
    </div>
    <div style="position:absolute;left:111.61px;top:417.25px" class="cls_010"><span class="cls_010">response.send('Hello route');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:429.86px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:455.07px" class="cls_010"><span
            class="cls_010">app.listen(3000);</span></div>
    <div style="position:absolute;left:87.54px;top:486.59px" class="cls_002"><span class="cls_002">Running this sample at localhost and accessing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_008"><span class="cls_008"> </span><A
            HREF="http://localhost:3000/hello/">http://localhost:3000/hello</A> <span class="cls_002"> will result in calling your handler function</span>
    </div>
    <div style="position:absolute;left:87.54px;top:520.20px" class="cls_002"><span class="cls_002">and it will respond saying </span><span
            class="cls_008">Hello route</span><span class="cls_002">, but routing can give you much</span></div>
    <div style="position:absolute;left:87.54px;top:537.01px" class="cls_002"><span class="cls_002">more. It allows you to define a URI with parameters; for example,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.82px" class="cls_002"><span
            class="cls_002">let's use </span><span class="cls_008">/hello/:name</span><span class="cls_002"> as a routing string. It tells the framework that the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:570.62px" class="cls_002"><span class="cls_002">URI used consists of two parts: a static part (</span><span
            class="cls_008">hello</span><span class="cls_002">) and a variable</span></div>
    <div style="position:absolute;left:87.54px;top:587.43px" class="cls_002"><span
            class="cls_002">part (the </span><span class="cls_008">name</span><span class="cls_002"> parameter).</span>
    </div>
    <div style="position:absolute;left:87.54px;top:621.75px" class="cls_002"><span class="cls_002">Furthermore, when the routing string and the handler function are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:638.56px" class="cls_002"><span class="cls_002">defined in line with the </span><span
            class="cls_008">get</span><span class="cls_002"> function of an Express instance, a</span></div>
    <div style="position:absolute;left:87.54px;top:655.36px" class="cls_002"><span class="cls_002">parameter collection is made available directly in the </span><span
            class="cls_008">request</span></div>
    <div style="position:absolute;left:87.54px;top:672.17px" class="cls_002"><span class="cls_002">argument of the handler function. To demonstrate this, let's modify</span>
    </div>
    <div style="position:absolute;left:87.54px;top:688.98px" class="cls_002"><span class="cls_002">our previous example a bit:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:89355px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background106.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:126.62px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:101.55px;top:151.83px" class="cls_010"><span class="cls_010">app.get('/hello:name', function(request, response){</span>
    </div>
    <div style="position:absolute;left:111.61px;top:164.44px" class="cls_010"><span class="cls_010">response.send('Hello ' + request.params.name);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:177.04px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:202.25px" class="cls_010"><span
            class="cls_010">app.listen(3000);</span></div>
    <div style="position:absolute;left:87.54px;top:233.77px" class="cls_002"><span class="cls_002">As you can see in the preceding code snippet, we used a colon (</span><span
            class="cls_008">:</span><span class="cls_002">) to</span></div>
    <div style="position:absolute;left:87.54px;top:250.58px" class="cls_002"><span class="cls_002">separate the parameter part of the URI from the static part. You can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:267.38px" class="cls_002"><span class="cls_002">have multiple parameters in an Express route; for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:284.19px" class="cls_002"><span class="cls_002">example, </span><span
            class="cls_008">/category/:category-id/items/:item-id</span><span
            class="cls_002"> defines a route for</span></div>
    <div style="position:absolute;left:87.54px;top:301.00px" class="cls_002"><span class="cls_002">displaying an item that belongs to a category, where the </span><span
            class="cls_008">category-id</span></div>
    <div style="position:absolute;left:87.54px;top:317.81px" class="cls_002"><span class="cls_002">and </span><span
            class="cls_008">item-id</span><span class="cls_002"> are parameters.</span></div>
    <div style="position:absolute;left:87.54px;top:352.12px" class="cls_002"><span class="cls_002">Now let's try it out. Requesting </span><A
            HREF="http://localhost:3000/hello/friend/">http://localhost:3000/hello/friend</A> </span><span
            class="cls_002"> will</span></div>
    <div style="position:absolute;left:87.54px;top:368.93px" class="cls_002"><span class="cls_002">result in the following output:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:413.05px" class="cls_010"><span class="cls_010">hello friend</span>
    </div>
    <div style="position:absolute;left:87.54px;top:444.57px" class="cls_002"><span class="cls_002">This is how we can provide parameterized URIs with Express. It is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:461.37px" class="cls_002"><span class="cls_002">nice feature, but it is often not enough. In web applications, we are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:478.18px" class="cls_002"><span class="cls_002">used to providing additional parameters with </span><span
            class="cls_008">GET</span><span class="cls_002"> parameters.</span></div>
    <div style="position:absolute;left:87.54px;top:512.50px" class="cls_002"><span class="cls_002">Unfortunately, the Express framework is not so good with </span><span
            class="cls_008">GET</span></div>
    <div style="position:absolute;left:87.54px;top:529.31px" class="cls_002"><span class="cls_002">parameters. Thus, we have to utilize the </span><span
            class="cls_008">url</span><span class="cls_002"> module. It is built into</span></div>
    <div style="position:absolute;left:87.54px;top:546.11px" class="cls_002"><span class="cls_002">Node.js to provide an easy way of using URL parsing. Let's use our</span>
    </div>
    <div style="position:absolute;left:87.54px;top:562.92px" class="cls_008"><span class="cls_008">hello</span><span
            class="cls_002"> result with other parameters in the application again, but</span></div>
    <div style="position:absolute;left:87.54px;top:579.73px" class="cls_002"><span class="cls_002">extend it in a way that it outputs </span><span
            class="cls_008">hello all</span><span class="cls_002"> when </span><span class="cls_008">/hello</span><span
            class="cls_002"> is requested</span></div>
    <div style="position:absolute;left:87.54px;top:596.54px" class="cls_002"><span class="cls_002">and </span><span
            class="cls_008">hello friend</span><span class="cls_002"> when the requested URI is </span><span
            class="cls_008">/hello?name=friend</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:640.66px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:653.26px" class="cls_010"><span class="cls_010">var url = require('url');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:665.87px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:101.55px;top:691.08px" class="cls_010"><span class="cls_010">app.get('/hello', function(request, response){</span>
    </div>
    <div style="position:absolute;left:116.65px;top:703.69px" class="cls_010"><span class="cls_010">var getParams = url.parse(request.url, true).query;</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:90206px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background107.jpg" width=595 height=841></div>
    <div style="position:absolute;left:116.65px;top:104.91px" class="cls_010"><span class="cls_010">if (Object.keys(getParams).length == 0) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:117.52px" class="cls_010"><span class="cls_010">response.end('Hello all');</span>
    </div>
    <div style="position:absolute;left:116.65px;top:130.12px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:160.94px" class="cls_010"><span class="cls_010">response.end('Hello ' + getParams.name);</span>
    </div>
    <div style="position:absolute;left:116.65px;top:173.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:186.15px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:211.36px" class="cls_010"><span
            class="cls_010">app.listen(3000);</span></div>
    <div style="position:absolute;left:87.54px;top:242.87px" class="cls_002"><span class="cls_002">There are a few things worth mentioning here. We used the </span><span
            class="cls_008">url</span></div>
    <div style="position:absolute;left:87.54px;top:259.68px" class="cls_002"><span
            class="cls_002">module's function </span><span class="cls_008">parse</span><span class="cls_002">. It takes a URL as its first argument and a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:276.49px" class="cls_002"><span class="cls_002">Boolean as an optional second argument, which specifies whether</span>
    </div>
    <div style="position:absolute;left:87.54px;top:293.30px" class="cls_002"><span class="cls_002">the query string should be parsed or not. The </span><span
            class="cls_008">url.parse</span><span class="cls_002"> function</span></div>
    <div style="position:absolute;left:87.54px;top:310.10px" class="cls_002"><span class="cls_002">returns an associative object. We used </span><span
            class="cls_008">Object.keys</span><span class="cls_002"> with it to transform</span></div>
    <div style="position:absolute;left:87.54px;top:326.91px" class="cls_002"><span class="cls_002">the keys in these associative objects into an array so that we can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:343.72px" class="cls_002"><span class="cls_002">check its length. This will help us check whether our URI has been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:360.53px" class="cls_002"><span
            class="cls_002">called with </span><span class="cls_008">GET</span><span class="cls_002"> parameters or not. In addition to the routing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:377.34px" class="cls_002"><span class="cls_002">functions named after each HTTP verb, there is also a function</span>
    </div>
    <div style="position:absolute;left:87.54px;top:394.14px" class="cls_002"><span class="cls_002">named </span><span
            class="cls_008">all</span><span class="cls_002">. When used, it routes all the HTTP actions to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:410.95px" class="cls_002"><span class="cls_002">specified URI.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:445.27px" class="cls_002"><span class="cls_002">Now that we know how routing and the </span><span
            class="cls_008">GET</span><span class="cls_002"> parameters work within</span></div>
    <div style="position:absolute;left:87.54px;top:462.07px" class="cls_002"><span class="cls_002">Node.js and the Express environment, we are ready to define a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:478.88px" class="cls_002"><span class="cls_002">route for the </span><span
            class="cls_008">catalog</span><span class="cls_002"> module and bind it in our application. The</span></div>
    <div style="position:absolute;left:87.54px;top:495.69px" class="cls_002"><span class="cls_002">following is the route as defined in </span><span
            class="cls_008">routes/catalog.js</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:101.55px;top:539.81px" class="cls_010"><span class="cls_010">var express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:552.42px" class="cls_010"><span class="cls_010">var catalog = require('../modules/catalog.js')</span>
    </div>
    <div style="position:absolute;left:101.55px;top:577.63px" class="cls_010"><span class="cls_010">var router = express.Router();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:602.84px" class="cls_010"><span class="cls_010">router.get('/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:615.45px" class="cls_010"><span class="cls_010">var categories = catalog.findCategoryies();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:628.05px" class="cls_010"><span class="cls_010">response.json(categories);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:640.66px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:665.87px" class="cls_010"><span class="cls_010">router.get('/:categoryId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:678.48px" class="cls_010"><span class="cls_010">var categories = catalog.findItems(request.params.categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:691.08px" class="cls_010"><span class="cls_010">if (categories === undefined) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:703.69px" class="cls_010"><span class="cls_010">response.writeHead(404, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:121.68px;top:716.29px" class="cls_010"><span class="cls_010">response.end('Not found');</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:91057px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background108.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.83px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:117.44px" class="cls_010"><span class="cls_010">response.json(categories);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:130.04px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:142.65px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:167.86px" class="cls_010"><span class="cls_010">router.get('/:categoryId/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">var item = catalog.findItem(request.params.categoryId,</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.07px" class="cls_010"><span class="cls_010">request.params.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:205.68px" class="cls_010"><span class="cls_010">if (item === undefined) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:218.29px" class="cls_010"><span class="cls_010">response.writeHead(404, {'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:121.68px;top:230.89px" class="cls_010"><span class="cls_010">response.end('Not found');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:243.50px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:256.10px" class="cls_010"><span
            class="cls_010">response.json(item);</span></div>
    <div style="position:absolute;left:111.61px;top:268.71px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:281.31px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:293.92px" class="cls_010"><span class="cls_010">module.exports = router;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:338.12px" class="cls_002"><span class="cls_002">First, a </span><span
            class="cls_008">Router</span><span
            class="cls_002"> instance is created from the Express module. Here is a</span></div>
    <div style="position:absolute;left:87.54px;top:354.93px" class="cls_002"><span class="cls_002">table that nicely describes the routing we just implemented. This</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.73px" class="cls_002"><span class="cls_002">will be helpful later when we test our API:</span>
    </div>
    <div style="position:absolute;left:95.24px;top:413.05px" class="cls_012"><span class="cls_012">HTTP</span></div>
    <div style="position:absolute;left:334.05px;top:413.05px" class="cls_012"><span
            class="cls_012">Catalog's module</span></div>
    <div style="position:absolute;left:196.79px;top:420.76px" class="cls_012"><span class="cls_012">Route</span></div>
    <div style="position:absolute;left:95.24px;top:429.16px" class="cls_012"><span class="cls_012">method</span></div>
    <div style="position:absolute;left:334.05px;top:429.16px" class="cls_012"><span class="cls_012">function</span>
    </div>
    <div style="position:absolute;left:95.24px;top:459.97px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:196.79px;top:459.97px" class="cls_013"><span class="cls_013">/catalog</span>
    </div>
    <div style="position:absolute;left:334.05px;top:459.97px" class="cls_013"><span
            class="cls_013">findCategories()</span></div>
    <div style="position:absolute;left:95.24px;top:484.49px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:196.79px;top:484.49px" class="cls_013"><span
            class="cls_013">/catalog/:categoryId</span></div>
    <div style="position:absolute;left:334.05px;top:484.49px" class="cls_013"><span class="cls_013">findItems(categoryId)</span>
    </div>
    <div style="position:absolute;left:196.79px;top:509.00px" class="cls_013"><span class="cls_013">/catalog/:categoryId/:it</span>
    </div>
    <div style="position:absolute;left:95.24px;top:513.90px" class="cls_013"><span class="cls_013">GET</span></div>
    <div style="position:absolute;left:334.05px;top:513.90px" class="cls_013"><span class="cls_013">findItem(categoryId, itemId)</span>
    </div>
    <div style="position:absolute;left:196.79px;top:518.80px" class="cls_013"><span class="cls_013">emId</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:91908px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background109.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Querying the API using test</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">data</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">We need some test data in order to test our service, so let's use the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_008"><span
            class="cls_008">catalog.json</span><span class="cls_002"> file in the </span><span
            class="cls_008">data</span><span class="cls_002"> directory of our project. This data will allow</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">us to test all our three functions, but to do that, we would need a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">client that can send REST requests against an endpoint. If you still</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">haven't created a Postman project for testing your application, now</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">is an appropriate time to create it.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_002"><span
            class="cls_002">Requesting </span><span class="cls_008">/catalog</span><span class="cls_002"> should return all the categories in the </span><span
            class="cls_008">test</span><span class="cls_002"> file:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:92759px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background110.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:526.50px" class="cls_002"><span
            class="cls_002">Thus, requesting </span><span class="cls_008">/catalog/1</span><span class="cls_002"> should result in returning a list with all</span>
    </div>
    <div style="position:absolute;left:87.54px;top:543.31px" class="cls_002"><span
            class="cls_002">the items under the </span><span class="cls_008">Watches</span><span class="cls_002"> category:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:93610px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background111.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:562.92px" class="cls_002"><span
            class="cls_002">Finally, requesting </span><A HREF="http://localhost:3000/catalog/1/item-identifier-1/">http://localhost:3000/catalog/1/item-identifier-1</A> </span>
        <span class="cls_002"> would</span></div>
    <div style="position:absolute;left:87.54px;top:579.73px" class="cls_002"><span class="cls_002">display only the item identified by </span><span
            class="cls_008">item-identifier-1</span><span class="cls_002">, and requesting a</span></div>
    <div style="position:absolute;left:87.54px;top:596.54px" class="cls_002"><span class="cls_002">nonexistent item would result in response with status code </span><span
            class="cls_008">404</span><span class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:94461px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background112.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:95312px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background113.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Content negotiation</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">So far, the catalog service supports only the JSON format, and thus</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">works only with the media type </span><span
            class="cls_008">application/json</span><span class="cls_002">. Let's assume our</span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">service has to offer data in different formats, for example, both</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">JSON and XML. Then, the consumer needs to explicitly define the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">data format they need. The best way to carry out content</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">negotiation in REST has been a very debatable subject for a long</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">time.</span></div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">In his famous discussion on implementing content negotiation</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">correctly, Roy Fielding states the following:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_009"><span class="cls_009">All important resources must have URIs.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:413.75px" class="cls_002"><span class="cls_002">However, that leaves a gap on how to expose the same resource in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:430.56px" class="cls_002"><span class="cls_002">different data format, so Roy continues with the following:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:464.88px" class="cls_009"><span class="cls_009">Agent-driven negotiation is far more effective, but there was a huge disagreement</span>
    </div>
    <div style="position:absolute;left:87.54px;top:476.78px" class="cls_009"><span class="cls_009">between myself and the chair of the HTTP working group and my original agent-driven</span>
    </div>
    <div style="position:absolute;left:87.54px;top:488.69px" class="cls_009"><span class="cls_009">design for HTTP/1.1 was effectively buried in committee. To do negotiation right, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:500.59px" class="cls_009"><span class="cls_009">client needs to be aware of all the alternatives and what it should use as a bookmark.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">While one can still choose to stick with a URI-driven negotiation by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">providing the desired format with custom </span><span
            class="cls_008">GET</span><span class="cls_002"> parameters, the REST</span></div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">community has chosen to stick to Roy's suggestion for agent-driven</span>
    </div>
    <div style="position:absolute;left:87.54px;top:573.43px" class="cls_002"><span class="cls_002">negotiation. Now that it has been almost a decade since this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">argument was initiated, it has been proven that they took the right</span>
    </div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">decision. Agent-driven negotiation makes use of the </span><span
            class="cls_008">Accept</span><span class="cls_002"> HTTP</span></div>
    <div style="position:absolute;left:87.54px;top:623.85px" class="cls_002"><span class="cls_002">header.</span></div>
    <div style="position:absolute;left:87.54px;top:658.17px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">Accept</span><span class="cls_002"> HTTP header specifies the media type of the resource that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:674.97px" class="cls_002"><span class="cls_002">the consumer is willing to process. In addition to the </span><span
            class="cls_008">Accept</span><span class="cls_002"> header,</span></div>
    <div style="position:absolute;left:87.54px;top:691.78px" class="cls_002"><span class="cls_002">the consumer may also make use of the </span><span
            class="cls_008">Accept-Language</span><span class="cls_002"> and </span><span class="cls_008">Accept-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:708.59px" class="cls_008"><span class="cls_008">Encoding</span><span
            class="cls_002"> headers to specify what language and encoding the results</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:96163px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background114.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">should be provided in. If the server fails to provide the results in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">expected format, it can either return a default value or make use of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_008"><span class="cls_008">HTTP 406 Not acceptable</span><span
            class="cls_002"> in order not to cause data confusion errors on</span></div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span
            class="cls_002">the client side.</span></div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span
            class="cls_002">The Node.js HTTP </span><span class="cls_008">response</span><span class="cls_002"> object contains a method, </span><span
            class="cls_008">format</span><span class="cls_002">, that</span></div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">performs content negotiation based on the </span><span
            class="cls_008">Accept</span><span class="cls_002"> HTTP header if set</span></div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">in the </span><span
            class="cls_008">request</span><span class="cls_002"> object. It uses the built-in </span><span
            class="cls_008">request.accepts()</span><span class="cls_002"> to select an</span></div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">appropriate handler for the request. If that is not found, the server</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">invokes the default handler, which responds with </span><span
            class="cls_008">HTTP 406 Not</span></div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_008"><span
            class="cls_008">acceptable</span><span class="cls_002">. Let's create a demo on how to use the </span><span
            class="cls_008">format</span><span class="cls_002"> method within</span></div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">one of our routes. For that purpose, let's assume we have</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">implemented a function within our </span><span
            class="cls_008">catalog</span><span class="cls_002"> module, named</span></div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_008"><span
            class="cls_008">list_groups_in_xml</span><span
            class="cls_002">, that provides the group data in XML format:</span></div>
    <div style="position:absolute;left:101.55px;top:367.53px" class="cls_010"><span class="cls_010">app.get('/catalog', function(request, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:380.14px" class="cls_010"><span
            class="cls_010">response.format( {</span></div>
    <div style="position:absolute;left:131.75px;top:392.74px" class="cls_010"><span class="cls_010">'text/xml' : function() {</span>
    </div>
    <div style="position:absolute;left:146.85px;top:405.35px" class="cls_010"><span class="cls_010">response.send(catalog.findCategoiesXml());</span>
    </div>
    <div style="position:absolute;left:131.75px;top:417.95px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:131.75px;top:430.56px" class="cls_010"><span class="cls_010">'application/json' : function() {</span>
    </div>
    <div style="position:absolute;left:146.85px;top:443.17px" class="cls_010"><span class="cls_010">response.json(catalog.findCategoriesJson());</span>
    </div>
    <div style="position:absolute;left:131.75px;top:455.77px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:131.75px;top:468.38px" class="cls_010"><span class="cls_010">'default' : function() {.</span>
    </div>
    <div style="position:absolute;left:146.85px;top:480.98px" class="cls_010"><span class="cls_010">response.status(406).send('Not Acceptable');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:493.59px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:506.19px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:518.80px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:550.32px" class="cls_002"><span class="cls_002">This is how you can implement content negotiation in a clear and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:567.12px" class="cls_002"><span
            class="cls_002">straightforward way.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:97014px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background115.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">API versioning</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">It is an inevitable fact that all application APIs evolve. However, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">evolution of public APIs with an unknown number of consumers,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">such as RESTful services, is a sensitive topic. As consumers may not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">be able to handle the modified data appropriately and there is no</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">way of notifying all of them, we need to keep our APIs as backward-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">compatible as possible. One way to do so is to use different URIs for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">different versions of our application. Currently, our catalog API is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span
            class="cls_002">available at </span><span class="cls_008">/catalog</span><span class="cls_002">.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">When the time is right for a new version, for example, Version 2, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">may need to keep the previous version available at another URI for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">backward-compatibility. Best practice is to encode the version</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">number in the URI, such as </span><span
            class="cls_008">/v1/catalog</span><span class="cls_002">, and keep </span><span
            class="cls_008">/catalog</span><span class="cls_002"> mapped to</span></div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">the latest version. Thus, requesting </span><span
            class="cls_008">/catalog</span><span class="cls_002"> will cause a redirect to</span></div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_008"><span
            class="cls_008">/v2/catalog</span><span class="cls_002"> and will make use of the HTTP </span><span
            class="cls_008">3xx</span><span class="cls_002"> status codes to indicate</span></div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span class="cls_002">the redirection to the latest version.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">Another option for versioning would be to keep the URI of your API</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.00px" class="cls_002"><span class="cls_002">stable and rely on custom HTTP headers that will specify the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">version. But that's not very stable approach concerning backward-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span class="cls_002">compatibility as it is much more natural to modify a URL of a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">request in an application rather than modify the headers that are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span class="cls_002">sent within the request.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:97865px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background116.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Self-test questions</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">To get additional confidence, go through this set of statements and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">state whether they are true or false:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:261.78px" class="cls_002"><span class="cls_002">1. A REST-enabled endpoint must support all HTTP methods</span>
    </div>
    <div style="position:absolute;left:133.06px;top:282.79px" class="cls_002"><span class="cls_002">relevant to the REST principles</span>
    </div>
    <div style="position:absolute;left:114.15px;top:303.80px" class="cls_002"><span class="cls_002">2. When content negotiation fails, due to an unsupported</span>
    </div>
    <div style="position:absolute;left:133.06px;top:324.81px" class="cls_002"><span class="cls_002">media type passed as a value of the accepts header, 301 is</span>
    </div>
    <div style="position:absolute;left:133.06px;top:345.82px" class="cls_002"><span class="cls_002">the appropriate status code.</span>
    </div>
    <div style="position:absolute;left:114.15px;top:366.83px" class="cls_002"><span class="cls_002">3. When using parameterized routes, the developer can specify</span>
    </div>
    <div style="position:absolute;left:133.06px;top:387.84px" class="cls_002"><span class="cls_002">the type of the parameter, for example, whether it is a</span>
    </div>
    <div style="position:absolute;left:133.06px;top:408.85px" class="cls_002"><span class="cls_002">numeric or a literal type.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:98716px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background117.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, we dived into some more complex topics. Let's sum</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">up what we covered. We started by specifying the operations of our</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">web API and defined that an operation is a combination of a URI</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">and HTTP action. Next, we implemented routes and bound them to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">an operation. Then, we requested each operation using the Postman</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">REST client to request the URIs that we routed. In the content</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">negotiation section, we handled the </span><span
            class="cls_008">Accept</span><span class="cls_002"> HTTP header to provide</span></div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">the results in the format requested by consumers.  Finally, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">covered the topic of API versions, which allow us to develop</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">backward-compatible APIs.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">We used old-fashioned filesystem storage for our data in this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">chapter. This is not suitable for a web application. Thus, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">look into modern, scalable, and reliable NoSQL storage in the next</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">chapter.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:99567px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background118.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Using NoSQL Databases</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In the last chapter, we implemented a sample application exposing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">a read-only service that provided catalog data. For the sake of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">simplicity, we introduced a performance bottleneck in this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">implementation by using file storage. This storage is not suitable for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">web applications. It relies on 33 physical files, preventing our</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">application from servicing heavy loads, as file storage lacks</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">multitenant support due to disc I/O operations. In other words, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">definitely need to look for a better storage solution, which scales</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">easily, when needed, following the demands of our REST-enabled</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">application. NoSQL databases are now heavily used in web and in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.13px" class="cls_002"><span class="cls_002">cloud environments, ensuring zero downtime and high availability.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:389.94px" class="cls_002"><span class="cls_002">They have the following advantages over traditional transactional</span>
    </div>
    <div style="position:absolute;left:87.54px;top:406.75px" class="cls_002"><span class="cls_002">SQL databases:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:446.67px" class="cls_002"><span class="cls_002">They support schema versions; that is, they can work</span>
    </div>
    <div style="position:absolute;left:133.06px;top:467.68px" class="cls_002"><span class="cls_002">with object representations rather than filling the object</span>
    </div>
    <div style="position:absolute;left:133.06px;top:488.69px" class="cls_002"><span class="cls_002">state based on definitions of one or several tables.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:518.80px" class="cls_002"><span class="cls_002">They are extensible, because they store an actual object.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:539.81px" class="cls_002"><span class="cls_002">Data evolution is supported implicitly, so all you need to do</span>
    </div>
    <div style="position:absolute;left:133.06px;top:560.82px" class="cls_002"><span class="cls_002">is call the operation that stores the modified object.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:590.93px" class="cls_002"><span class="cls_002">They are designed to be highly distributed and scalable.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:637.86px" class="cls_002"><span class="cls_002">Nearly all modern NoSQL solutions out there support clustering</span>
    </div>
    <div style="position:absolute;left:87.54px;top:654.66px" class="cls_002"><span class="cls_002">and can scale further, along with the load of your application.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:671.47px" class="cls_002"><span class="cls_002">Additionally, most of them have REST-enabled interfaces over</span>
    </div>
    <div style="position:absolute;left:87.54px;top:688.28px" class="cls_002"><span class="cls_002">HTTP, which eases their usage over a load balancer in high-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:705.09px" class="cls_002"><span class="cls_002">availability scenarios. Classical database drivers are usually not</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:100418px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background119.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">available for traditional client-side languages, such as JavaScript,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">because they require native libraries or drivers. However, the idea</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">of NoSQL originated from using document data stores. Thus, most</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">of them support the JSON format, which is native to JavaScript.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">Last but not least, most NoSQL solutions are open source and are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">available for free, with all the benefits that open source projects</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">offer: community, examples, and freedom!</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">In this chapter, we will take a look at the MongoDB NoSQL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">database and the Mongoose module that interacts with it. We will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">see how to design and implement automated tests for the database</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">models. Finally, at the end of the chapter, we will remove the file</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">storage bottleneck and will move our application to an almost ready</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span
            class="cls_002">for production state.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:101269px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background120.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">MongoDB - a document store</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">database</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">MongoDB is an open source document database with built-in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">support for the JSON format. It provides a full index support, based</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">on any of the available attributes in a document. It is ideal for high-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">availability scenarios due to its scalability features. MongoDB,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span
            class="cls_002">available at </span><A HREF="https://mms.mongodb.com/">https://mms.mongodb.com</A> </span>
        <span class="cls_002">, is cloud-ready with its management</span></div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">services, MongoDB Management Services (MMS). They utilize</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">and automate most development operations that need to be carried</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">out to keep your cloud database in good shape, taking care of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">upgrades, further scaling, backups, recovery, performance, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span
            class="cls_002">security alerts.</span></div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_002"><span class="cls_002">Let's move forward and install MongoDB. Installers for Windows,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">Linux, macOS, and Solaris are available at </span><A
            HREF="http://www.mongodb.org/download/">http://www.mongodb.org/download</A> </span></div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_007"><span class="cls_007">s</span><span
            class="cls_002">. Linux users can find MongoDB in all popular distribution</span></div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span class="cls_002">repositories, while Windows users can make use of a user-friendly</span>
    </div>
    <div style="position:absolute;left:87.54px;top:488.69px" class="cls_002"><span class="cls_002">wizard which will guide you through the installation steps, where,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:505.49px" class="cls_002"><span class="cls_002">for a typical installation, all you need to do is accept the license</span>
    </div>
    <div style="position:absolute;left:87.54px;top:522.30px" class="cls_002"><span class="cls_002">agreement and provide an installation path.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">After a successful installation, execute the following command to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:573.43px" class="cls_002"><span class="cls_002">start MongoDB. If you want to specify a custom location for your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">data, you have to use the </span><span
            class="cls_008">--dbpath</span><span class="cls_002"> argument. Optionally, you can start</span></div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">the MongoDB HTTP console via the </span><span
            class="cls_008">--rest</span><span class="cls_002"> argument:</span></div>
    <div style="position:absolute;left:101.55px;top:651.16px" class="cls_010"><span class="cls_010">mongod --dbpath ./data --rest</span>
    </div>
    <div style="position:absolute;left:87.54px;top:682.68px" class="cls_002"><span class="cls_002">The default port for communicating with MongoDB is </span><span
            class="cls_008">27017</span><span class="cls_002">, and its</span></div>
    <div style="position:absolute;left:87.54px;top:699.48px" class="cls_002"><span class="cls_002">HTTP console is implicitly configured to use a port higher than the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:716.29px" class="cls_002"><span class="cls_002">data port by a value of 1,000. Therefore, the default port of the</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:102120px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background121.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span
            class="cls_002">console will be </span><span class="cls_008">28017</span><span class="cls_002">. The HTTP console provides useful information</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">about the database, such as logs, health status, available databases,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">and so on. I strongly advise you to spend some time with it. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">console can also be used as a RESTful health check service of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">database, because it provides JSON-encoded information about the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">running database services and the last error that occurred:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:232.37px" class="cls_010"><span class="cls_010">GET /replSetGetStatus?text=1 HTTP/1.1</span>
    </div>
    <div style="position:absolute;left:101.55px;top:244.97px" class="cls_010"><span class="cls_010">Host: localhost:28017</span>
    </div>
    <div style="position:absolute;left:101.55px;top:257.58px" class="cls_010"><span class="cls_010">Connection: Keep-Alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:270.19px" class="cls_010"><span class="cls_010">User-Agent: RestClient-Tool</span>
    </div>
    <div style="position:absolute;left:101.55px;top:295.40px" class="cls_010"><span
            class="cls_010">HTTP/1.0 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:308.00px" class="cls_010"><span
            class="cls_010">Content-Length: 56</span></div>
    <div style="position:absolute;left:101.55px;top:320.61px" class="cls_010"><span
            class="cls_010">Connection: close</span></div>
    <div style="position:absolute;left:101.55px;top:333.21px" class="cls_010"><span class="cls_010">Content-Type: text/plain;charset=utf-8</span>
    </div>
    <div style="position:absolute;left:101.55px;top:358.43px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:101.55px;top:371.03px" class="cls_010"><span class="cls_010">"ok": 0,</span>
    </div>
    <div style="position:absolute;left:101.55px;top:383.64px" class="cls_010"><span class="cls_010">"errmsg": "not running with --replSet"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:396.24px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:427.76px" class="cls_002"><span class="cls_002">This REST interface can be used in a script or an application to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:444.57px" class="cls_002"><span class="cls_002">automate altering notifications providing the current state of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:461.37px" class="cls_002"><span class="cls_002">database engine and so on.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:495.69px" class="cls_002"><span class="cls_002">The log section of the console shows that your server is running</span>
    </div>
    <div style="position:absolute;left:87.54px;top:512.50px" class="cls_002"><span class="cls_002">successfully (if it is). Now we are ready to move further and see how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:529.31px" class="cls_002"><span class="cls_002">to connect Node.js to MongoDB.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:102971px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background122.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Database modeling with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">Mongoose</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Mongoose is a module that connects Node.js to MongoDB in an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">object document mapper (ODM) style. It offers the Create,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">Read, Update, and Delete (also known as CRUD)</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">functionalities for documents stored in the database. Mongoose</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">defines the structure of the used documents using schemas. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">schema is the smallest unit of data definition in Mongoose. A model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">is built out of a schema definition. It is a constructor-like function</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">that can be used to create or query documents. Documents are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">instances of a model and represent one-to-one mapping to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">documents stored in MongoDB. The schema-model-document</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.95px" class="cls_002"><span class="cls_002">hierarchy provides a self-descriptive way of defining objects and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:420.76px" class="cls_002"><span class="cls_002">allows easy data validation.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">Let's start by installing Mongoose with </span><span
            class="cls_008">npm</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:499.19px" class="cls_010"><span
            class="cls_010">npm install mongoose</span></div>
    <div style="position:absolute;left:87.54px;top:530.71px" class="cls_002"><span class="cls_002">Now that we have the Mongoose module installed, our first step will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:547.51px" class="cls_002"><span class="cls_002">be to define a schema that will represent an item in the catalog:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:591.63px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:604.24px" class="cls_010"><span class="cls_010">var Schema = mongoose.Schema;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:616.85px" class="cls_010"><span class="cls_010">var itemSchema = new Schema ({</span>
    </div>
    <div style="position:absolute;left:121.68px;top:629.45px" class="cls_010"><span class="cls_010">"itemId" : {type: String, index: {unique: true}},</span>
    </div>
    <div style="position:absolute;left:121.68px;top:642.06px" class="cls_010"><span
            class="cls_010">"itemName": String,</span></div>
    <div style="position:absolute;left:121.68px;top:654.66px" class="cls_010"><span
            class="cls_010">"price": Number,</span></div>
    <div style="position:absolute;left:121.68px;top:667.27px" class="cls_010"><span
            class="cls_010">"currency" : String,</span></div>
    <div style="position:absolute;left:121.68px;top:679.88px" class="cls_010"><span class="cls_010">"categories": [String]</span>
    </div>
    <div style="position:absolute;left:101.55px;top:692.48px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:103822px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background123.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">The preceding code snippet creates a schema definition of an item.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">Defining a schema is straightforward and is quite similar to JSON</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">schema definition; you have to describe and attribute with its type</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">and optionally provide additional properties for each key. In the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">case of the catalog application, we need to use the </span><span
            class="cls_008">itemId</span><span class="cls_002"> as a unique</span></div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">index in order to avoid having two different items with the same ID.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Thus, apart from defining its type as </span><span
            class="cls_008">String</span><span class="cls_002">, we also use the </span><span
            class="cls_008">index</span></div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">attribute to describe that the value of the </span><span
            class="cls_008">itemId</span><span class="cls_002"> field must be unique</span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">for each individual item.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">Mongoose introduces the term model. A model is a constructor-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">like function compiled out of a schema definition. An instance of a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">model represents a document that can be saved to or read from the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">database. Creating a model instance is done by calling the </span><span
            class="cls_008">model</span></div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">function of a </span><span
            class="cls_008">mongoose</span><span class="cls_002"> instance and passing the schema that the model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">should use:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:401.15px" class="cls_010"><span class="cls_010">var CatalogItem = mongoose.model('Item', itemSchema);</span>
    </div>
    <div style="position:absolute;left:87.54px;top:432.66px" class="cls_002"><span class="cls_002">A model also exposes functions for querying and data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:449.47px" class="cls_002"><span class="cls_002">manipulations. Assuming that we have initialized a schema and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:466.28px" class="cls_002"><span class="cls_002">created a model, storing a new item to MongoDB is as simple as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:483.08px" class="cls_002"><span
            class="cls_002">creating a new </span><span class="cls_008">model</span><span class="cls_002"> instance and invoking its </span><span
            class="cls_008">save</span><span class="cls_002"> function:</span></div>
    <div style="position:absolute;left:101.55px;top:527.20px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:552.42px" class="cls_010"><span class="cls_010">mongoose.connect('mongodb://localhost/catalog');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:565.02px" class="cls_010"><span class="cls_010">var db = mongoose.connection;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:590.23px" class="cls_010"><span class="cls_010">db.on('error', console.error.bind(console, 'connection error:'));</span>
    </div>
    <div style="position:absolute;left:101.55px;top:602.84px" class="cls_010"><span class="cls_010">db.once('open', function() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:615.45px" class="cls_010"><span class="cls_010">var watch = new CatalogItem({</span>
    </div>
    <div style="position:absolute;left:121.68px;top:628.05px" class="cls_010"><span class="cls_010">itemId: 9 ,</span>
    </div>
    <div style="position:absolute;left:121.68px;top:640.66px" class="cls_010"><span class="cls_010">itemName: "Sports Watch1",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:653.26px" class="cls_010"><span class="cls_010">brand: 'А1',</span>
    </div>
    <div style="position:absolute;left:121.68px;top:665.87px" class="cls_010"><span class="cls_010">price: 100,</span>
    </div>
    <div style="position:absolute;left:121.68px;top:678.47px" class="cls_010"><span
            class="cls_010">currency: "EUR",</span></div>
    <div style="position:absolute;left:121.68px;top:691.08px" class="cls_010"><span class="cls_010">categories: ["Watches", "Sports Watches"]</span>
    </div>
    <div style="position:absolute;left:111.61px;top:703.69px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:104673px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background124.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">watch.save((error, item, affectedNo)=> {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:117.52px" class="cls_010"><span class="cls_010">if (!error) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:130.12px" class="cls_010"><span class="cls_010">console.log('Item added successfully to the catalog');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:142.73px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">console.log('Cannot add item to the catlog');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">db.once('open', function() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:230.97px" class="cls_010"><span
            class="cls_010">var filter = {</span></div>
    <div style="position:absolute;left:121.68px;top:243.57px" class="cls_010"><span class="cls_010">'itemName' : 'Sports Watch1',</span>
    </div>
    <div style="position:absolute;left:121.68px;top:256.18px" class="cls_010"><span class="cls_010">'price': 100</span>
    </div>
    <div style="position:absolute;left:111.61px;top:268.79px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:294.00px" class="cls_010"><span class="cls_010">CatalogItem.find(filter, (error, result) => {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:306.60px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:319.21px" class="cls_010"><span class="cls_010">consoloe.log('Error occured');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:331.81px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">console.log('Results found:'+ result.length);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:357.03px" class="cls_010"><span
            class="cls_010">console.log(result);</span></div>
    <div style="position:absolute;left:121.68px;top:369.63px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:382.24px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:394.84px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:451.57px" class="cls_002"><span class="cls_002">Here is how to use the model in order to query for documents</span>
    </div>
    <div style="position:absolute;left:87.54px;top:468.38px" class="cls_002"><span class="cls_002">representing a sports watch belonging to the </span><span
            class="cls_008">Watches</span><span class="cls_002"> group named</span></div>
    <div style="position:absolute;left:87.54px;top:485.19px" class="cls_008"><span class="cls_008">Sports Watches</span><span
            class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:529.31px" class="cls_010"><span class="cls_010">db.once('open', function() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:541.91px" class="cls_010"><span
            class="cls_010">var filter = {</span></div>
    <div style="position:absolute;left:121.68px;top:554.52px" class="cls_010"><span class="cls_010">'itemName' : 'Sports Watch1',</span>
    </div>
    <div style="position:absolute;left:121.68px;top:567.12px" class="cls_010"><span class="cls_010">'price': 100</span>
    </div>
    <div style="position:absolute;left:111.61px;top:579.73px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:592.34px" class="cls_010"><span class="cls_010">CatalogItem.findOne(filter, (error, result) => {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:604.94px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:617.55px" class="cls_010"><span class="cls_010">consoloe.log('Error occurred');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:630.15px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:642.76px" class="cls_010"><span
            class="cls_010">console.log(result);</span></div>
    <div style="position:absolute;left:121.68px;top:655.36px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:667.97px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:680.58px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:712.09px" class="cls_002"><span class="cls_002">The model also exposes a </span><span
            class="cls_008">findOne</span><span class="cls_002"> function, a convenient way of</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:105524px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background125.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">finding an object by its unique index and then performing some</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">data manipulation on it, that is, for delete or update operations. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">following example deletes an item:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:181.95px" class="cls_010"><span class="cls_010">CatalogItem.findOne({itemId: 1 }, (error, data) => {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:194.55px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:207.16px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:121.68px;top:219.76px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:111.61px;top:232.37px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:244.97px" class="cls_010"><span class="cls_010">if (!data) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:257.58px" class="cls_010"><span class="cls_010">console.log('not found');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:270.19px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:121.68px;top:282.79px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:295.40px" class="cls_010"><span class="cls_010">data.remove(function(error){</span>
    </div>
    <div style="position:absolute;left:141.82px;top:308.00px" class="cls_010"><span class="cls_010">if (!error) { data.remove();}</span>
    </div>
    <div style="position:absolute;left:141.82px;top:320.61px" class="cls_010"><span class="cls_010">else { console.log(error);}</span>
    </div>
    <div style="position:absolute;left:141.82px;top:333.22px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:131.75px;top:345.82px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:358.43px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:106.58px;top:371.03px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:106375px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background126.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Testing a Mongoose model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">with Mocha</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Mocha is one of the most popular testing frameworks for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">JavaScript; its main goal is to provide an easy way to test</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">asynchronous JavaScript code. Let's install Mocha globally so that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">we can make it available to any Node.js application that we may</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">develop in the future:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:347.22px" class="cls_010"><span
            class="cls_010">npm install -g mocha</span></div>
    <div style="position:absolute;left:87.54px;top:378.74px" class="cls_002"><span class="cls_002">We will also need an assertion library that can be used together with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:395.54px" class="cls_002"><span class="cls_002">Mocha. The assertion library provides functions for validating</span>
    </div>
    <div style="position:absolute;left:87.54px;top:412.35px" class="cls_002"><span class="cls_002">actual values, against expected ones, when they are not equal, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:429.16px" class="cls_002"><span class="cls_002">assertion library will cause test failure.  </span><span
            class="cls_008">Should.js</span><span class="cls_002"> assertion library</span></div>
    <div style="position:absolute;left:87.54px;top:445.97px" class="cls_002"><span class="cls_002">module is easy to use and it will be our choice, so let's install it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:462.77px" class="cls_002"><span class="cls_002">globally too:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:506.90px" class="cls_010"><span class="cls_010">npm install -g should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:538.41px" class="cls_002"><span class="cls_002">Now that we have our testing modules installed, we need to specify</span>
    </div>
    <div style="position:absolute;left:87.54px;top:555.22px" class="cls_002"><span class="cls_002">our </span><span
            class="cls_008">testcase</span><span class="cls_002"> file path in the </span><span class="cls_008">package.json</span><span
            class="cls_002"> file. Let's modify it by adding a</span></div>
    <div style="position:absolute;left:87.54px;top:572.03px" class="cls_008"><span class="cls_008">test</span><span
            class="cls_002"> element pointing to Mocha and the </span><span class="cls_008">testcase</span><span
            class="cls_002"> file in the script</span></div>
    <div style="position:absolute;left:87.54px;top:588.83px" class="cls_002"><span class="cls_002">node:</span></div>
    <div style="position:absolute;left:101.55px;top:632.95px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:101.55px;top:645.56px" class="cls_010"><span
            class="cls_010">"name": "chapter4",</span></div>
    <div style="position:absolute;left:101.55px;top:658.17px" class="cls_010"><span
            class="cls_010">"version": "0.0.0",</span></div>
    <div style="position:absolute;left:101.55px;top:670.77px" class="cls_010"><span
            class="cls_010">"private": true,</span></div>
    <div style="position:absolute;left:101.55px;top:683.38px" class="cls_010"><span class="cls_010">"scripts": {</span>
    </div>
    <div style="position:absolute;left:101.55px;top:695.98px" class="cls_010"><span class="cls_010">"start": "node ./bin/www",</span>
    </div>
    <div style="position:absolute;left:101.55px;top:708.59px" class="cls_010"><span class="cls_010">"test": "mocha test/model-test.js"</span>
    </div>
    <div style="position:absolute;left:106.58px;top:721.19px" class="cls_010"><span class="cls_010">},</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:107226px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background127.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span
            class="cls_010">"dependencies": {</span></div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">"body-parser": "~1.13.2",</span>
    </div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">"cookie-parser": "~1.3.5",</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span
            class="cls_010">"debug": "~2.2.0",</span></div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">"express": "~4.16.0",</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span
            class="cls_010">"jade": "~1.11.0",</span></div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span
            class="cls_010">"morgan": "~1.6.1",</span></div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">"serve-favicon": "~2.3.0"</span>
    </div>
    <div style="position:absolute;left:106.58px;top:205.76px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:249.88px" class="cls_002"><span class="cls_002">This will tell the npm package manager to trigger Mocha when the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_008"><span class="cls_008">npm</span><span
            class="cls_002"> test is executed.</span></div>
    <div style="position:absolute;left:87.54px;top:301.00px" class="cls_002"><span class="cls_002">Automation of Mongoose tests must not be affected by the current</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.81px" class="cls_002"><span class="cls_002">state of the database. To ensure that the results are predictable at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:334.62px" class="cls_002"><span class="cls_002">each test run, we need to ensure that the database state is exactly as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:351.42px" class="cls_002"><span class="cls_002">we would expect it. We will implement a module called </span><span
            class="cls_008">prepare.js</span><span class="cls_002"> in</span></div>
    <div style="position:absolute;left:87.54px;top:368.23px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">test</span><span class="cls_002"> directory. It will clear the database before each test run:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:412.35px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:424.96px" class="cls_010"><span class="cls_010">beforeEach(function (done) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:437.56px" class="cls_010"><span class="cls_010">function clearDatabase() {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:450.17px" class="cls_010"><span class="cls_010">for (var i in mongoose.connection.collections) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:462.77px" class="cls_010"><span class="cls_010">mongoose.connection.collections[i].remove(function()</span>
    </div>
    <div style="position:absolute;left:131.75px;top:475.38px" class="cls_010"><span class="cls_010">{});</span></div>
    <div style="position:absolute;left:121.68px;top:487.99px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:500.59px" class="cls_010"><span
            class="cls_010">return done();</span></div>
    <div style="position:absolute;left:111.61px;top:513.20px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:525.80px" class="cls_010"><span class="cls_010">if (mongoose.connection.readyState === 0) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:538.41px" class="cls_010"><span class="cls_010">mongoose.connect(config.db.test, function (err) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:551.02px" class="cls_010"><span class="cls_010">if (err) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:563.62px" class="cls_010"><span class="cls_010">throw err;</span>
    </div>
    <div style="position:absolute;left:131.75px;top:576.23px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:588.83px" class="cls_010"><span class="cls_010">return clearDatabase();</span>
    </div>
    <div style="position:absolute;left:121.68px;top:601.44px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:614.04px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:626.65px" class="cls_010"><span class="cls_010">return clearDatabase();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:639.26px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:651.86px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:664.47px" class="cls_010"><span class="cls_010">afterEach(function (done) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:677.07px" class="cls_010"><span class="cls_010">mongoose.disconnect();</span>
    </div>
    <div style="position:absolute;left:111.61px;top:689.68px" class="cls_010"><span
            class="cls_010">return done();</span></div>
    <div style="position:absolute;left:101.55px;top:702.29px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:108077px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background128.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Next, we will implement a Mocha test, which creates a new item:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:148.33px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:160.94px" class="cls_010"><span class="cls_010">var should = require('should');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:173.54px" class="cls_010"><span class="cls_010">var prepare = require('./prepare');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:198.75px" class="cls_010"><span class="cls_010">const model = require('../model/item.js');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:211.36px" class="cls_010"><span class="cls_010">const CatalogItem = model.CatalogItem;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:236.57px" class="cls_010"><span class="cls_010">mongoose.createConnection('mongodb://localhost/catalog');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:261.78px" class="cls_010"><span class="cls_010">describe('CatalogItem: models', function () {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:274.39px" class="cls_010"><span class="cls_010">describe('#create()', function () {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:286.99px" class="cls_010"><span class="cls_010">it('Should create a new CatalogItem', function (done) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:312.21px" class="cls_010"><span class="cls_010">var item = {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:324.81px" class="cls_010"><span
            class="cls_010">"itemId": "1",</span></div>
    <div style="position:absolute;left:141.82px;top:337.42px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:350.02px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:141.82px;top:362.63px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:141.82px;top:375.23px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:151.88px;top:387.84px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:400.45px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:141.82px;top:413.05px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:131.75px;top:438.26px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:131.75px;top:463.48px" class="cls_010"><span class="cls_010">CatalogItem.create(item, function (err, createdItem) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:476.08px" class="cls_010"><span class="cls_010">// Check that no error occured</span>
    </div>
    <div style="position:absolute;left:141.82px;top:488.69px" class="cls_010"><span class="cls_010">should.not.exist(err);</span>
    </div>
    <div style="position:absolute;left:141.82px;top:501.29px" class="cls_010"><span class="cls_010">// Assert that the returned item has is what we expect</span>
    </div>
    <div style="position:absolute;left:141.82px;top:526.50px" class="cls_010"><span class="cls_010">createdItem.itemId.should.equal('1');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:539.11px" class="cls_010"><span class="cls_010">createdItem.itemName.should.equal('Sports Watch');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:551.72px" class="cls_010"><span class="cls_010">createdItem.price.should.equal(100);</span>
    </div>
    <div style="position:absolute;left:141.82px;top:564.32px" class="cls_010"><span class="cls_010">createdItem.currency.should.equal('EUR');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:576.93px" class="cls_010"><span class="cls_010">createdItem.categories[0].should.equal('Watches');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:589.53px" class="cls_010"><span class="cls_010">createdItem.categories[1].should.equal('Sports Watches');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:602.14px" class="cls_010"><span class="cls_010">//Notify mocha that the test has completed</span>
    </div>
    <div style="position:absolute;left:141.82px;top:614.75px" class="cls_010"><span class="cls_010">done();</span></div>
    <div style="position:absolute;left:131.75px;top:627.35px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:639.96px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:652.56px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:665.17px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:696.68px" class="cls_002"><span class="cls_002">Executing the </span><span
            class="cls_008">npm test</span><span class="cls_002"> now results in a call against the MongoDB</span></div>
    <div style="position:absolute;left:87.54px;top:713.49px" class="cls_002"><span class="cls_002">database creating an item out of the passed JSON object. After</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:108928px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background129.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">insertion, the assert callback will be executing, ensuring that values</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">passed to by Mongoose are the same as the returned ones from the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">database. Give it a try and break the test—simply change the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">expected value in the assert with an invalid one—you will see the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">test failing.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:109779px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background130.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Creating a user-defined model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">around a Mongoose model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">After seeing how a model works, it is time to create a user-defined</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">module that wraps all CRUD operations for the catalog. Since we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">intend to use that module in a RESTful web application, it seems</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">logical to leave the schema definition and the model creation</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">outside the module and have them provided as arguments of each</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">module function. The same schema definition is used in the unit</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">tests, ensuring stability of the module. Now let's add an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">implementation for each CRUD function, starting with a </span><span
            class="cls_008">remove()</span></div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">function. It looks up an item based on its </span><span
            class="cls_008">id</span><span class="cls_002"> and deletes it from the</span></div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">database, if it exists:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:431.26px" class="cls_010"><span class="cls_010">exports.remove = function (request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:443.87px" class="cls_010"><span class="cls_010">console.log('Deleting item with id: '</span>
    </div>
    <div style="position:absolute;left:317.99px;top:443.87px" class="cls_010"><span class="cls_010">+ request.body.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:456.47px" class="cls_010"><span class="cls_010">CatalogItem.findOne({itemId: request.params.itemId}, function(error, data)</span>
    </div>
    <div style="position:absolute;left:101.55px;top:469.08px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:481.68px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:494.29px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:151.88px;top:506.90px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:519.50px" class="cls_010"><span class="cls_010">response.writeHead(500, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:172.02px;top:532.11px" class="cls_010"><span class="cls_010">response.end('Internal server error');</span>
    </div>
    <div style="position:absolute;left:151.88px;top:544.71px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:151.88px;top:557.32px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:131.75px;top:569.92px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:582.53px" class="cls_010"><span class="cls_010">if (!data) {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:595.14px" class="cls_010"><span class="cls_010">console.log('Item not found');</span>
    </div>
    <div style="position:absolute;left:172.02px;top:607.74px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:192.15px;top:620.35px" class="cls_010"><span class="cls_010">response.writeHead(404, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:192.15px;top:632.95px" class="cls_010"><span class="cls_010">response.end('Not Found');</span>
    </div>
    <div style="position:absolute;left:172.02px;top:645.56px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:172.02px;top:658.17px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:151.88px;top:670.77px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:683.38px" class="cls_010"><span class="cls_010">data.remove(function(error){</span>
    </div>
    <div style="position:absolute;left:192.15px;top:695.98px" class="cls_010"><span class="cls_010">if (!error) {</span>
    </div>
    <div style="position:absolute;left:212.29px;top:708.59px" class="cls_010"><span
            class="cls_010">data.remove();</span></div>
    <div style="position:absolute;left:212.29px;top:721.19px" class="cls_010"><span class="cls_010">response.json({'Status': 'Successfully deleted'});</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:110630px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background131.jpg" width=595 height=841></div>
    <div style="position:absolute;left:192.15px;top:104.91px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:192.15px;top:117.51px" class="cls_010"><span class="cls_010">else {</span></div>
    <div style="position:absolute;left:212.29px;top:130.12px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:212.29px;top:142.73px" class="cls_010"><span class="cls_010">response.writeHead(500, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:212.29px;top:155.33px" class="cls_010"><span class="cls_010">response.end('Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:192.15px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:172.02px;top:180.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:151.88px;top:193.15px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:223.96px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:236.57px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:249.18px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:280.69px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">saveItem()</span><span class="cls_002"> function takes the request body payload as an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:297.50px" class="cls_002"><span class="cls_002">argument. A valid update request will contain the new state of an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:314.31px" class="cls_008"><span class="cls_008">item</span><span
            class="cls_002"> object, represented in JSON format. First, the </span><span
            class="cls_008">itemId</span><span class="cls_002"> is parsed</span></div>
    <div style="position:absolute;left:87.54px;top:331.11px" class="cls_002"><span class="cls_002">out of the JSON object. Next, lookup is done. If an item exists, it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:347.92px" class="cls_002"><span class="cls_002">gets updated. Otherwise, a new one gets created:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:392.04px" class="cls_010"><span class="cls_010">exports.saveItem = function(request, response)</span>
    </div>
    <div style="position:absolute;left:101.55px;top:404.65px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:417.25px" class="cls_010"><span class="cls_010">var item = toItem(request.body);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:429.86px" class="cls_010"><span class="cls_010">item.save((error) => {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:442.47px" class="cls_010"><span class="cls_010">if (!error) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:455.07px" class="cls_010"><span class="cls_010">item.save();</span>
    </div>
    <div style="position:absolute;left:131.75px;top:467.68px" class="cls_010"><span class="cls_010">response.writeHead(201, contentTypeJson);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:480.28px" class="cls_010"><span class="cls_010">response.end(JSON.stringify(request.body));</span>
    </div>
    <div style="position:absolute;left:121.68px;top:492.89px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:505.49px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:131.75px;top:518.10px" class="cls_010"><span class="cls_010">CatalogItem.findOne({itemId : item.itemId</span>
    </div>
    <div style="position:absolute;left:358.26px;top:518.10px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:131.75px;top:530.71px" class="cls_010"><span
            class="cls_010">(error, result) => {</span></div>
    <div style="position:absolute;left:141.82px;top:543.31px" class="cls_010"><span class="cls_010">console.log('Check if such an item exists');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:555.92px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:182.08px;top:568.52px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:182.08px;top:581.13px" class="cls_010"><span class="cls_010">response.writeHead(500, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:182.08px;top:593.74px" class="cls_010"><span class="cls_010">response.end('Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:606.34px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:182.08px;top:618.95px" class="cls_010"><span
            class="cls_010">if (!result) {</span></div>
    <div style="position:absolute;left:202.22px;top:631.55px" class="cls_010"><span class="cls_010">console.log('Item does not exist. Creating a new one');</span>
    </div>
    <div style="position:absolute;left:202.22px;top:644.16px" class="cls_010"><span class="cls_010">item.save();</span>
    </div>
    <div style="position:absolute;left:202.22px;top:656.76px" class="cls_010"><span class="cls_010">response.writeHead(201, contentTypeJson);</span>
    </div>
    <div style="position:absolute;left:202.22px;top:669.37px" class="cls_010"><span class="cls_010">response.</span>
    </div>
    <div style="position:absolute;left:202.22px;top:681.98px" class="cls_010"><span class="cls_010">response.end(JSON.stringify(request.body));</span>
    </div>
    <div style="position:absolute;left:182.08px;top:694.58px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:707.19px" class="cls_010"><span class="cls_010">console.log('Updating existing item');</span>
    </div>
    <div style="position:absolute;left:202.22px;top:719.79px" class="cls_010"><span class="cls_010">result.itemId = item.itemId;</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:111481px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background132.jpg" width=595 height=841></div>
    <div style="position:absolute;left:202.22px;top:104.83px" class="cls_010"><span class="cls_010">result.itemName = item.itemName;</span>
    </div>
    <div style="position:absolute;left:202.22px;top:117.44px" class="cls_010"><span class="cls_010">result.price = item.price;</span>
    </div>
    <div style="position:absolute;left:202.22px;top:130.04px" class="cls_010"><span class="cls_010">result.currency = item.currency;</span>
    </div>
    <div style="position:absolute;left:202.22px;top:142.65px" class="cls_010"><span class="cls_010">result.categories = item.categories;</span>
    </div>
    <div style="position:absolute;left:202.22px;top:155.26px" class="cls_010"><span
            class="cls_010">result.save();</span></div>
    <div style="position:absolute;left:202.22px;top:167.86px" class="cls_010"><span class="cls_010">response.json(JSON.stringify(result));</span>
    </div>
    <div style="position:absolute;left:182.08px;top:180.47px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:156.92px;top:193.07px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:205.76px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:236.57px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:249.18px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:261.78px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:293.30px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">toItem()</span><span class="cls_002"> function converts the JSON payload to a </span><span
            class="cls_008">CatalogItem</span><span class="cls_002"> model</span></div>
    <div style="position:absolute;left:87.54px;top:310.10px" class="cls_002"><span class="cls_002">instance, that is, an item document:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:354.22px" class="cls_010"><span class="cls_010">function toItem(body) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:366.83px" class="cls_010"><span class="cls_010">return new CatalogItem({</span>
    </div>
    <div style="position:absolute;left:141.82px;top:379.44px" class="cls_010"><span
            class="cls_010">itemId: body.itemId,</span></div>
    <div style="position:absolute;left:141.82px;top:392.04px" class="cls_010"><span class="cls_010">itemName: body.itemName,</span>
    </div>
    <div style="position:absolute;left:141.82px;top:404.65px" class="cls_010"><span
            class="cls_010">price: body.price,</span></div>
    <div style="position:absolute;left:141.82px;top:417.25px" class="cls_010"><span class="cls_010">currency: body.currency,</span>
    </div>
    <div style="position:absolute;left:141.82px;top:429.86px" class="cls_010"><span class="cls_010">categories: body.categories</span>
    </div>
    <div style="position:absolute;left:121.68px;top:442.47px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:455.07px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:486.59px" class="cls_002"><span class="cls_002">We will also need to provide a means of querying data, so let's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_002"><span class="cls_002">implement a function that queries for all items in a category:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:547.51px" class="cls_010"><span class="cls_010">exports.findItemsByCategory = function (category, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:560.12px" class="cls_010"><span class="cls_010">CatalogItem.find({categories: category}, function(error, result) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:572.73px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:585.33px" class="cls_010"><span class="cls_010">console.error(error);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:597.94px" class="cls_010"><span class="cls_010">response.writeHead(500, { 'Content-Type': 'text/plain' });</span>
    </div>
    <div style="position:absolute;left:161.95px;top:610.54px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:623.15px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:635.76px" class="cls_010"><span
            class="cls_010">if (!result) {</span></div>
    <div style="position:absolute;left:182.08px;top:648.36px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:660.97px" class="cls_010"><span class="cls_010">response.writeHead(404, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:202.22px;top:673.57px" class="cls_010"><span class="cls_010">response.end('Not Found');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:686.18px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:182.08px;top:698.78px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:161.95px;top:711.39px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:112332px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background133.jpg" width=595 height=841></div>
    <div style="position:absolute;left:161.95px;top:117.44px" class="cls_010"><span class="cls_010">if (response != null){</span>
    </div>
    <div style="position:absolute;left:182.08px;top:130.04px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'application/json');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:142.65px" class="cls_010"><span class="cls_010">response.send(result);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:155.26px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:167.86px" class="cls_010"><span
            class="cls_010">console.log(result);</span></div>
    <div style="position:absolute;left:141.82px;top:180.47px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:193.07px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:237.27px" class="cls_002"><span
            class="cls_002">Similar to </span><span class="cls_008">findItemsByCategory</span><span class="cls_002">, the following is a function that finds an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:254.08px" class="cls_002"><span
            class="cls_002">item by its ID:</span></div>
    <div style="position:absolute;left:101.55px;top:298.20px" class="cls_010"><span class="cls_010">exports.findItemById = function (itemId, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:310.80px" class="cls_010"><span class="cls_010">CatalogItem.findOne({itemId: itemId}, function(error, result) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:323.41px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:336.02px" class="cls_010"><span class="cls_010">console.error(error);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:348.62px" class="cls_010"><span class="cls_010">response.writeHead(500, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:361.23px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:373.83px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:386.44px" class="cls_010"><span
            class="cls_010">if (!result) {</span></div>
    <div style="position:absolute;left:182.08px;top:399.05px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:411.65px" class="cls_010"><span class="cls_010">response.writeHead(404, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:202.22px;top:424.26px" class="cls_010"><span class="cls_010">response.end('Not Found');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:436.86px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:182.08px;top:449.47px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:161.95px;top:462.07px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:487.29px" class="cls_010"><span class="cls_010">if (response != null){</span>
    </div>
    <div style="position:absolute;left:182.08px;top:499.89px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'application/json');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:512.50px" class="cls_010"><span class="cls_010">response.send(result);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:525.10px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:537.71px" class="cls_010"><span
            class="cls_010">console.log(result);</span></div>
    <div style="position:absolute;left:141.82px;top:550.32px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:562.92px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:575.53px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">Finally, there's a function that lists all the catalog items stored in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:623.85px" class="cls_002"><span class="cls_002">the database. It uses the Mongoose model </span><span
            class="cls_008">find</span><span class="cls_002"> function that looks</span></div>
    <div style="position:absolute;left:87.54px;top:640.66px" class="cls_002"><span class="cls_002">for all documents of the model, and uses its first arguments as a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:657.47px" class="cls_002"><span class="cls_002">filter. We want a function that returns all existing documents; that's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:674.27px" class="cls_002"><span class="cls_002">why we provide an empty object. This will return all available items.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:691.08px" class="cls_002"><span class="cls_002">The results are available in the </span><span
            class="cls_008">callback</span><span class="cls_002"> function, which is the second</span></div>
    <div style="position:absolute;left:87.54px;top:707.89px" class="cls_002"><span class="cls_002">argument of the model's </span><span
            class="cls_008">find</span><span class="cls_002"> function:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:113183px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background134.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">exports.findAllItems = function (response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:126.62px" class="cls_010"><span class="cls_010">CatalogItem.find({}, (error, result) => {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:139.23px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:151.83px" class="cls_010"><span class="cls_010">console.error(error);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:164.44px" class="cls_010"><span class="cls_010">return null;</span>
    </div>
    <div style="position:absolute;left:141.82px;top:177.04px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:189.65px" class="cls_010"><span class="cls_010">if (result != null) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:202.25px" class="cls_010"><span class="cls_010">response.json(result);</span>
    </div>
    <div style="position:absolute;left:141.82px;top:214.86px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:227.47px" class="cls_010"><span
            class="cls_010">response.json({});</span></div>
    <div style="position:absolute;left:121.68px;top:240.07px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:252.68px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:265.28px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:296.80px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">catalog</span><span class="cls_002"> module will be the foundation of our RESTful service. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:313.61px" class="cls_002"><span class="cls_002">is responsible for all data manipulation operations, as well as for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:330.41px" class="cls_002"><span class="cls_002">different kinds of queries. It encapsulates all operations in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:347.22px" class="cls_002"><span class="cls_002">reusable way.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:114034px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background135.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Wiring up a NoSQL database</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span
            class="cls_004">module to Express</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Now we have automated tests for the model and a user-defined</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">module which makes use of them. This ensures the stability of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">module and makes it ready for wider adoption.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.80px" class="cls_002"><span class="cls_002">It is time to build a new Express-based application and add a route,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:320.61px" class="cls_002"><span class="cls_002">exposing the new module to it:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:364.73px" class="cls_010"><span class="cls_010">const express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:377.34px" class="cls_010"><span class="cls_010">const router = express.Router();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:402.55px" class="cls_010"><span class="cls_010">const catalog = require('../modules/catalog');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:415.15px" class="cls_010"><span class="cls_010">const model = require('../model/item.js');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:440.36px" class="cls_010"><span class="cls_010">router.get('/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:452.97px" class="cls_010"><span class="cls_010">catalog.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:465.58px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:490.79px" class="cls_010"><span class="cls_010">router.get('/item/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:503.39px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:516.00px" class="cls_010"><span class="cls_010">catalog.findItemById(request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:528.61px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:553.82px" class="cls_010"><span class="cls_010">router.get('/:categoryId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:566.42px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:579.03px" class="cls_010"><span class="cls_010">catalog.findItemsByCategory(request.params.categoryId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:591.63px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:616.85px" class="cls_010"><span class="cls_010">router.post('/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:629.45px" class="cls_010"><span class="cls_010">console.log('Saving item using POST method);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:642.06px" class="cls_010"><span class="cls_010">catalog.saveItem(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:654.66px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:679.88px" class="cls_010"><span class="cls_010">router.put('/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:692.48px" class="cls_010"><span class="cls_010">console.log('Saving item using PUT method');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:705.09px" class="cls_010"><span class="cls_010">catalog.saveItem(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:717.69px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:114885px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background136.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">router.delete('/item/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:130.12px" class="cls_010"><span class="cls_010">console.log('Deleting item with id: request.params.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">catalog.remove(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span class="cls_010">module.exports = router;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:212.06px" class="cls_002"><span class="cls_002">To sum up, we routed each function of the catalog data service</span>
    </div>
    <div style="position:absolute;left:87.54px;top:228.87px" class="cls_002"><span class="cls_002">module to an operation of a RESTful service:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:268.78px" class="cls_008"><span class="cls_008">GET /catalog/item/:itemId</span><span
            class="cls_002">: This calls </span><span class="cls_008">catalog.findItemById()</span></div>
    <div style="position:absolute;left:133.06px;top:298.90px" class="cls_008"><span class="cls_008">POST /catalog</span><span
            class="cls_002">: This calls </span><span class="cls_008">catalog.saveItem()</span></div>
    <div style="position:absolute;left:133.06px;top:329.01px" class="cls_008"><span
            class="cls_008">PUT /catalog</span><span class="cls_002">: This calls </span><span class="cls_008">catalog.saveItem()</span>
    </div>
    <div style="position:absolute;left:133.06px;top:359.13px" class="cls_008"><span class="cls_008">DELETE / catalog/item/:id</span><span
            class="cls_002">: This calls </span><span class="cls_008">catalog.remove()</span></div>
    <div style="position:absolute;left:133.06px;top:389.24px" class="cls_008"><span class="cls_008">GET /catalog/:category</span><span
            class="cls_002">: This calls </span><span class="cls_008">catalog.findItemsByCategory()</span></div>
    <div style="position:absolute;left:133.06px;top:419.35px" class="cls_008"><span class="cls_008">GET /catalog/</span><span
            class="cls_002">: This calls </span><span class="cls_008">catalog.findAllItems()</span></div>
    <div style="position:absolute;left:87.54px;top:466.28px" class="cls_002"><span class="cls_002">As we have our operations exposed, we are ready to perform some</span>
    </div>
    <div style="position:absolute;left:87.54px;top:483.08px" class="cls_002"><span class="cls_002">more serious REST testing. Let's start Postman and test the newly</span>
    </div>
    <div style="position:absolute;left:87.54px;top:499.89px" class="cls_002"><span
            class="cls_002">exposed endpoints:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:115736px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background137.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:517.40px" class="cls_002"><span class="cls_002">Spend some time testing each operation thoroughly. This will help</span>
    </div>
    <div style="position:absolute;left:87.54px;top:534.21px" class="cls_002"><span class="cls_002">you gain confidence that the catalog data service module really</span>
    </div>
    <div style="position:absolute;left:87.54px;top:551.02px" class="cls_002"><span class="cls_002">works, and also will make you more comfortable with how HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:567.82px" class="cls_002"><span class="cls_002">responses are served and read. As a RESTful API developer, you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:584.63px" class="cls_002"><span class="cls_002">should be able to read HTTP dumps, which show different request</span>
    </div>
    <div style="position:absolute;left:87.54px;top:601.44px" class="cls_002"><span class="cls_002">payloads and status codes, fluently.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:116587px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background138.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Self-test questions</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Go through the following questions:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:244.97px" class="cls_002"><span class="cls_002">How would you perform a query with Mongoose for a single</span>
    </div>
    <div style="position:absolute;left:133.06px;top:265.98px" class="cls_002"><span class="cls_002">value of a multivalued attribute?</span>
    </div>
    <div style="position:absolute;left:133.06px;top:296.10px" class="cls_002"><span class="cls_002">Define a strategy for testing a Node.js module manipulating</span>
    </div>
    <div style="position:absolute;left:133.06px;top:317.11px" class="cls_002"><span
            class="cls_002">a NoSQL database.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:117438px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background139.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, we looked at MongoDB, a powerful document-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">oriented database. We utilized it and made use of Mocha to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">implement an automated test for the database layer. Now it is time</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">to build a fully-fledged RESTful web service. In the next chapter, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">will extend the user-defined module by including support for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">searching via document attributes, and add filtering and pagination</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">capabilities that will finally evolve into full-fledged RESTful service</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span
            class="cls_002">implementation.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:118289px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background140.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Restful API Design Guidelines</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In the previous chapter, we implemented a catalog module that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">exposed functions for data manipulation for the items in the catalog</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">application. These functions made use of the </span><span
            class="cls_008">express.js</span><span class="cls_002"> request</span></div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">object to parse the incoming data in the body and then to carry out</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">the appropriate database operation. Each function populated</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">the response object with a relevant status code and response body</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">payload, if needed. Finally, we bound each function to a route,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">accepting HTTP requests.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">Now, it's time to look closer into the URLs of the routes and into the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">returned HTTP status codes per operation.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">In this chapter, we will cover the following topics:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:448.07px" class="cls_002"><span class="cls_002">Endpoint URLs and HTTP status codes best practices</span>
    </div>
    <div style="position:absolute;left:133.06px;top:478.18px" class="cls_002"><span class="cls_002">Extensibility and versioning</span>
    </div>
    <div style="position:absolute;left:133.06px;top:508.30px" class="cls_002"><span class="cls_002">Linked data</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:119140px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background141.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Endpoint URLs and HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">status codes best practices</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Each RESTful API operation is a combination of an HTTP request</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">against a URL and an appropriate HTTP method.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.99px" class="cls_002"><span class="cls_002">When executed, each operation will return a status code, indicating</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.80px" class="cls_002"><span class="cls_002">whether the invocation has been successful or not. Successful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:320.61px" class="cls_002"><span class="cls_002">invocation is indicated by a HTTP 2XX status code, while</span>
    </div>
    <div style="position:absolute;left:87.54px;top:337.42px" class="cls_002"><span class="cls_002">operations that are not executed correctly indicate this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_002"><span class="cls_002">with erroneous status code—4XX if the error is at client side, or 5xx</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">when the server fails to process a valid request.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:405.35px" class="cls_002"><span class="cls_002">Having a well-specified API is vital for its adoption. Such</span>
    </div>
    <div style="position:absolute;left:87.54px;top:422.16px" class="cls_002"><span class="cls_002">specification should not only completely enumerate the status codes</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.96px" class="cls_002"><span class="cls_002">of each operation, but should also specify the expected data format,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.77px" class="cls_002"><span class="cls_002">that is, its supported media types.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:490.09px" class="cls_002"><span class="cls_002">The following table defines how the Express.js Router will expose</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.90px" class="cls_002"><span class="cls_002">the API operations, and it should serve as a reference specification</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.70px" class="cls_002"><span class="cls_002">for it:</span></div>
    <div style="position:absolute;left:154.77px;top:565.02px" class="cls_012"><span class="cls_012">M</span></div>
    <div style="position:absolute;left:95.24px;top:581.13px" class="cls_012"><span class="cls_012">M</span></div>
    <div style="position:absolute;left:154.77px;top:581.13px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:475.52px;top:588.83px" class="cls_012"><span class="cls_012">Sta</span></div>
    <div style="position:absolute;left:95.24px;top:597.24px" class="cls_012"><span class="cls_012">et</span></div>
    <div style="position:absolute;left:154.77px;top:597.24px" class="cls_012"><span class="cls_012">di</span></div>
    <div style="position:absolute;left:122.56px;top:604.94px" class="cls_012"><span class="cls_012">U</span></div>
    <div style="position:absolute;left:475.52px;top:604.94px" class="cls_012"><span class="cls_012">tus</span></div>
    <div style="position:absolute;left:95.24px;top:613.34px" class="cls_012"><span class="cls_012">h</span></div>
    <div style="position:absolute;left:154.77px;top:613.34px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:182.08px;top:613.34px" class="cls_012"><span class="cls_012">Description</span>
    </div>
    <div style="position:absolute;left:122.56px;top:621.05px" class="cls_012"><span class="cls_012">RI</span></div>
    <div style="position:absolute;left:475.52px;top:621.05px" class="cls_012"><span class="cls_012">Co</span></div>
    <div style="position:absolute;left:95.24px;top:629.45px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:154.77px;top:629.45px" class="cls_012"><span class="cls_012">ty</span></div>
    <div style="position:absolute;left:475.52px;top:637.16px" class="cls_012"><span class="cls_012">de</span></div>
    <div style="position:absolute;left:95.24px;top:645.56px" class="cls_012"><span class="cls_012">d</span></div>
    <div style="position:absolute;left:154.77px;top:645.56px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:154.77px;top:661.67px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:475.52px;top:709.29px" class="cls_012"><span class="cls_012">20</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:119991px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background142.jpg" width=595 height=841></div>
    <div style="position:absolute;left:154.77px;top:103.51px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:475.52px;top:104.21px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:154.77px;top:119.62px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:475.52px;top:121.02px" class="cls_012"><span class="cls_012">OK</span></div>
    <div style="position:absolute;left:154.77px;top:135.72px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:154.77px;top:151.83px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:475.52px;top:153.93px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:122.56px;top:158.83px" class="cls_012"><span class="cls_012">/c</span></div>
    <div style="position:absolute;left:95.24px;top:167.24px" class="cls_012"><span class="cls_012">G</span></div>
    <div style="position:absolute;left:154.77px;top:167.94px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:182.08px;top:167.24px" class="cls_012"><span class="cls_012">Returns all the items in the catalog.</span>
    </div>
    <div style="position:absolute;left:475.52px;top:170.74px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:122.56px;top:174.94px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:95.24px;top:183.35px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:154.77px;top:184.05px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:475.52px;top:187.55px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:122.56px;top:191.05px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:95.24px;top:199.45px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:154.77px;top:200.15px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:204.35px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:122.56px;top:207.16px" class="cls_012"><span class="cls_012">og</span></div>
    <div style="position:absolute;left:154.77px;top:216.26px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:475.52px;top:221.16px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:154.77px;top:232.37px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:475.52px;top:237.97px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:154.77px;top:248.48px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:475.52px;top:254.78px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:154.77px;top:264.58px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:271.59px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:288.39px" class="cls_012"><span class="cls_012">or</span></div>
    <div style="position:absolute;left:475.52px;top:352.12px" class="cls_012"><span class="cls_012">20</span></div>
    <div style="position:absolute;left:475.52px;top:368.93px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:475.52px;top:385.74px" class="cls_012"><span class="cls_012">OK,</span></div>
    <div style="position:absolute;left:475.52px;top:418.65px" class="cls_012"><span class="cls_012">404</span></div>
    <div style="position:absolute;left:154.77px;top:429.86px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:475.52px;top:435.46px" class="cls_012"><span class="cls_012">NO</span></div>
    <div style="position:absolute;left:122.56px;top:438.26px" class="cls_012"><span class="cls_012">/c</span></div>
    <div style="position:absolute;left:154.77px;top:445.97px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:122.56px;top:454.37px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:475.52px;top:452.27px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:154.77px;top:462.07px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:122.56px;top:470.48px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:475.52px;top:469.08px" class="cls_012"><span class="cls_012">FO</span></div>
    <div style="position:absolute;left:154.77px;top:478.18px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:122.56px;top:486.59px" class="cls_012"><span class="cls_012">og</span></div>
    <div style="position:absolute;left:475.52px;top:485.89px" class="cls_012"><span class="cls_012">UN</span></div>
    <div style="position:absolute;left:95.24px;top:494.29px" class="cls_012"><span class="cls_012">G</span></div>
    <div style="position:absolute;left:154.77px;top:494.29px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:182.08px;top:494.29px" class="cls_012"><span class="cls_012">Returns all items for the selected category.</span>
    </div>
    <div style="position:absolute;left:122.56px;top:502.69px" class="cls_012"><span class="cls_012">/{</span></div>
    <div style="position:absolute;left:475.52px;top:502.69px" class="cls_012"><span class="cls_012">D</span></div>
    <div style="position:absolute;left:95.24px;top:510.40px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:154.77px;top:510.40px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:122.56px;top:518.80px" class="cls_012"><span class="cls_012">ca</span></div>
    <div style="position:absolute;left:95.24px;top:526.50px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:154.77px;top:526.50px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:182.08px;top:526.50px" class="cls_012"><span class="cls_012">If the category does not exist, it returns 404.</span>
    </div>
    <div style="position:absolute;left:122.56px;top:534.91px" class="cls_012"><span class="cls_012">te</span></div>
    <div style="position:absolute;left:475.52px;top:535.61px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:154.77px;top:542.61px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:122.56px;top:551.02px" class="cls_012"><span class="cls_012">go</span></div>
    <div style="position:absolute;left:475.52px;top:552.42px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:154.77px;top:558.72px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:122.56px;top:567.12px" class="cls_012"><span class="cls_012">ryI</span></div>
    <div style="position:absolute;left:475.52px;top:569.22px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:154.77px;top:574.83px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:122.56px;top:583.23px" class="cls_012"><span class="cls_012">d}</span></div>
    <div style="position:absolute;left:475.52px;top:586.03px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:154.77px;top:590.93px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:602.84px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:475.52px;top:619.65px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:475.52px;top:636.45px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:475.52px;top:653.26px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:670.07px" class="cls_012"><span class="cls_012">or</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:120842px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background143.jpg" width=595 height=841></div>
    <div style="position:absolute;left:475.52px;top:104.21px" class="cls_012"><span class="cls_012">20</span></div>
    <div style="position:absolute;left:475.52px;top:121.02px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:475.52px;top:137.82px" class="cls_012"><span class="cls_012">OK,</span></div>
    <div style="position:absolute;left:475.52px;top:170.74px" class="cls_012"><span class="cls_012">404</span></div>
    <div style="position:absolute;left:154.77px;top:181.24px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:475.52px;top:187.55px" class="cls_012"><span class="cls_012">NO</span></div>
    <div style="position:absolute;left:154.77px;top:197.35px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:475.52px;top:204.36px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:122.56px;top:213.46px" class="cls_012"><span class="cls_012">/it</span></div>
    <div style="position:absolute;left:154.77px;top:213.46px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:475.52px;top:221.16px" class="cls_012"><span class="cls_012">FO</span></div>
    <div style="position:absolute;left:122.56px;top:229.57px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:154.77px;top:229.57px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:475.52px;top:237.97px" class="cls_012"><span class="cls_012">UN</span></div>
    <div style="position:absolute;left:95.24px;top:245.67px" class="cls_012"><span class="cls_012">G</span></div>
    <div style="position:absolute;left:122.56px;top:245.67px" class="cls_012"><span class="cls_012">m</span></div>
    <div style="position:absolute;left:154.77px;top:245.67px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:182.08px;top:245.67px" class="cls_012"><span class="cls_012">Returns a single item for the selected itemId.</span>
    </div>
    <div style="position:absolute;left:475.52px;top:254.78px" class="cls_012"><span class="cls_012">D</span></div>
    <div style="position:absolute;left:95.24px;top:261.78px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:122.56px;top:261.78px" class="cls_012"><span class="cls_012">/{i</span></div>
    <div style="position:absolute;left:154.77px;top:261.78px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:95.24px;top:277.89px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:122.56px;top:277.89px" class="cls_012"><span class="cls_012">te</span></div>
    <div style="position:absolute;left:154.77px;top:277.89px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:182.08px;top:277.89px" class="cls_012"><span class="cls_012">If there is no such item, it returns 404.</span>
    </div>
    <div style="position:absolute;left:475.52px;top:287.69px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:122.56px;top:294.00px" class="cls_012"><span class="cls_012">mI</span></div>
    <div style="position:absolute;left:154.77px;top:294.00px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:475.52px;top:304.50px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:122.56px;top:310.10px" class="cls_012"><span class="cls_012">d}</span></div>
    <div style="position:absolute;left:154.77px;top:310.10px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:475.52px;top:321.31px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:154.77px;top:326.21px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:475.52px;top:338.12px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:154.77px;top:342.32px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:354.93px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:475.52px;top:371.73px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:475.52px;top:388.54px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:475.52px;top:405.35px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:422.16px" class="cls_012"><span class="cls_012">or</span></div>
    <div style="position:absolute;left:475.52px;top:485.89px" class="cls_012"><span class="cls_012">201</span></div>
    <div style="position:absolute;left:475.52px;top:502.69px" class="cls_012"><span class="cls_012">Cre</span></div>
    <div style="position:absolute;left:475.52px;top:519.50px" class="cls_012"><span class="cls_012">ate</span></div>
    <div style="position:absolute;left:475.52px;top:536.31px" class="cls_012"><span class="cls_012">d</span></div>
    <div style="position:absolute;left:154.77px;top:550.32px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:154.77px;top:566.42px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:475.52px;top:569.22px" class="cls_012"><span class="cls_012">20</span></div>
    <div style="position:absolute;left:154.77px;top:582.53px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:475.52px;top:586.03px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:154.77px;top:598.64px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:182.08px;top:598.64px" class="cls_012"><span class="cls_012">Creates a new item; if an item with the same</span>
    </div>
    <div style="position:absolute;left:475.52px;top:602.84px" class="cls_012"><span class="cls_012">OK</span></div>
    <div style="position:absolute;left:95.24px;top:607.04px" class="cls_012"><span class="cls_012">P</span></div>
    <div style="position:absolute;left:122.56px;top:607.04px" class="cls_012"><span class="cls_012">/it</span></div>
    <div style="position:absolute;left:154.77px;top:614.75px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:182.08px;top:614.75px" class="cls_012"><span class="cls_012">identifier exists, it will be updated. When an</span>
    </div>
    <div style="position:absolute;left:95.24px;top:623.15px" class="cls_012"><span class="cls_012">O</span></div>
    <div style="position:absolute;left:122.56px;top:623.15px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:154.77px;top:630.85px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:182.08px;top:630.85px" class="cls_012"><span class="cls_012">item is created, a Location header is</span>
    </div>
    <div style="position:absolute;left:475.52px;top:635.76px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:95.24px;top:639.26px" class="cls_012"><span class="cls_012">S</span></div>
    <div style="position:absolute;left:122.56px;top:639.26px" class="cls_012"><span class="cls_012">m</span></div>
    <div style="position:absolute;left:154.77px;top:646.96px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:182.08px;top:646.96px" class="cls_012"><span class="cls_012">returned. It provides the URL where the</span>
    </div>
    <div style="position:absolute;left:475.52px;top:652.56px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:95.24px;top:655.36px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:122.56px;top:655.36px" class="cls_012"><span class="cls_012">/</span></div>
    <div style="position:absolute;left:154.77px;top:663.07px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:182.08px;top:663.07px" class="cls_012"><span class="cls_012">newly created item can be accessed.</span>
    </div>
    <div style="position:absolute;left:475.52px;top:669.37px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:154.77px;top:679.18px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:475.52px;top:686.18px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:154.77px;top:695.28px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:475.52px;top:702.99px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:154.77px;top:711.39px" class="cls_012"><span class="cls_012">n</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:121693px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background144.jpg" width=595 height=841></div>
    <div style="position:absolute;left:475.52px;top:104.21px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:475.52px;top:121.02px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:475.52px;top:137.82px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:154.63px" class="cls_012"><span class="cls_012">or</span></div>
    <div style="position:absolute;left:475.52px;top:218.36px" class="cls_012"><span class="cls_012">201</span></div>
    <div style="position:absolute;left:475.52px;top:235.17px" class="cls_012"><span class="cls_012">Cre</span></div>
    <div style="position:absolute;left:475.52px;top:251.98px" class="cls_012"><span class="cls_012">ate</span></div>
    <div style="position:absolute;left:475.52px;top:268.79px" class="cls_012"><span class="cls_012">d</span></div>
    <div style="position:absolute;left:154.77px;top:279.29px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:154.77px;top:295.40px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:475.52px;top:301.70px" class="cls_012"><span class="cls_012">20</span></div>
    <div style="position:absolute;left:122.56px;top:311.51px" class="cls_012"><span class="cls_012">/it</span></div>
    <div style="position:absolute;left:154.77px;top:311.51px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:182.08px;top:319.91px" class="cls_012"><span class="cls_012">Updates an existing item; if an item with the</span>
    </div>
    <div style="position:absolute;left:475.52px;top:318.51px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:122.56px;top:327.61px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:154.77px;top:327.61px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:182.08px;top:336.02px" class="cls_012"><span class="cls_012">provided identifier does not exist, it creates</span>
    </div>
    <div style="position:absolute;left:475.52px;top:335.32px" class="cls_012"><span class="cls_012">OK</span></div>
    <div style="position:absolute;left:95.24px;top:343.72px" class="cls_012"><span class="cls_012">P</span></div>
    <div style="position:absolute;left:122.56px;top:343.72px" class="cls_012"><span class="cls_012">m</span></div>
    <div style="position:absolute;left:154.77px;top:343.72px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:182.08px;top:352.12px" class="cls_012"><span class="cls_012">it. When an item is created, a Location</span>
    </div>
    <div style="position:absolute;left:95.24px;top:359.83px" class="cls_012"><span class="cls_012">U</span></div>
    <div style="position:absolute;left:122.56px;top:359.83px" class="cls_012"><span class="cls_012">/{i</span></div>
    <div style="position:absolute;left:154.77px;top:359.83px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:182.08px;top:368.23px" class="cls_012"><span class="cls_012">header is returned. It provides the URL</span>
    </div>
    <div style="position:absolute;left:475.52px;top:368.23px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:95.24px;top:375.93px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:122.56px;top:375.93px" class="cls_012"><span class="cls_012">te</span></div>
    <div style="position:absolute;left:154.77px;top:375.93px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:182.08px;top:384.34px" class="cls_012"><span class="cls_012">where the newly created item can be</span>
    </div>
    <div style="position:absolute;left:475.52px;top:385.04px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:122.56px;top:392.04px" class="cls_012"><span class="cls_012">mI</span></div>
    <div style="position:absolute;left:154.77px;top:392.04px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:182.08px;top:400.45px" class="cls_012"><span class="cls_012">accessed.</span>
    </div>
    <div style="position:absolute;left:475.52px;top:401.85px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:122.56px;top:408.15px" class="cls_012"><span class="cls_012">d}</span></div>
    <div style="position:absolute;left:154.77px;top:408.15px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:475.52px;top:418.65px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:154.77px;top:424.26px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:475.52px;top:435.46px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:154.77px;top:440.36px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:452.27px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:475.52px;top:469.08px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:475.52px;top:485.89px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:502.69px" class="cls_012"><span class="cls_012">or</span></div>
    <div style="position:absolute;left:475.52px;top:566.42px" class="cls_012"><span class="cls_012">20</span></div>
    <div style="position:absolute;left:475.52px;top:583.23px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:475.52px;top:600.04px" class="cls_012"><span class="cls_012">OK,</span></div>
    <div style="position:absolute;left:475.52px;top:632.95px" class="cls_012"><span class="cls_012">404</span></div>
    <div style="position:absolute;left:154.77px;top:641.36px" class="cls_012"><span class="cls_012">a</span></div>
    <div style="position:absolute;left:475.52px;top:649.76px" class="cls_012"><span class="cls_012">NO</span></div>
    <div style="position:absolute;left:154.77px;top:657.47px" class="cls_012"><span class="cls_012">p</span></div>
    <div style="position:absolute;left:475.52px;top:666.57px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:154.77px;top:673.57px" class="cls_012"><span class="cls_012">pl</span></div>
    <div style="position:absolute;left:122.56px;top:677.77px" class="cls_012"><span class="cls_012">/it</span></div>
    <div style="position:absolute;left:475.52px;top:683.38px" class="cls_012"><span class="cls_012">FO</span></div>
    <div style="position:absolute;left:95.24px;top:688.28px" class="cls_012"><span class="cls_012">D</span></div>
    <div style="position:absolute;left:154.77px;top:689.68px" class="cls_012"><span class="cls_012">ic</span></div>
    <div style="position:absolute;left:122.56px;top:693.88px" class="cls_012"><span class="cls_012">e</span></div>
    <div style="position:absolute;left:475.52px;top:700.18px" class="cls_012"><span class="cls_012">UN</span></div>
    <div style="position:absolute;left:95.24px;top:704.39px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:154.77px;top:705.79px" class="cls_012"><span class="cls_012">at</span></div>
    <div style="position:absolute;left:122.56px;top:709.99px" class="cls_012"><span class="cls_012">m</span></div>
    <div style="position:absolute;left:182.08px;top:712.79px" class="cls_012"><span class="cls_012">Deletes an existing item; if an item with the</span>
    </div>
    <div style="position:absolute;left:475.52px;top:716.99px" class="cls_012"><span class="cls_012">D</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:122544px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background145.jpg" width=595 height=841></div>
    <div style="position:absolute;left:95.24px;top:103.51px" class="cls_012"><span class="cls_012">L</span></div>
    <div style="position:absolute;left:122.56px;top:103.51px" class="cls_012"><span class="cls_012">/{i</span></div>
    <div style="position:absolute;left:154.77px;top:103.51px" class="cls_012"><span class="cls_012">io</span></div>
    <div style="position:absolute;left:182.08px;top:103.51px" class="cls_012"><span class="cls_012">provided identifier does not exist, it returns</span>
    </div>
    <div style="position:absolute;left:95.24px;top:119.62px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:122.56px;top:119.62px" class="cls_012"><span class="cls_012">te</span></div>
    <div style="position:absolute;left:154.77px;top:119.62px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:182.08px;top:119.62px" class="cls_012"><span class="cls_012">404.</span></div>
    <div style="position:absolute;left:475.52px;top:120.32px" class="cls_012"><span class="cls_012">50</span></div>
    <div style="position:absolute;left:95.24px;top:135.72px" class="cls_012"><span class="cls_012">T</span></div>
    <div style="position:absolute;left:122.56px;top:135.72px" class="cls_012"><span class="cls_012">mI</span></div>
    <div style="position:absolute;left:154.77px;top:135.72px" class="cls_012"><span class="cls_012">/j</span></div>
    <div style="position:absolute;left:475.52px;top:137.12px" class="cls_012"><span class="cls_012">0</span></div>
    <div style="position:absolute;left:95.24px;top:151.83px" class="cls_012"><span class="cls_012">E</span></div>
    <div style="position:absolute;left:122.56px;top:151.83px" class="cls_012"><span class="cls_012">d}</span></div>
    <div style="position:absolute;left:154.77px;top:151.83px" class="cls_012"><span class="cls_012">s</span></div>
    <div style="position:absolute;left:475.52px;top:153.93px" class="cls_012"><span class="cls_012">Int</span></div>
    <div style="position:absolute;left:154.77px;top:167.94px" class="cls_012"><span class="cls_012">o</span></div>
    <div style="position:absolute;left:475.52px;top:170.74px" class="cls_012"><span class="cls_012">ern</span></div>
    <div style="position:absolute;left:154.77px;top:184.05px" class="cls_012"><span class="cls_012">n</span></div>
    <div style="position:absolute;left:475.52px;top:187.55px" class="cls_012"><span class="cls_012">al</span></div>
    <div style="position:absolute;left:475.52px;top:204.36px" class="cls_012"><span class="cls_012">Ser</span></div>
    <div style="position:absolute;left:475.52px;top:221.16px" class="cls_012"><span class="cls_012">ver</span></div>
    <div style="position:absolute;left:475.52px;top:237.97px" class="cls_012"><span class="cls_012">Err</span></div>
    <div style="position:absolute;left:475.52px;top:254.78px" class="cls_012"><span class="cls_012">or</span></div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">The catalog application handles two types of entities: items and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.84px" class="cls_002"><span class="cls_002">categories. Each item entity contains a collection of categories</span>
    </div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">where it belongs. As you can see, the category is just a logical entity</span>
    </div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_002"><span class="cls_002">in our application; it will exist as long as there is at least one item</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">referencing it, and will cease to exist when no items refer it. This is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">why the application exposes routes for exposing data manipulation</span>
    </div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span class="cls_002">functions only for resources of type items, while the operations for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:488.69px" class="cls_002"><span class="cls_002">categories are more or less read only. Looking more carefully into</span>
    </div>
    <div style="position:absolute;left:87.54px;top:505.49px" class="cls_002"><span class="cls_002">the URLs exposing the data manipulation operations for the items,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:522.30px" class="cls_002"><span class="cls_002">we can see a clear pattern aligning the URL to the REST</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.11px" class="cls_002"><span class="cls_002">fundamental principles—a resource is exposed by a single URL, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:555.92px" class="cls_002"><span class="cls_002">it supports resource manipulation actions that are determined by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:572.73px" class="cls_002"><span class="cls_002">the HTTP method of the request. To sum up, listed here are the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:589.53px" class="cls_002"><span class="cls_002">generally accepted rules that a well-defined API should follow. They</span>
    </div>
    <div style="position:absolute;left:87.54px;top:606.34px" class="cls_002"><span class="cls_002">are semantically related to each resource manipulation operation:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:646.26px" class="cls_002"><span class="cls_002">When a new resource is created, the service makes use of</span>
    </div>
    <div style="position:absolute;left:133.06px;top:667.27px" class="cls_002"><span class="cls_002">the 201 Created status code, followed by a location header</span>
    </div>
    <div style="position:absolute;left:133.06px;top:688.28px" class="cls_002"><span class="cls_002">that specifies the URL where the newly created resource can</span>
    </div>
    <div style="position:absolute;left:133.06px;top:709.29px" class="cls_002"><span class="cls_002">be accessed.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:123395px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background146.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">Operation that creates resources may be implemented to</span>
    </div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_002"><span class="cls_002">gracefully reject creation of resources, which unique</span>
    </div>
    <div style="position:absolute;left:133.06px;top:148.33px" class="cls_002"><span class="cls_002">identifiers already use; in such cases, the operation should</span>
    </div>
    <div style="position:absolute;left:133.06px;top:169.34px" class="cls_002"><span class="cls_002">indicate a non-successful invocation with an appropriate</span>
    </div>
    <div style="position:absolute;left:133.06px;top:190.35px" class="cls_002"><span class="cls_002">status code 409 Conflict, or a more general 400 BAD</span>
    </div>
    <div style="position:absolute;left:133.06px;top:211.36px" class="cls_002"><span class="cls_002">REQUEST. However, a general status code should always</span>
    </div>
    <div style="position:absolute;left:133.06px;top:232.37px" class="cls_002"><span class="cls_002">be followed by a meaningful explanation of what has gone</span>
    </div>
    <div style="position:absolute;left:133.06px;top:253.38px" class="cls_002"><span class="cls_002">wrong. In our implementation, we choose a different</span>
    </div>
    <div style="position:absolute;left:133.06px;top:274.39px" class="cls_002"><span class="cls_002">approach—we update the resource from the create</span>
    </div>
    <div style="position:absolute;left:133.06px;top:295.40px" class="cls_002"><span class="cls_002">operation, if it exists, and notify the caller that the resource</span>
    </div>
    <div style="position:absolute;left:133.06px;top:316.41px" class="cls_002"><span class="cls_002">was updated by returning the 200 OK status code instead</span>
    </div>
    <div style="position:absolute;left:133.06px;top:337.42px" class="cls_002"><span
            class="cls_002">of 201 Created.</span></div>
    <div style="position:absolute;left:133.06px;top:367.53px" class="cls_002"><span class="cls_002">The Update operation resembles the create operation;</span>
    </div>
    <div style="position:absolute;left:133.06px;top:388.54px" class="cls_002"><span class="cls_002">however, it always expects a resource identifier as a</span>
    </div>
    <div style="position:absolute;left:133.06px;top:409.55px" class="cls_002"><span class="cls_002">parameter, if a resource with this identifier exists—it gets</span>
    </div>
    <div style="position:absolute;left:133.06px;top:430.56px" class="cls_002"><span class="cls_002">updated with a new state provided in the body of the HTTP</span>
    </div>
    <div style="position:absolute;left:133.06px;top:451.57px" class="cls_002"><span class="cls_002">PUT request. The 200 OK status code indicates successful</span>
    </div>
    <div style="position:absolute;left:133.06px;top:472.58px" class="cls_002"><span class="cls_002">invocation. The implementation may decide to reject</span>
    </div>
    <div style="position:absolute;left:133.06px;top:493.59px" class="cls_002"><span class="cls_002">handling of non-existent resources with the 404 Not</span>
    </div>
    <div style="position:absolute;left:133.06px;top:514.60px" class="cls_002"><span class="cls_002">Found status code or creating a new resource with the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:535.61px" class="cls_002"><span class="cls_002">passed identifier. In that case, it would return the 201</span>
    </div>
    <div style="position:absolute;left:133.06px;top:556.62px" class="cls_002"><span class="cls_002">Created status code, followed by a location header that</span>
    </div>
    <div style="position:absolute;left:133.06px;top:577.63px" class="cls_002"><span class="cls_002">specifies the URL where the newly created resource can be</span>
    </div>
    <div style="position:absolute;left:133.06px;top:598.64px" class="cls_002"><span class="cls_002">accessed. Our API makes use of the second option.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:628.75px" class="cls_002"><span class="cls_002">While successful deletion can be indicated with the 204</span>
    </div>
    <div style="position:absolute;left:133.06px;top:649.76px" class="cls_002"><span class="cls_002">No Content status and further payload, most user agents</span>
    </div>
    <div style="position:absolute;left:133.06px;top:670.77px" class="cls_002"><span class="cls_002">would expect the 2xx HTTP status to be followed by a body.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:691.78px" class="cls_002"><span class="cls_002">Thus, to stay compatible with most of the agents, our API</span>
    </div>
    <div style="position:absolute;left:133.06px;top:712.79px" class="cls_002"><span class="cls_002">will indicate successful deletion with the 200 OK status</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:124246px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background147.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">code, followed by a JSON payload:</span><span
            class="cls_008">{'Status': 'Successfully</span></div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_008"><span
            class="cls_008">deleted'}</span><span
            class="cls_002">. Status code 404 Not found will indicate that a</span></div>
    <div style="position:absolute;left:133.06px;top:148.33px" class="cls_002"><span class="cls_002">resource with the provided identifier does not exist.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:178.44px" class="cls_002"><span class="cls_002">As a general rule, 5XX should not indicate application state</span>
    </div>
    <div style="position:absolute;left:133.06px;top:199.45px" class="cls_002"><span class="cls_002">errors but more severe errors, such as application server or</span>
    </div>
    <div style="position:absolute;left:133.06px;top:220.46px" class="cls_002"><span
            class="cls_002">database failures.</span></div>
    <div style="position:absolute;left:133.06px;top:250.58px" class="cls_002"><span class="cls_002">It is best practice that </span><span
            class="cls_008">update</span><span class="cls_002"> and </span><span class="cls_008">create</span><span
            class="cls_002"> operations should</span></div>
    <div style="position:absolute;left:133.06px;top:271.59px" class="cls_002"><span class="cls_002">return as a payload to the entire state of the resource. For</span>
    </div>
    <div style="position:absolute;left:133.06px;top:292.60px" class="cls_002"><span class="cls_002">instance, if a resource is created with a minimum set of</span>
    </div>
    <div style="position:absolute;left:133.06px;top:313.61px" class="cls_002"><span class="cls_002">attributes, all non specified attribute will get default values;</span>
    </div>
    <div style="position:absolute;left:133.06px;top:334.62px" class="cls_002"><span class="cls_002">the response body should contain the full state of the object.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:355.63px" class="cls_002"><span class="cls_002">The same is valid for updates; even if an update operation</span>
    </div>
    <div style="position:absolute;left:133.06px;top:376.64px" class="cls_002"><span class="cls_002">updates the resource restate partially, the response should</span>
    </div>
    <div style="position:absolute;left:133.06px;top:397.65px" class="cls_002"><span class="cls_002">return the complete state. This may save the user-agent an</span>
    </div>
    <div style="position:absolute;left:133.06px;top:418.65px" class="cls_002"><span class="cls_002">additional GET request if they needed to check the new</span>
    </div>
    <div style="position:absolute;left:133.06px;top:439.66px" class="cls_002"><span class="cls_002">state.</span></div>
    <div style="position:absolute;left:87.54px;top:486.59px" class="cls_002"><span class="cls_002">Now that we have defined some general recommendations on how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_002"><span class="cls_002">operations should behave, it's time to implement them in a new</span>
    </div>
    <div style="position:absolute;left:87.54px;top:520.20px" class="cls_002"><span
            class="cls_002">version of the API.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:125097px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background148.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Extensibility and versioning</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">We've already defined a few basic versioning rules in </span><span
            class="cls_007">Chapter 3</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_003"><span class="cls_003">Building a Typical Web API</span><span
            class="cls_002">. Let's apply them to the MongoDB</span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">database-aware module we implemented in the previous chapter.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">Our starting point would be to enable the current consumers of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">API to continue using the same version on a different URL. This will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">keep them backward-compatible until they adopt and successfully</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span
            class="cls_002">test the new version.</span></div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Keeping a REST API stable is not a question of only moving one</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">endpoint from one URI to another. It makes no sense to perform</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">redirection and afterward have an API that behaves differently.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">Thus, we need to ensure that the behavior of the moved endpoint</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">stays the same. To ensure that we don't change the previously</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">implemented behavior, let's move the current behavior from</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">catalog.js</span><span
            class="cls_002"> module to a new module by renaming the file to</span></div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_008"><span
            class="cls_008">catalogV1.js</span><span class="cls_002">. Then, make a copy of it to the  </span><span
            class="cls_008">catalogV2.js</span><span class="cls_002"> module, where</span></div>
    <div style="position:absolute;left:87.54px;top:474.68px" class="cls_002"><span class="cls_002">we will introduce all new functionality; but before doing that, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:491.49px" class="cls_002"><span class="cls_002">have to reroute Version 1 from </span><span
            class="cls_008">/, /{categoryId}, /{itemId}</span><span class="cls_002"> to </span><span class="cls_008">/v1,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:508.30px" class="cls_008"><span class="cls_008">/v1/{categoryId}, /v1/{itemId}</span><span
            class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:552.42px" class="cls_010"><span class="cls_010">const express = require('express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:565.02px" class="cls_010"><span class="cls_010">const router = express.Router();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:590.23px" class="cls_010"><span class="cls_010">const catalogV1 = require('../modules/catalogV1');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:602.84px" class="cls_010"><span class="cls_010">const model = require('../model/item.js');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:628.05px" class="cls_010"><span class="cls_010">router.get('/v1/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:640.66px" class="cls_010"><span class="cls_010">catalogV1.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:653.26px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:678.47px" class="cls_010"><span class="cls_010">router.get('/v1/item/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:691.08px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.itemId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:703.69px" class="cls_010"><span class="cls_010">catalogV1.findItemById(request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:716.29px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:125948px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background149.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">router.get('/v1/:categoryId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:130.12px" class="cls_010"><span class="cls_010">console.log(request.url + ' : querying for ' + request.params.categoryId);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">catalogV1.findItemsByCategory(request.params.categoryId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span class="cls_010">router.post('/v1/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span class="cls_010">catalogV1.saveItem(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:230.97px" class="cls_010"><span class="cls_010">router.put('/v1/', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:243.57px" class="cls_010"><span class="cls_010">catalogV1.saveItem(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:256.18px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:281.39px" class="cls_010"><span class="cls_010">router.delete('/v1/item/:itemId', function(request, response, next) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:294.00px" class="cls_010"><span class="cls_010">catalogV1.remove(request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:306.60px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">router.get('/', function(request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:344.42px" class="cls_010"><span class="cls_010">console.log('Redirecting to v1');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:357.03px" class="cls_010"><span class="cls_010">response.writeHead(301, {'Location' : '/catalog/v1/'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:369.63px" class="cls_010"><span class="cls_010">response.end('Version 1 is moved to /catalog/v1/: ');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:382.24px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:407.45px" class="cls_010"><span class="cls_010">module.exports = router;</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.96px" class="cls_002"><span class="cls_002">Since Version 2 of our API is not yet implemented, executing a </span><span
            class="cls_008">GET</span></div>
    <div style="position:absolute;left:87.54px;top:455.77px" class="cls_002"><span
            class="cls_002">request against </span><span class="cls_008">/</span><span class="cls_002"> will result in receiving a </span><span
            class="cls_008">301 Moved Permanently</span><span class="cls_002"> HTTP</span></div>
    <div style="position:absolute;left:87.54px;top:472.58px" class="cls_002"><span class="cls_002">status, which will then redirect to </span><span
            class="cls_008">/v1/</span><span class="cls_002">. This will notify our</span></div>
    <div style="position:absolute;left:87.54px;top:489.39px" class="cls_002"><span class="cls_002">consumers that the API is evolving and that they will soon need to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.19px" class="cls_002"><span class="cls_002">decide whether to continue using Version 1 by explicitly requesting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">its new URI or prepare for adopting Version 2.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:557.32px" class="cls_002"><span class="cls_002">Go ahead and give it a try! Start the modified node application and,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:574.13px" class="cls_002"><span class="cls_002">from Postman, make a GET request to </span><span
            class="cls_008">http://localhost:3000/catalog</span><span class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:126799px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background150.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:127650px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background151.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:114.71px" class="cls_002"><span class="cls_002">You will see that your request is redirected to the newly routed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:131.52px" class="cls_002"><span
            class="cls_002">location at </span><span class="cls_008">http://localhost:3000/catalog/v1</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:165.84px" class="cls_002"><span class="cls_002">Now that we have finalized Version 1 of the catalog, it's time to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:182.65px" class="cls_002"><span class="cls_002">think of further extensions that we can add in Version 2. Currently,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:199.45px" class="cls_002"><span class="cls_002">the catalog service supports listing of all items in a category and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_002"><span class="cls_002">fetching an item by its ID. It's about time to take full advantage of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:233.07px" class="cls_002"><span class="cls_002">MongoDB, being a document-oriented database, and implement a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:249.88px" class="cls_002"><span class="cls_002">function that will enable our API consumer to query for items based</span>
    </div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">on any of their attributes. For instance, list all items for a specific</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">category with an attribute that matches a query parameter, such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">price or color, or search by item name. RESTful services usually</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">expose document-oriented data. However, their usage is not limited</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">to documents only. In the next chapter, we will extend the catalog in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">a way that it also stores binary data—an image that can be linked to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:367.53px" class="cls_002"><span class="cls_002">each item. For that purpose, we will use a MongoDB binary format</span>
    </div>
    <div style="position:absolute;left:87.54px;top:384.34px" class="cls_002"><span class="cls_002">called Binary JSON (BSON) in the </span><span
            class="cls_003">Working with arbitrary data</span></div>
    <div style="position:absolute;left:87.54px;top:401.15px" class="cls_002"><span
            class="cls_002">section in </span><span class="cls_007">Chapter 6</span><span class="cls_002">, </span><span
            class="cls_003">Implementing a Full-Fledged RESTful Service</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:435.46px" class="cls_002"><span class="cls_002">Getting back to the searching extension, we've already used the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.27px" class="cls_008"><span
            class="cls_008">Mongoose.js</span><span class="cls_002"> model's </span><span
            class="cls_008">find()</span><span class="cls_002"> and </span><span class="cls_008">findOne()</span><span
            class="cls_002"> functions. So far, we used them</span></div>
    <div style="position:absolute;left:87.54px;top:469.08px" class="cls_002"><span class="cls_002">to provide the name of the document attribute to be searched with,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:485.89px" class="cls_002"><span class="cls_002">statically, in our JavaScript code. However, this filtering parameter</span>
    </div>
    <div style="position:absolute;left:87.54px;top:502.69px" class="cls_002"><span class="cls_002">of </span><span
            class="cls_008">find()</span><span
            class="cls_002"> is just a JSON object where the key is the document</span></div>
    <div style="position:absolute;left:87.54px;top:519.50px" class="cls_002"><span class="cls_002">attribute and the value is the attribute's value to be used in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:536.31px" class="cls_002"><span class="cls_002">query. Here is the first new function we will add to Version 2. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.12px" class="cls_002"><span class="cls_002">queries MongoDB by an arbitrary attribute and its value:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:597.24px" class="cls_010"><span class="cls_010">exports.findItemsByAttribute = function (key, value, response) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:609.84px" class="cls_010"><span
            class="cls_010">var filter = {};</span></div>
    <div style="position:absolute;left:131.75px;top:622.45px" class="cls_010"><span
            class="cls_010">filter[key] = value;</span></div>
    <div style="position:absolute;left:131.75px;top:635.05px" class="cls_010"><span class="cls_010">CatalogItem.find(filter, function(error, result) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:647.66px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:660.27px" class="cls_010"><span class="cls_010">console.error(error);</span>
    </div>
    <div style="position:absolute;left:172.02px;top:672.87px" class="cls_010"><span class="cls_010">response.writeHead(500, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:172.02px;top:685.48px" class="cls_010"><span class="cls_010">response.end('Internal server error');</span>
    </div>
    <div style="position:absolute;left:172.02px;top:698.08px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:151.88px;top:710.69px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:128501px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background152.jpg" width=595 height=841></div>
    <div style="position:absolute;left:172.02px;top:104.91px" class="cls_010"><span
            class="cls_010">if (!result) {</span></div>
    <div style="position:absolute;left:192.15px;top:117.51px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:207.25px;top:130.12px" class="cls_010"><span class="cls_010">response.writeHead(200, contentTypeJson);</span>
    </div>
    <div style="position:absolute;left:207.25px;top:142.73px" class="cls_010"><span
            class="cls_010">response.end({});</span></div>
    <div style="position:absolute;left:192.15px;top:155.33px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:192.15px;top:167.94px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:172.02px;top:180.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:172.02px;top:193.15px" class="cls_010"><span class="cls_010">if (response != null){</span>
    </div>
    <div style="position:absolute;left:192.15px;top:205.76px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'application/json');</span>
    </div>
    <div style="position:absolute;left:192.15px;top:218.36px" class="cls_010"><span class="cls_010">response.send(result);</span>
    </div>
    <div style="position:absolute;left:172.02px;top:230.97px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:151.88px;top:243.57px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:256.18px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:268.78px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">This function calls find on the model with the provided attribute</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">and value as parameters. We will bind this function to the router's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_008"><span class="cls_008">/v2/item/</span><span
            class="cls_002"> GET handler.</span></div>
    <div style="position:absolute;left:87.54px;top:368.23px" class="cls_002"><span class="cls_002">At the end, our aim is to have </span><span
            class="cls_008">/v2/item/?currency=USD</span><span class="cls_002"> that returns only</span></div>
    <div style="position:absolute;left:87.54px;top:385.04px" class="cls_002"><span class="cls_002">records for items that are sold in USD currency, as indicated by the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.85px" class="cls_002"><span class="cls_002">value of the passed GET parameter. That way, if we modify the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:418.65px" class="cls_002"><span class="cls_002">model with additional attributes, such as color and size, we can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:435.46px" class="cls_002"><span class="cls_002">query for all items having the same color or any other attribute that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.27px" class="cls_002"><span
            class="cls_002">an item can have.</span></div>
    <div style="position:absolute;left:87.54px;top:486.59px" class="cls_002"><span class="cls_002">We will keep the old behavior of returning a list of all available</span>
    </div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_002"><span class="cls_002">items when no parameters are provided within the query string, but</span>
    </div>
    <div style="position:absolute;left:87.54px;top:520.20px" class="cls_002"><span class="cls_002">we will also parse the query string for the first provided </span><span
            class="cls_008">GET</span></div>
    <div style="position:absolute;left:87.54px;top:537.01px" class="cls_002"><span class="cls_002">parameter and use it as a filter in the </span><span
            class="cls_008">findItemsByAttribute()</span><span class="cls_002"> function:</span></div>
    <div style="position:absolute;left:101.55px;top:581.13px" class="cls_010"><span class="cls_010">router.get('/v2/items', function(request, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:593.74px" class="cls_010"><span class="cls_010">var getParams = url.parse(request.url, true).query;</span>
    </div>
    <div style="position:absolute;left:121.68px;top:606.34px" class="cls_010"><span class="cls_010">if (Object.keys(getParams).length == 0) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:618.95px" class="cls_010"><span class="cls_010">catalogV2.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:631.55px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:644.16px" class="cls_010"><span class="cls_010">var key = Object.keys(getParams)[0];</span>
    </div>
    <div style="position:absolute;left:131.75px;top:656.76px" class="cls_010"><span class="cls_010">var value = getParams[key];</span>
    </div>
    <div style="position:absolute;left:131.75px;top:669.37px" class="cls_010"><span class="cls_010">catalogV2.findItemsByAttribute(key, value, response);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:681.98px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:694.58px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:129352px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background153.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Perhaps the most interesting part in this function is the URL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">parsing. As you can see, we keep using the same old strategy to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">check whether any </span><span class="cls_008">GET</span><span class="cls_002"> parameters are supplied. We parse the URL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">in order to get the query string, and then we use the built-in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_008"><span
            class="cls_008">Object.keys</span><span
            class="cls_002"> function to check whether the parsed key/value list</span></div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">contains elements. If it does, we take the first element and extract</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">its value. Both the key and the value are passed to the </span><span
            class="cls_008">findByAttribute</span></div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">function.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:256.18px" class="cls_009"><span class="cls_009">You may want to improve Version 2 further by providing search support by</span>
    </div>
    <div style="position:absolute;left:132.36px;top:268.08px" class="cls_009"><span class="cls_009">multiple arguments that are provided by more than one </span><span
            class="cls_017">GET</span><span class="cls_009"> parameters. I</span></div>
    <div style="position:absolute;left:132.36px;top:279.99px" class="cls_009"><span class="cls_009">will leave that to you as an exercise.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:130203px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background154.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Discovering and exploring</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span
            class="cls_004">RESTful services</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">The topic of discovering RESTful services has a long and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">complicated history. The HTTP specification states that a resource</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">should be self-descriptive and that it should be identified uniquely</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">by a URI. Dependent resources should be linked by the dependency</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">using their own unique URIs. Discovering a RESTful service means</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">navigating from one service to another, following the links it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">provides.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">In the year 2009, a specification called Web Application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.84px" class="cls_002"><span class="cls_002">Discovery Language (WADL) was invented. It aims to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">document every URI exposed from a web application, along with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_002"><span class="cls_002">the HTTP methods it supports and the parameter it expects. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">response media type of the URI is also described. This is very useful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">for documenting purposes, and it's all that a WADL file can provide</span>
    </div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span class="cls_002">us in terms of RESTful service provisioning.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.20px" class="cls_002"><span class="cls_002">Unfortunately, there is currently no Node.js module that can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">automatically generate a WADL file for a given express route. We</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">will have to manually create a WADL file to demonstrate how it is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">used by other clients for discovery.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.93px" class="cls_002"><span class="cls_002">The following listing shows a sample WADL file describing the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:607.74px" class="cls_002"><span class="cls_002">resources available at </span><span
            class="cls_008">/catalog, /catalog/v2/{categoryId}</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:651.86px" class="cls_010"><span class="cls_010">&lt;?xml version="1.0" encoding="UTF-8"?></span>
    </div>
    <div style="position:absolute;left:101.55px;top:664.47px" class="cls_010"><span class="cls_010">&lt;application xmlns="</span><A
            HREF="http://wadl.dev.java.net/2009/02"/">http://wadl.dev.java.net/2009/02"</A> </div>
    <div style="position:absolute;left:101.55px;top:677.07px" class="cls_010"><span
            class="cls_010">xmlns:service="</span><A HREF="http://localhost:8080/catalog/"/">http://localhost:8080/catalog/"</A>
    </div>
    <div style="position:absolute;left:101.55px;top:689.68px" class="cls_010"><span class="cls_010">xmlns:xsd="</span><A
            HREF="http://www.w3.org/2001/xmlschema"/">http://www.w3.org/2001/XMLSchema"</A>>
    </div>
    <div style="position:absolute;left:116.65px;top:702.29px" class="cls_010"><span class="cls_010">&lt;grammer></span>
    </div>
    <div style="position:absolute;left:131.75px;top:714.89px" class="cls_010"><span class="cls_010">&lt;include href="items.xsd" /></span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:131054px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background155.jpg" width=595 height=841></div>
    <div style="position:absolute;left:131.75px;top:104.91px" class="cls_010"><span class="cls_010">&lt;include href="error.xsd" /></span>
    </div>
    <div style="position:absolute;left:116.65px;top:117.51px" class="cls_010"><span class="cls_010">&lt;/grammer></span>
    </div>
    <div style="position:absolute;left:116.65px;top:130.12px" class="cls_010"><span
            class="cls_010">&lt;resources base="</span><A HREF="http://localhost:8080/catalog/"/">http://localhost:8080/catalog/"</A>
        >
    </div>
    <div style="position:absolute;left:131.75px;top:142.73px" class="cls_010"><span class="cls_010">&lt;resource path="{categoryId}"></span>
    </div>
    <div style="position:absolute;left:146.85px;top:155.33px" class="cls_010"><span class="cls_010">&lt;method name="GET"></span>
    </div>
    <div style="position:absolute;left:161.95px;top:167.94px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:177.05px;top:180.54px" class="cls_010"><span class="cls_010">&lt;param name="category" type="xsd:string" style="template" /></span>
    </div>
    <div style="position:absolute;left:161.95px;top:193.15px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:161.95px;top:205.76px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:177.05px;top:218.36px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/xml"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:230.97px" class="cls_010"><span class="cls_010">element="service:item" /></span>
    </div>
    <div style="position:absolute;left:177.05px;top:243.57px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:161.95px;top:256.18px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:268.78px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:177.05px;top:281.39px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" element="service:item"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span class="cls_010">/></span></div>
    <div style="position:absolute;left:161.95px;top:306.60px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:146.85px;top:319.21px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:131.75px;top:331.81px" class="cls_010"><span
            class="cls_010">&lt;/resource></span></div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">&lt;resource path="/v2/{categoryId}"></span>
    </div>
    <div style="position:absolute;left:146.85px;top:357.03px" class="cls_010"><span class="cls_010">&lt;method name="GET"></span>
    </div>
    <div style="position:absolute;left:161.95px;top:369.63px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:177.05px;top:382.24px" class="cls_010"><span class="cls_010">&lt;param name="category" type="xsd:string" style="template" /></span>
    </div>
    <div style="position:absolute;left:161.95px;top:394.84px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:161.95px;top:407.45px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:177.05px;top:420.05px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/xml"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:432.66px" class="cls_010"><span class="cls_010">element="service:item" /></span>
    </div>
    <div style="position:absolute;left:177.05px;top:445.27px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:161.95px;top:457.87px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:470.48px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:177.05px;top:483.08px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" element="service:item"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:495.69px" class="cls_010"><span class="cls_010">/></span></div>
    <div style="position:absolute;left:161.95px;top:508.30px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:146.85px;top:520.90px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:131.75px;top:533.51px" class="cls_010"><span
            class="cls_010">&lt;/resource></span></div>
    <div style="position:absolute;left:116.65px;top:546.11px" class="cls_010"><span
            class="cls_010">&lt;/resources></span></div>
    <div style="position:absolute;left:101.55px;top:558.72px" class="cls_010"><span
            class="cls_010">&lt;/application></span></div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">As you can see, the WADL format is very straightforward. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">basically describes the URI of each resource, providing information</span>
    </div>
    <div style="position:absolute;left:87.54px;top:623.85px" class="cls_002"><span class="cls_002">about the media types it uses and the status codes that are expected</span>
    </div>
    <div style="position:absolute;left:87.54px;top:640.66px" class="cls_002"><span class="cls_002">at that URI. Many third-party RESTful clients understand the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:657.46px" class="cls_002"><span class="cls_002">WADL language and can generate request messages out of a given</span>
    </div>
    <div style="position:absolute;left:87.54px;top:674.27px" class="cls_002"><span class="cls_002">WADL file.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:708.59px" class="cls_002"><span class="cls_002">Let's import the WADL file in Postman. Click on the Import button</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:131905px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background156.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">and select your WADL file:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:132756px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background157.jpg" width=595 height=841></div>
    <div style="position:absolute;left:90.12px;top:718.39px" class="cls_005"><span class="cls_005">Import a WADL in Postman to get a stub of the service. This is a screenshot for Postman. The individual settings</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:133607px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background158.jpg" width=595 height=841></div>
    <div style="position:absolute;left:135.84px;top:104.08px" class="cls_005"><span class="cls_005">are not important here. The purpose of the image is just to show how the window looks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:124.52px" class="cls_002"><span class="cls_002">As you can see, the result of importing the WADL file is that we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:141.33px" class="cls_002"><span class="cls_002">have a project ready to test each aspect of a REST service in the nick</span>
    </div>
    <div style="position:absolute;left:87.54px;top:158.13px" class="cls_002"><span class="cls_002">of time. All the routes defined in the WADL file are now</span>
    </div>
    <div style="position:absolute;left:87.54px;top:174.94px" class="cls_002"><span class="cls_002">conveniently available as separate request entities on the right</span>
    </div>
    <div style="position:absolute;left:87.54px;top:191.75px" class="cls_002"><span class="cls_002">menu. That's not all; apart from the WADL standard, currently the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:208.56px" class="cls_002"><span class="cls_002">swagger documentation format is heavily adopted and has become</span>
    </div>
    <div style="position:absolute;left:87.54px;top:225.36px" class="cls_002"><span class="cls_002">an informal standard for describing RESTful services, so we can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:242.17px" class="cls_002"><span class="cls_002">also use it to ease the adoption and discovery of our service. In the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:258.98px" class="cls_002"><span class="cls_002">next chapter, we will bind these description files to our service. This</span>
    </div>
    <div style="position:absolute;left:87.54px;top:275.79px" class="cls_002"><span class="cls_002">is an important step in the phase of production preparation.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:134458px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background159.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Linked data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Every catalog application supports an image or set of images bound</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">to this item. For that purpose, in the next chapter, we will see how</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">to work with binary objects in MongoDB. However, now is the time</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">to decide how to semantically link the binary data to an item</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">document. Extending the model schema in such a way that it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">contains binary base64 representation of binary data in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">document is anything but a good idea, as mixing literally encoded</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">and binary data in one format is never a good idea. It increases the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">complexity of the application and makes it error-prone:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:383.64px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:396.24px" class="cls_010"><span class="cls_010">"_id": "5a4c004b0eed73835833cc9a",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:408.85px" class="cls_010"><span
            class="cls_010">"itemId": "1",</span></div>
    <div style="position:absolute;left:111.61px;top:421.46px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:434.06px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:446.67px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:111.61px;top:459.27px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:121.68px;top:471.88px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:484.48px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:111.61px;top:497.09px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:111.61px;top:509.70px" class="cls_010"><span class="cls_010">"image":"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:522.30px" class="cls_010"><span class="cls_010">iVBORw0KGgoAAAANSUhEUgAAAJEAAACRCAMAAAD0BqoRAAAAGXRFWHRTb2Z0d2FyZQBBZG9iZSBJb</span>
    </div>
    <div style="position:absolute;left:101.55px;top:534.91px" class="cls_010"><span class="cls_010">WFnZVJlYWR5ccllPAAAAyJpVFh0WE1MOmNvbS5hZG9iZS54bXAAAAAAADw/eHBhY2tldCBiZWdpbj</span>
    </div>
    <div style="position:absolute;left:101.55px;top:547.51px" class="cls_010"><span class="cls_010">0i77u/IiBpZD0iVzVNME1wQ2VoaUh6cmVTek5UY3prYzlkIj8+IDx4OnhtcG1ldGEgeG1sbnM6eD0</span>
    </div>
    <div style="position:absolute;left:101.55px;top:560.12px" class="cls_010"><span class="cls_010">iYWRvYmU6bnM6bWV0YS8iIHg6eG1wdGs9IkFkb2JlIFhNUCBDb3JlIDUuMC1jMDYwIDYxLjEzNDc3</span>
    </div>
    <div style="position:absolute;left:101.55px;top:572.73px" class="cls_010"><span class="cls_010">NywgMjAxMC8wMi8xMi0xNzozMjowMCAgICAgICAgIj4gPHJkZjpSREYgeG1sbnM6cmRmPSJodHRwO</span>
    </div>
    <div style="position:absolute;left:101.55px;top:585.33px" class="cls_010"><span class="cls_010">i8vd3d3LnczLm9yZy8xOTk5LzAyLzIyLXJkZi1zeW50YXgtbnMjIj4gPHJkZjpEZXNuzjcmlwdGlv</span>
    </div>
    <div style="position:absolute;left:101.55px;top:597.94px" class="cls_010"><span class="cls_010">biByZGY6YWJvdXQ9IiIgeG1sbnM6eG1wPSJodHRwOi8vbnMuYWRvYmUuY29tL3hhcC8xLjAvIiB4b</span>
    </div>
    <div style="position:absolute;left:101.55px;top:610.54px" class="cls_010"><span class="cls_010">Wxuczp4bXBNTT0iaHR0cDovL25zLmFkb2JlLmNvbS94YXAvMS4wL21tLyIgeG1sbnM6c3RSZWY9Im</span>
    </div>
    <div style="position:absolute;left:101.55px;top:623.15px" class="cls_010"><span class="cls_010">h0dHA6Ly9ucy5hZG9iZS5jb20veGFwLzEuMC9zVHlwZS9SZXNvdXJjZVJlZiMiIHhtcDpDcmVhdG9</span>
    </div>
    <div style="position:absolute;left:101.55px;top:635.75px" class="cls_010"><span class="cls_010">yVG9vbD0iQWRvYmUgUGhvdG9zaG9wIENTNSBNYWNpbnRvc2giIHhtcE1NOkluc3RhbmNlSUQ9Inht</span>
    </div>
    <div style="position:absolute;left:101.55px;top:648.36px" class="cls_010"><span class="cls_010">cC5paWQ6MjMwNjQ1NDdFNjJCMTFERkI5QzU4OTFCMjJCQzEzM0EiIHhtcE1NOkRvY3VtZW50SUQ9I</span>
    </div>
    <div style="position:absolute;left:101.55px;top:660.97px" class="cls_010"><span class="cls_010">nhtcC5kaWQ6MjMwNjQ1NDhFNjJCMTFERkI5QzU4OTFCMjJCQzEzM0EiPiA8eG1wTU06RGVyaXZlZE</span>
    </div>
    <div style="position:absolute;left:101.55px;top:673.57px" class="cls_010"><span class="cls_010">Zyb20gc3RSZWY6aW5zdGFuY2VJRD0ieG1wLmlpZDoyMzA2NDU0NUU2MkIxMURGQjlDNTg5MUIyMkJ</span>
    </div>
    <div style="position:absolute;left:101.55px;top:686.18px" class="cls_010"><span class="cls_010">DMTMzQSIgc3RSZWY6ZG9jdW1lbnRJRD0ieG1wLmRpZDoyMzA2NDU0NkU2MkIxMURGQjlDNTg5MUIy</span>
    </div>
    <div style="position:absolute;left:101.55px;top:698.78px" class="cls_010"><span class="cls_010">MkJDMTMzQSIvPiA8L3JkZjpEZXNjcmlwdGlvbj4gPC9yZGY6UkRGPiA8L3g6eG1wbWV0YT4gPD94c</span>
    </div>
    <div style="position:absolute;left:101.55px;top:711.39px" class="cls_010"><span class="cls_010">GFja2V0IGVuZD0iciI/Px5Xq1XXhWFY1+v151/b3ij5tI/GPEVP0e8U/SPAABPLjHnaJ6XvAAAAAE</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:135309px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background160.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">lFTkSuQmCC</span>
    </div>
    <div style="position:absolute;left:101.55px;top:117.51px" class="cls_010"><span class="cls_010">"}</span></div>
    <div style="position:absolute;left:87.54px;top:149.03px" class="cls_002"><span class="cls_002">Imagine how large a result for a non-filtered query can become just</span>
    </div>
    <div style="position:absolute;left:87.54px;top:165.84px" class="cls_002"><span class="cls_002">for a few hundred items, if all of them had an image binary</span>
    </div>
    <div style="position:absolute;left:87.54px;top:182.64px" class="cls_002"><span class="cls_002">representation as a value of a JSON attribute. To avoid that, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:199.45px" class="cls_002"><span class="cls_002">return the image for each item at a URL that is logically linked to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_002"><span
            class="cls_002">the resource's URL—</span><span class="cls_008">/catalog/v2/item/{itemId}/image</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:250.58px" class="cls_002"><span class="cls_002">That way, if there is an image assigned to an item, it will be served</span>
    </div>
    <div style="position:absolute;left:87.54px;top:267.38px" class="cls_002"><span class="cls_002">at a known location. This approach, however, does not semantically</span>
    </div>
    <div style="position:absolute;left:87.54px;top:284.19px" class="cls_002"><span class="cls_002">link the binary item to its corresponding resource, as when</span>
    </div>
    <div style="position:absolute;left:87.54px;top:301.00px" class="cls_002"><span
            class="cls_002">accessing the item at </span><span class="cls_008">/catalog/v2/item/{itemId}</span><span
            class="cls_002">, there would be no</span></div>
    <div style="position:absolute;left:87.54px;top:317.81px" class="cls_002"><span class="cls_002">indication of whether it has an image assigned or not. To solve this,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:334.62px" class="cls_002"><span class="cls_002">let's use a custom HTTP header in response of the item route:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:378.74px" class="cls_010"><span class="cls_010">GET </span><A
            HREF="http://localhost:3000/catalog/v2/item/1/">http://localhost:3000/catalog/v2/item/1</A> HTTP/1.1
    </div>
    <div style="position:absolute;left:101.55px;top:391.34px" class="cls_010"><span
            class="cls_010">Host: localhost:3000</span></div>
    <div style="position:absolute;left:101.55px;top:403.95px" class="cls_010"><span class="cls_010">Connection: Keep-Alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:416.55px" class="cls_010"><span class="cls_010">User-Agent: Apache-HttpClient/4.1.1 (java 1.5)</span>
    </div>
    <div style="position:absolute;left:101.55px;top:441.76px" class="cls_010"><span
            class="cls_010">HTTP/1.1 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:454.37px" class="cls_010"><span class="cls_010">X-Powered-By: Express</span>
    </div>
    <div style="position:absolute;left:101.55px;top:466.98px" class="cls_010"><span class="cls_010">Content-Type: application/json; charset=utf-8</span>
    </div>
    <div style="position:absolute;left:101.55px;top:479.58px" class="cls_010"><span
            class="cls_010">Content-Length: 152</span></div>
    <div style="position:absolute;left:101.55px;top:492.19px" class="cls_010"><span class="cls_010">Image-Url: </span><A
            HREF="http://localhost:3000/catalog/v2/item/1/image/">http://localhost:3000/catalog/v2/item/1/image</A>
    </div>
    <div style="position:absolute;left:101.55px;top:504.79px" class="cls_010"><span class="cls_010">ETag: W/"98-2nJj2mZdLV2YDME3WYCyEwIXfuA"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:517.40px" class="cls_010"><span class="cls_010">Date: Thu, 01 Feb 2018 13:50:43 GMT</span>
    </div>
    <div style="position:absolute;left:101.55px;top:530.01px" class="cls_010"><span class="cls_010">Connection: keep-alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:555.22px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:567.82px" class="cls_010"><span class="cls_010">"_id": "5a4c004b0eed73835833cc9a",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:580.43px" class="cls_010"><span
            class="cls_010">"itemId": "1",</span></div>
    <div style="position:absolute;left:111.61px;top:593.03px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:605.64px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:618.25px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:111.61px;top:630.85px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:643.46px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:121.68px;top:656.06px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:668.67px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:111.61px;top:681.28px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:101.55px;top:693.88px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:136160px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background161.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">When present in the response, the </span><span
            class="cls_008">Image-Url</span><span class="cls_002"> header indicates that the</span></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">item has an additional resource bound to it, and the header value</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">provides the address where it is available. Using this approach, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">linked a binary resource semantically to our document.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">In the next chapter, we will implement the routes that will handle</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">the manipulation of arbitrary items bound to the items in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">catalog.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:137011px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background162.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, we discussed in detail how resources should be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">exposed via a RESTful API; we paid close attention to URL best</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">practices and looked into appropriate usage of the HTTP status</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">codes indicating each state of our operations.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">We covered the topics of versioning and extensibility, where we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">used the </span><span
            class="cls_008">301 Moved Permanently</span><span
            class="cls_002"> status code to automatically redirect API</span></div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">calls to different URLs.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span class="cls_002">Finally, we figured out how to semantically link our resource items</span>
    </div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span class="cls_002">to arbitrary binary represented data.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:137862px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background163.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Implementing a Full Fledged</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span
            class="cls_004">RESTful Service</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">So far, we have created a second version of our RESTful service, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">we had the two versions exposed by different URLs, ensuring</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">backward compatibility. We implemented unit tests for its database</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">layer and discussed how to use HTTP status codes appropriately. In</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">this chapter, we will extend that implementation—by providing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">handling of non-document—binary data to the second version of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">the service and linking it accordingly to the documents it relates to.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">We will look at a convenient way of presenting large result sets to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.84px" class="cls_002"><span class="cls_002">consumers. For that purpose, we will introduce pagination as well</span>
    </div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">as further filtering capabilities to our API.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.96px" class="cls_002"><span class="cls_002">There are cases when caching data responses should be considered</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.77px" class="cls_002"><span class="cls_002">as an option. We will look at its benefits and drawbacks and also</span>
    </div>
    <div style="position:absolute;left:87.54px;top:472.58px" class="cls_002"><span class="cls_002">decide to enable caching when necessary.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.90px" class="cls_002"><span class="cls_002">Finally, we will dive into the discovery and exploration of REST</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.70px" class="cls_002"><span class="cls_002">services.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:558.02px" class="cls_002"><span class="cls_002">To sum up, here's what should be further implemented to turn the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:574.83px" class="cls_002"><span class="cls_002">catalog data service into a full-fledged RESTful service:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:614.75px" class="cls_002"><span class="cls_002">Working with arbitrary data</span>
    </div>
    <div style="position:absolute;left:133.06px;top:644.86px" class="cls_002"><span class="cls_002">Working with Linked data in the real world</span>
    </div>
    <div style="position:absolute;left:133.06px;top:674.97px" class="cls_002"><span
            class="cls_002">Paging and filtering</span></div>
    <div style="position:absolute;left:133.06px;top:705.09px" class="cls_002"><span class="cls_002">Caching</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:138713px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background164.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">Discovery and exploration</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:139564px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background165.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Working with arbitrary data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">MongoDB utilizes BSON (Binary JSON) as the primary data format.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">It is a binary format that stores key/value pairs in a single entity</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">called document. For example, a sample JSON, </span><span
            class="cls_008">{"hello":"world"}</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">becomes </span><span
            class="cls_008">\x16\x00\x00\x00\x02hello\x00\x06\x00\x00\x00world\x00\x00</span><span
            class="cls_002"> when</span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span
            class="cls_002">encoded in BSON.</span></div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">BSON stores data rather than literals. For instance, if an image is to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">be part of the document, it will not have to be converted to a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">base64-encoded string; instead, it will be directly stored as binary</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">data, unlike plain JSON, which will usually represent such data as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">base64-encoded bytes, but that is obviously not the most efficient</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">way.</span></div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">Mongoose schemas enable storing binary content in the BSON</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">format via the schema type—buffer. It stores binary content</span>
    </div>
    <div style="position:absolute;left:87.54px;top:458.57px" class="cls_002"><span class="cls_002">(image, ZIP archive, and so on) up to 16 MB. The reason behind the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:475.38px" class="cls_002"><span class="cls_002">relatively small storage capacity is to prevent excessive usage of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">memory and bandwidth during transmission.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:526.50px" class="cls_002"><span class="cls_002">The GridFS specification addresses this limitation of BSON and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:543.31px" class="cls_002"><span class="cls_002">enables you to work with data larger than 16 MB. GridFS divides</span>
    </div>
    <div style="position:absolute;left:87.54px;top:560.12px" class="cls_002"><span class="cls_002">data into chunks stored as separate document entries. Each chunk,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.93px" class="cls_002"><span class="cls_002">by default, has a size of up to 255 KB. When data is requested from</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.74px" class="cls_002"><span class="cls_002">the data store, the GridFS driver retrieves all the required chunks</span>
    </div>
    <div style="position:absolute;left:87.54px;top:610.54px" class="cls_002"><span class="cls_002">and returns them in an assembled order, as if they had never been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:627.35px" class="cls_002"><span class="cls_002">divided. Not only does this mechanism allow storage of data larger</span>
    </div>
    <div style="position:absolute;left:87.54px;top:644.16px" class="cls_002"><span class="cls_002">than 16 MB, it also enables consumers to retrieve data in portions</span>
    </div>
    <div style="position:absolute;left:87.54px;top:660.97px" class="cls_002"><span class="cls_002">so that it doesn't have to be loaded completely into the memory.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:677.77px" class="cls_002"><span class="cls_002">Thus, the specification implicitly enables streaming support.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:712.09px" class="cls_002"><span class="cls_002">GridFS actually offers more—it supports storing metadata for the</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:140415px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background166.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">given binary data, for example, its format, a filename, size, and so</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">on. The metadata is stored in a separate file and is available for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">more complex queries. There is a very usable Node.js module called</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_008"><span
            class="cls_008">gridfs-stream</span><span
            class="cls_002">. It enables easy streaming of data in and out of</span></div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">MongoDB, as on all other modules it is installed as an </span><span
            class="cls_008">npm</span><span class="cls_002"> package.</span></div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">So, let's install it globally and see how it is used; we will also use the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_008"><span class="cls_008">-s</span><span
            class="cls_002"> option to ensure that the dependencies in the</span></div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span
            class="cls_002">project's </span><span class="cls_008">package.json</span><span class="cls_002"> are updated:</span>
    </div>
    <div style="position:absolute;left:121.68px;top:265.98px" class="cls_010"><span class="cls_010">npm install -g -s gridfs-stream</span>
    </div>
    <div style="position:absolute;left:87.54px;top:297.50px" class="cls_002"><span
            class="cls_002">To create a </span><span class="cls_008">Grid</span><span class="cls_002"> instance, you are required to have a connection</span>
    </div>
    <div style="position:absolute;left:87.54px;top:314.31px" class="cls_002"><span class="cls_002">opened to the database:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:358.43px" class="cls_010"><span class="cls_010">const mongoose = require('mongoose')</span>
    </div>
    <div style="position:absolute;left:101.55px;top:371.03px" class="cls_010"><span class="cls_010">const Grid = require('gridfs-stream');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:396.24px" class="cls_010"><span class="cls_010">mongoose.connect('mongodb://localhost/catalog');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:408.85px" class="cls_010"><span class="cls_010">var connection = mongoose.connection;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:421.46px" class="cls_010"><span class="cls_010">var gfs = Grid(connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:87.54px;top:452.97px" class="cls_002"><span class="cls_002">Reading and writing into the stream is done through the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:469.78px" class="cls_008"><span
            class="cls_008">createReadStream()</span><span class="cls_002"> and </span><span class="cls_008">createWriteStream()</span><span
            class="cls_002"> functions. Each piece of data</span></div>
    <div style="position:absolute;left:87.54px;top:486.59px" class="cls_002"><span class="cls_002">streamed into the database must have an </span><span
            class="cls_008">ObjectId</span><span class="cls_002"> attribute set.</span></div>
    <div style="position:absolute;left:87.54px;top:503.39px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">ObjectId</span><span class="cls_002"> identifies binary data entry uniquely, just as it would</span>
    </div>
    <div style="position:absolute;left:87.54px;top:520.20px" class="cls_002"><span class="cls_002">have identified any other document in MongoDB; using this </span><span
            class="cls_008">ObjectId</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:537.01px" class="cls_002"><span class="cls_002">we can find or delete it from the MongoDB collection by this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.82px" class="cls_002"><span class="cls_002">identifier.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:588.13px" class="cls_002"><span class="cls_002">Let's extend the catalog service with functions for fetching, adding,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:604.94px" class="cls_002"><span class="cls_002">and deleting an image assigned to an item. For simplicity, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:621.75px" class="cls_002"><span class="cls_002">service will support a single image per item, so there will be a single</span>
    </div>
    <div style="position:absolute;left:87.54px;top:638.56px" class="cls_002"><span class="cls_002">function responsible for adding an image. It will overwrite an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:655.36px" class="cls_002"><span class="cls_002">existing image each time it is invoked, so an appropriate name for it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:672.17px" class="cls_002"><span class="cls_002">is </span><span
            class="cls_008">saveImage</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:716.29px" class="cls_010"><span class="cls_010">exports.saveImage = function(gfs, request, response) {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:141266px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background167.jpg" width=595 height=841></div>
    <div style="position:absolute;left:121.68px;top:117.52px" class="cls_010"><span class="cls_010">var writeStream = gfs.createWriteStream({</span>
    </div>
    <div style="position:absolute;left:161.95px;top:130.12px" class="cls_010"><span class="cls_010">filename : request.params.itemId,</span>
    </div>
    <div style="position:absolute;left:161.95px;top:142.73px" class="cls_010"><span class="cls_010">mode : 'w'</span>
    </div>
    <div style="position:absolute;left:141.82px;top:155.33px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:141.82px;top:180.54px" class="cls_010"><span class="cls_010">writeStream.on('error', function(error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:193.15px" class="cls_010"><span class="cls_010">response.send('500', 'Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:205.76px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:161.95px;top:218.36px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:230.97px" class="cls_010"><span class="cls_010">})</span></div>
    <div style="position:absolute;left:141.82px;top:256.18px" class="cls_010"><span class="cls_010">writeStream.on('close', function() {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:268.79px" class="cls_010"><span class="cls_010">readImage(gfs, request, response);</span>
    </div>
    <div style="position:absolute;left:141.82px;top:281.39px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:306.60px" class="cls_010"><span class="cls_010">request.pipe(writeStream);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">As you can see, all we need to do to flush the data in MongoDB is to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:367.53px" class="cls_002"><span class="cls_002">create a GridFS write stream instance. It requires some options that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:384.34px" class="cls_002"><span
            class="cls_002">provide the </span><span class="cls_008">ObjectId</span><span class="cls_002"> of the MongoDB entry and some additional</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.15px" class="cls_002"><span class="cls_002">metadata, such as a title as well as the writing mode. Then, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:417.95px" class="cls_002"><span class="cls_002">simply call the pipe function of the request. Piping will result in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:434.76px" class="cls_002"><span class="cls_002">flushing the data from the request to the write stream, and, in this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:451.57px" class="cls_002"><span class="cls_002">way, it will be safely stored in MongoDB. Once stored, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:468.38px" class="cls_008"><span class="cls_008">close</span><span
            class="cls_002"> event associated with the </span><span class="cls_008">writeStream</span><span
            class="cls_002"> will occur, and this is when</span></div>
    <div style="position:absolute;left:87.54px;top:485.19px" class="cls_002"><span class="cls_002">our function reads back whatever it has stored in the database and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_002"><span class="cls_002">returns that image in the HTTP response.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:536.31px" class="cls_002"><span class="cls_002">Retrieving an image is done the other way around—a </span><span
            class="cls_008">readStream</span><span class="cls_002"> is</span></div>
    <div style="position:absolute;left:87.54px;top:553.12px" class="cls_002"><span class="cls_002">created with options, and the value of the </span><span
            class="cls_008">_id</span><span class="cls_002"> parameter should</span></div>
    <div style="position:absolute;left:87.54px;top:569.92px" class="cls_002"><span class="cls_002">be the </span><span
            class="cls_008">ObjectId</span><span
            class="cls_002"> of the arbitrary data, optional file name, and read</span></div>
    <div style="position:absolute;left:87.54px;top:586.73px" class="cls_002"><span class="cls_002">mode:</span></div>
    <div style="position:absolute;left:101.55px;top:630.85px" class="cls_010"><span class="cls_010">function readImage(gfs, request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:656.06px" class="cls_010"><span class="cls_010">var imageStream = gfs.createReadStream({</span>
    </div>
    <div style="position:absolute;left:131.75px;top:668.67px" class="cls_010"><span class="cls_010">filename : request.params.itemId,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:681.28px" class="cls_010"><span class="cls_010">mode : 'r'</span>
    </div>
    <div style="position:absolute;left:111.61px;top:693.88px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:719.09px" class="cls_010"><span class="cls_010">imageStream.on('error', function(error) {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:142117px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background168.jpg" width=595 height=841></div>
    <div style="position:absolute;left:121.68px;top:104.91px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:121.68px;top:117.52px" class="cls_010"><span class="cls_010">response.send('404', 'Not found');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:130.12px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'image/jpeg');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">imageStream.pipe(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:224.66px" class="cls_002"><span class="cls_002">Before piping the read stream to the response, the appropriate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:241.47px" class="cls_008"><span
            class="cls_008">Content-Type</span><span class="cls_002"> header has to be set so that the arbitrary data can be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:258.28px" class="cls_002"><span class="cls_002">presented to the client  with an appropriate image media type,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_008"><span
            class="cls_008">image/jpeg</span><span class="cls_002">, in our case.</span></div>
    <div style="position:absolute;left:87.54px;top:309.40px" class="cls_002"><span class="cls_002">Finally, we export from our module a function for fetching the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:326.21px" class="cls_002"><span class="cls_002">image back from MongoDB. We will use that function to bind it to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:343.02px" class="cls_002"><span class="cls_002">the express route that reads the image from the database:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:387.14px" class="cls_010"><span class="cls_010">exports.getImage = function(gfs, itemId, response) {</span>
    </div>
    <div style="position:absolute;left:126.71px;top:399.75px" class="cls_010"><span class="cls_010">readImage(gfs, itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:412.35px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:87.54px;top:443.87px" class="cls_002"><span class="cls_002">Deleting arbitrary data from MongoDB is also straightforward. You</span>
    </div>
    <div style="position:absolute;left:87.54px;top:460.67px" class="cls_002"><span class="cls_002">have to delete the entry from two internal MongoDB collections, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:477.48px" class="cls_008"><span class="cls_008">fs.files</span><span
            class="cls_002">, where all the files are kept, and from the </span><span
            class="cls_008">fs.files.chunks</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:521.60px" class="cls_010"><span class="cls_010">exports.deleteImage = function(gfs, mongodb, itemId, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:534.21px" class="cls_010"><span class="cls_010">console.log('Deleting image for itemId:' + itemId);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:559.42px" class="cls_010"><span
            class="cls_010">var options = {</span></div>
    <div style="position:absolute;left:161.95px;top:572.03px" class="cls_010"><span
            class="cls_010">filename : itemId,</span></div>
    <div style="position:absolute;left:121.68px;top:584.63px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:121.68px;top:609.84px" class="cls_010"><span class="cls_010">var chunks = mongodb.collection('fs.files.chunks');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:622.45px" class="cls_010"><span class="cls_010">chunks.remove(options, function (error, image) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:635.05px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:647.66px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:161.95px;top:660.27px" class="cls_010"><span class="cls_010">response.send('500', 'Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:672.87px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:136.78px;top:685.48px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:156.92px;top:698.08px" class="cls_010"><span class="cls_010">console.log('Successfully deleted image for item: ' + itemId);</span>
    </div>
    <div style="position:absolute;left:136.78px;top:710.69px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:142968px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background169.jpg" width=595 height=841></div>
    <div style="position:absolute;left:121.68px;top:104.91px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:130.12px" class="cls_010"><span class="cls_010">var files = mongodb.collection('fs.files');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:142.73px" class="cls_010"><span class="cls_010">files.remove(options, function (error, image) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:155.33px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:167.94px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:161.95px;top:180.54px" class="cls_010"><span class="cls_010">response.send('500', 'Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:193.15px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:205.76px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:230.97px" class="cls_010"><span class="cls_010">if (image === null) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:243.57px" class="cls_010"><span class="cls_010">response.send('404', 'Not found');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:256.18px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:268.78px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:156.92px;top:281.39px" class="cls_010"><span class="cls_010">console.log('Successfully deleted image for primary item: ' +</span>
    </div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span class="cls_010">itemId);</span>
    </div>
    <div style="position:absolute;left:156.92px;top:306.60px" class="cls_010"><span class="cls_010">response.json({'deleted': true});</span>
    </div>
    <div style="position:absolute;left:141.82px;top:319.21px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:331.81px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:388.54px" class="cls_002"><span class="cls_002">Let's bind the new functionality to the appropriate item route and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:405.35px" class="cls_002"><span class="cls_002">test it:</span></div>
    <div style="position:absolute;left:101.55px;top:449.47px" class="cls_010"><span class="cls_010">router.get('/v2/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:111.61px;top:462.07px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:121.68px;top:474.68px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:487.29px" class="cls_010"><span class="cls_010">catalogV2.getImage(gfs, request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:499.89px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:525.10px" class="cls_010"><span class="cls_010">router.get('/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:111.61px;top:537.71px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:121.68px;top:550.32px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:562.92px" class="cls_010"><span class="cls_010">catalogV2.getImage(gfs, request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:575.53px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:600.74px" class="cls_010"><span class="cls_010">router.post('/v2/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:111.61px;top:613.34px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:121.68px;top:625.95px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:638.56px" class="cls_010"><span class="cls_010">catalogV2.saveImage(gfs, request, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:651.16px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:676.37px" class="cls_010"><span class="cls_010">router.post('/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:111.61px;top:688.98px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:121.68px;top:701.59px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:714.19px" class="cls_010"><span class="cls_010">catalogV2.saveImage(gfs, request.params.itemId, response);</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:143819px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background170.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">router.put('/v2/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:111.61px;top:142.73px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:121.68px;top:155.33px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">catalogV2.saveImage (gfs, request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:180.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">router.put('/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:111.61px;top:230.97px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:243.57px" class="cls_010"><span class="cls_010">catalogV2.saveImage(gfs, request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:256.18px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:281.39px" class="cls_010"><span class="cls_010">router.delete('/v2/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:111.61px;top:306.60px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">catalogV2.deleteImage(gfs, model.connection,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:331.81px" class="cls_010"><span class="cls_010">request.params.itemId, response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:369.63px" class="cls_010"><span class="cls_010">router.delete('/item/:itemId/image',</span>
    </div>
    <div style="position:absolute;left:101.55px;top:382.24px" class="cls_010"><span class="cls_010">function(request, response){</span>
    </div>
    <div style="position:absolute;left:111.61px;top:394.84px" class="cls_010"><span class="cls_010">var gfs = Grid(model.connection.db, mongoose.mongo);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:407.45px" class="cls_010"><span class="cls_010">catalogV2.deleteImage(gfs, model.connection,  request.params.itemId,</span>
    </div>
    <div style="position:absolute;left:101.55px;top:420.05px" class="cls_010"><span class="cls_010">response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:432.66px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:132.36px;top:453.67px" class="cls_009"><span class="cls_009">Since, at the time of writing, Version 2 is the latest version of our API, any</span>
    </div>
    <div style="position:absolute;left:132.36px;top:465.58px" class="cls_009"><span class="cls_009">new functionality exposed by it should be available at both locations: </span><span
            class="cls_017">/catalog</span></div>
    <div style="position:absolute;left:132.36px;top:477.48px" class="cls_009"><span class="cls_009">and </span><span
            class="cls_017">/v2/catalog</span><span class="cls_009">.</span></div>
    <div style="position:absolute;left:87.54px;top:499.89px" class="cls_002"><span class="cls_002">Let's start Postman and post an image to an existing item, assuming</span>
    </div>
    <div style="position:absolute;left:87.54px;top:516.70px" class="cls_002"><span class="cls_002">that we have an item with ID 14 </span><span
            class="cls_008">/catalog/v2/item/14/image</span><span class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:144670px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background171.jpg" width=595 height=841></div>
    <div style="position:absolute;left:99.05px;top:718.39px" class="cls_005"><span class="cls_005">Post request assigning an image to an item using Postman. This is a screenshot for Postman. The individual</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:145521px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background172.jpg" width=595 height=841></div>
    <div style="position:absolute;left:120.42px;top:104.08px" class="cls_005"><span class="cls_005">settings are not important here. The purpose of the image is just to show how the window looks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:124.52px" class="cls_002"><span class="cls_002">After the request is processed, the binary data is stored in the grid</span>
    </div>
    <div style="position:absolute;left:87.54px;top:141.33px" class="cls_002"><span class="cls_002">datastore and the image is returned in the response.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:146372px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background173.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Linking</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In the Linked data section of the previous chapter, we defined that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">if an item in the catalog has an image assigned to it, this will be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">indicated with an HTTP header named Image-URL.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span
            class="cls_002">Let's modify the </span><span class="cls_008">findItemById</span><span class="cls_002"> function in the V2 of the catalog. We will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">use the GridFS's existing function to check whether there is an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">image bound to the selected item; in case there is an image assigned</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">to the item, its URL will be available to the response with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span
            class="cls_002">Image-Url header:</span></div>
    <div style="position:absolute;left:101.55px;top:384.34px" class="cls_010"><span class="cls_010">exports.findItemById = function (gfs, request, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:396.94px" class="cls_010"><span class="cls_010">CatalogItem.findOne({itemId: request.params.itemId}, function(error,</span>
    </div>
    <div style="position:absolute;left:101.55px;top:409.55px" class="cls_010"><span class="cls_010">result) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:422.16px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:434.76px" class="cls_010"><span class="cls_010">console.error(error);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:447.37px" class="cls_010"><span class="cls_010">response.writeHead(500,</span>
    </div>
    <div style="position:absolute;left:297.86px;top:447.37px" class="cls_010"><span class="cls_010">contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:459.97px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:141.82px;top:472.58px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:485.19px" class="cls_010"><span
            class="cls_010">if (!result) {</span></div>
    <div style="position:absolute;left:182.08px;top:497.79px" class="cls_010"><span class="cls_010">if (response != null) {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:510.40px" class="cls_010"><span class="cls_010">response.writeHead(404, contentTypePlainText);</span>
    </div>
    <div style="position:absolute;left:202.22px;top:523.00px" class="cls_010"><span class="cls_010">response.end('Not Found');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:535.61px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:182.08px;top:548.21px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:161.95px;top:560.82px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:586.03px" class="cls_010"><span
            class="cls_010">var options = {</span></div>
    <div style="position:absolute;left:182.08px;top:598.64px" class="cls_010"><span class="cls_010">filename : result.itemId,</span>
    </div>
    <div style="position:absolute;left:161.95px;top:611.24px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:161.95px;top:623.85px" class="cls_010"><span class="cls_010">gfs.exist(options, function(error, found) {</span>
    </div>
    <div style="position:absolute;left:182.08px;top:636.46px" class="cls_010"><span class="cls_010">if (found) {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:649.06px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'application/json');</span>
    </div>
    <div style="position:absolute;left:202.22px;top:661.67px" class="cls_010"><span class="cls_010">var imageUrl = request.protocol + '://' +</span>
    </div>
    <div style="position:absolute;left:101.55px;top:674.27px" class="cls_010"><span class="cls_010">request.get('host') + request.baseUrl + request.path + '/image';</span>
    </div>
    <div style="position:absolute;left:202.22px;top:686.88px" class="cls_010"><span class="cls_010">response.setHeader('Image-Url', imageUrl);</span>
    </div>
    <div style="position:absolute;left:202.22px;top:699.48px" class="cls_010"><span class="cls_010">response.send(result);</span>
    </div>
    <div style="position:absolute;left:182.08px;top:712.09px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:147223px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background174.jpg" width=595 height=841></div>
    <div style="position:absolute;left:202.22px;top:104.91px" class="cls_010"><span class="cls_010">response.json(result);</span>
    </div>
    <div style="position:absolute;left:182.08px;top:117.51px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:130.12px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:155.33px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:199.45px" class="cls_002"><span class="cls_002">So far, we linked an item to its image; however, that leaves our data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_002"><span class="cls_002">partially linked, as there is a link from an item to its image but not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:233.07px" class="cls_002"><span class="cls_002">the other way around. Let's change that and supply a header Item-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:249.88px" class="cls_002"><span class="cls_002">Url to the image response by modifying the </span><span
            class="cls_008">readImage</span><span class="cls_002"> function:</span></div>
    <div style="position:absolute;left:101.55px;top:294.00px" class="cls_010"><span class="cls_010">function readImage(gfs, request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">var imageStream = gfs.createReadStream({</span>
    </div>
    <div style="position:absolute;left:131.75px;top:331.81px" class="cls_010"><span class="cls_010">filename : request.params.itemId,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">mode : 'r'</span>
    </div>
    <div style="position:absolute;left:111.61px;top:357.03px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:382.24px" class="cls_010"><span class="cls_010">imageStream.on('error', function(error) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:394.84px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:121.68px;top:407.45px" class="cls_010"><span class="cls_010">response.send('404', 'Not found');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:420.05px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:111.61px;top:432.66px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:457.87px" class="cls_010"><span class="cls_010">var itemImageUrl = request.protocol + '://' + request.get('host') +</span>
    </div>
    <div style="position:absolute;left:101.55px;top:470.48px" class="cls_010"><span class="cls_010">request.baseUrl+ request.path;</span>
    </div>
    <div style="position:absolute;left:111.61px;top:483.08px" class="cls_010"><span class="cls_010">var itemUrl = itemImageUrl.substring(0, itemImageUrl.indexOf('/image'));</span>
    </div>
    <div style="position:absolute;left:111.61px;top:495.69px" class="cls_010"><span class="cls_010">response.setHeader('Content-Type', 'image/jpeg');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:508.30px" class="cls_010"><span class="cls_010">response.setHeader('Item-Url', itemUrl);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:533.51px" class="cls_010"><span class="cls_010">imageStream.pipe(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:546.11px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:577.63px" class="cls_002"><span class="cls_002">Now requesting the item at </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/">http://localhost:3000/catalog/v2/item/3/</A> </span><span
            class="cls_002"> will</span></div>
    <div style="position:absolute;left:87.54px;top:594.44px" class="cls_002"><span class="cls_002">return the item encoded in the JSON format:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:638.56px" class="cls_010"><span class="cls_010">GET </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/image/">http://localhost:3000/catalog/v2/item/3/image</A>
        HTTP/1.1
    </div>
    <div style="position:absolute;left:101.55px;top:651.16px" class="cls_010"><span class="cls_010">Accept-Encoding: gzip,deflate</span>
    </div>
    <div style="position:absolute;left:101.55px;top:663.77px" class="cls_010"><span
            class="cls_010">Host: localhost:3000</span></div>
    <div style="position:absolute;left:101.55px;top:688.98px" class="cls_010"><span
            class="cls_010">HTTP/1.1 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:701.59px" class="cls_010"><span class="cls_010">X-Powered-By: Express</span>
    </div>
    <div style="position:absolute;left:101.55px;top:714.19px" class="cls_010"><span class="cls_010">Content-Type: application/json; charset=utf-8</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:148074px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background175.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:104.91px" class="cls_010"><span class="cls_010">Image-Url: </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/image/">http://localhost:3000/catalog/v2/item/3/image</A>
    </div>
    <div style="position:absolute;left:101.55px;top:117.52px" class="cls_010"><span
            class="cls_010">Content-Length: 137</span></div>
    <div style="position:absolute;left:101.55px;top:130.12px" class="cls_010"><span class="cls_010">Date: Tue, 03 Apr 2018 19:47:41 GMT</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">Connection: keep-alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:167.94px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:116.65px;top:180.54px" class="cls_010"><span class="cls_010">"_id": "5ab827f65d61450e40d7d984",</span>
    </div>
    <div style="position:absolute;left:116.65px;top:193.15px" class="cls_010"><span
            class="cls_010">"itemId": "3",</span></div>
    <div style="position:absolute;left:116.65px;top:205.76px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 11",</span>
    </div>
    <div style="position:absolute;left:116.65px;top:218.36px" class="cls_010"><span class="cls_010">"price": 99,</span>
    </div>
    <div style="position:absolute;left:116.65px;top:230.97px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:116.65px;top:243.57px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:116.65px;top:256.18px" class="cls_010"><span class="cls_010">"categories": ["Watches"]</span>
    </div>
    <div style="position:absolute;left:101.55px;top:268.79px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">Looking into the response headers, we find the </span><span
            class="cls_008">Image-Url</span><span class="cls_002"> header its</span></div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">value, </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/image/">http://localhost:3000/catalog/v2/item/3/image</A> </span>
        <span class="cls_002"> provides the URL of the</span></div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">image linked to the item.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:368.23px" class="cls_002"><span class="cls_002">Requesting that image results in the following:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:412.35px" class="cls_010"><span class="cls_010">GET </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/image/">http://localhost:3000/catalog/v2/item/3/image</A>
        HTTP/1.1
    </div>
    <div style="position:absolute;left:101.55px;top:424.96px" class="cls_010"><span
            class="cls_010">Host: localhost:3000</span></div>
    <div style="position:absolute;left:101.55px;top:437.56px" class="cls_010"><span class="cls_010">Connection: Keep-Alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:462.78px" class="cls_010"><span
            class="cls_010">HTTP/1.1 200 OK</span></div>
    <div style="position:absolute;left:101.55px;top:475.38px" class="cls_010"><span class="cls_010">X-Powered-By: Express</span>
    </div>
    <div style="position:absolute;left:101.55px;top:487.99px" class="cls_010"><span class="cls_010">Content-Type: image/jpeg</span>
    </div>
    <div style="position:absolute;left:101.55px;top:500.59px" class="cls_010"><span class="cls_010">Item-Url: </span><A
            HREF="http://localhost:3000/catalog/v2/item/3/">http://localhost:3000/catalog/v2/item/3</A></div>
    <div style="position:absolute;left:101.55px;top:513.20px" class="cls_010"><span class="cls_010">Connection: keep-alive</span>
    </div>
    <div style="position:absolute;left:101.55px;top:525.80px" class="cls_010"><span class="cls_010">Transfer-Encoding: chunked</span>
    </div>
    <div style="position:absolute;left:101.55px;top:551.02px" class="cls_010"><span
            class="cls_010">&lt;BINARY DATA></span></div>
    <div style="position:absolute;left:87.54px;top:582.53px" class="cls_002"><span class="cls_002">This time, the response provides the payload of the image linked to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:599.34px" class="cls_002"><span class="cls_002">the item and a special header Item-Url. Its value</span>
    </div>
    <div style="position:absolute;left:87.54px;top:616.15px" class="cls_002"><span class="cls_002">—</span><span
            class="cls_008">http://localhost:3000/catalog/v2/item/3</span><span class="cls_002">—is the address where the item</span>
    </div>
    <div style="position:absolute;left:87.54px;top:632.95px" class="cls_002"><span class="cls_002">resource is available. Now if the item image appears, for instance, in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:649.76px" class="cls_002"><span class="cls_002">image search results, the URL of the item linked with the image will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:666.57px" class="cls_002"><span class="cls_002">also be part of the result. In this way, we linked the two data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:683.38px" class="cls_002"><span class="cls_002">semantically without modifying or compromising their payload.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:148925px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background176.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Implementing paging and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">filtering</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Once deployed to the web, each service becomes available to an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">enormous number of consumers. They will not only use it to get</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">data but also to insert new data. At some point of time, this will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">inevitably lead to a large amount of data being available in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">database. To keep the service user-friendly and maintain a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">reasonable response time, we need to take care of providing big</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">data in reasonable portions, assuring that it does not need to return</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">a few hundred thousand items when the </span><span
            class="cls_008">/catalog</span><span class="cls_002"> URI is requested.</span></div>
    <div style="position:absolute;left:87.54px;top:387.84px" class="cls_002"><span class="cls_002">Web data consumers are used to having various pagination and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">filtering capabilities. Earlier in this chapter, we implemented the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_008"><span class="cls_008">findIfindItemsByAttribute()</span><span
            class="cls_002"> function, which enabled filtering by any of</span></div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">the attributes of an item Now, it's time to introduce pagination</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">capabilities to enable navigation within the </span><span
            class="cls_008">resultset</span><span class="cls_002"> with the help of</span></div>
    <div style="position:absolute;left:87.54px;top:471.88px" class="cls_002"><span
            class="cls_002">a URI parameter.</span></div>
    <div style="position:absolute;left:87.54px;top:506.20px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">mongoose.js</span><span
            class="cls_002"> models can make use of different plugin modules to</span></div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">provide additional functionality on top of them. Such a plugin</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span
            class="cls_002">module is </span><span class="cls_008">mongoose-paginate</span><span class="cls_002">. The Express framework also provides a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">piece of pagination middleware named </span><span
            class="cls_008">express-paginate</span><span class="cls_002">. It provides</span></div>
    <div style="position:absolute;left:87.54px;top:573.43px" class="cls_002"><span class="cls_002">out-of-the-box linking and navigation with Mongoose's result</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">pages:</span></div>
    <div style="position:absolute;left:115.55px;top:630.15px" class="cls_002"><span class="cls_002">1. Before starting to develop the pagination mechanism, we</span>
    </div>
    <div style="position:absolute;left:133.06px;top:651.16px" class="cls_002"><span class="cls_002">should install these two useful modules:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:707.89px" class="cls_010"><span class="cls_010">npm install -g -s express-paginate</span>
    </div>
    <div style="position:absolute;left:140.77px;top:720.49px" class="cls_010"><span class="cls_010">npm install -g -s mongoose-paginate</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:149776px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background177.jpg" width=595 height=841></div>
    <div style="position:absolute;left:114.15px;top:134.32px" class="cls_002"><span class="cls_002">2. The next step will to be to create instances of the  </span><span
            class="cls_008">express-</span></div>
    <div style="position:absolute;left:133.06px;top:155.33px" class="cls_008"><span class="cls_008">paginate</span><span
            class="cls_002"> middleware in our application:</span></div>
    <div style="position:absolute;left:140.77px;top:224.66px" class="cls_010"><span class="cls_010">expressPaginate = require('express-paginate');</span>
    </div>
    <div style="position:absolute;left:114.15px;top:268.78px" class="cls_002"><span class="cls_002">3. Initialize the pagination middleware in the application by</span>
    </div>
    <div style="position:absolute;left:133.06px;top:289.79px" class="cls_002"><span
            class="cls_002">calling its </span><span class="cls_008">middleware()</span><span class="cls_002"> function. Its parameters specify a</span>
    </div>
    <div style="position:absolute;left:133.06px;top:310.80px" class="cls_002"><span class="cls_002">default limit and a maximum limit of results per page:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:367.53px" class="cls_010"><span class="cls_010">app.use(expressPaginate.middleware(limit, maxLimit);</span>
    </div>
    <div style="position:absolute;left:114.15px;top:411.65px" class="cls_002"><span
            class="cls_002">4. Then, provide the </span><span class="cls_008">mongoose-pagination</span><span
            class="cls_002"> instance as a plugin to the</span></div>
    <div style="position:absolute;left:133.06px;top:432.66px" class="cls_008"><span
            class="cls_008">CatalogItem</span><span
            class="cls_002"> schema before creating a model. Here's how the</span></div>
    <div style="position:absolute;left:133.06px;top:453.67px" class="cls_008"><span class="cls_008">item.js</span><span
            class="cls_002"> module will export that along with the model:</span></div>
    <div style="position:absolute;left:140.77px;top:510.40px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:523.00px" class="cls_010"><span class="cls_010">var mongoosePaginate = require('mongoose-paginate');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:535.61px" class="cls_010"><span class="cls_010">var Schema = mongoose.Schema;</span>
    </div>
    <div style="position:absolute;left:140.77px;top:560.82px" class="cls_010"><span class="cls_010">mongoose.connect('mongodb://localhost/catalog');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:586.03px" class="cls_010"><span class="cls_010">var itemSchema = new Schema ({</span>
    </div>
    <div style="position:absolute;left:160.90px;top:598.64px" class="cls_010"><span class="cls_010">"itemId" : {type: String, index: {unique: true}},</span>
    </div>
    <div style="position:absolute;left:160.90px;top:611.24px" class="cls_010"><span
            class="cls_010">"itemName": String,</span></div>
    <div style="position:absolute;left:160.90px;top:623.85px" class="cls_010"><span
            class="cls_010">"price": Number,</span></div>
    <div style="position:absolute;left:160.90px;top:636.45px" class="cls_010"><span
            class="cls_010">"currency" : String,</span></div>
    <div style="position:absolute;left:160.90px;top:649.06px" class="cls_010"><span class="cls_010">"categories": [String]</span>
    </div>
    <div style="position:absolute;left:140.77px;top:661.67px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:140.77px;top:674.27px" class="cls_010"><span class="cls_010">console.log('paginate');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:686.88px" class="cls_010"><span class="cls_010">itemSchema.plugin(mongoosePaginate);</span>
    </div>
    <div style="position:absolute;left:140.77px;top:699.48px" class="cls_010"><span class="cls_010">var CatalogItem = mongoose.model('Item', itemSchema);</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:150627px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background178.jpg" width=595 height=841></div>
    <div style="position:absolute;left:140.77px;top:104.91px" class="cls_010"><span class="cls_010">module.exports = {CatalogItem : CatalogItem, connection :</span>
    </div>
    <div style="position:absolute;left:140.77px;top:117.52px" class="cls_010"><span class="cls_010">mongoose.connection};</span>
    </div>
    <div style="position:absolute;left:114.15px;top:161.64px" class="cls_002"><span
            class="cls_002">5. Finally, call the </span><span class="cls_008">paginate()</span><span class="cls_002"> function of the model to fetch the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:182.65px" class="cls_002"><span class="cls_002">requested entries in a paginated manner:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:251.98px" class="cls_010"><span class="cls_010">CatalogItem.paginate({}, {page:request.query.page,</span>
    </div>
    <div style="position:absolute;left:140.77px;top:264.58px" class="cls_010"><span class="cls_010">limit:request.query.limit},</span>
    </div>
    <div style="position:absolute;left:160.90px;top:277.19px" class="cls_010"><span class="cls_010">function (error, result){</span>
    </div>
    <div style="position:absolute;left:181.03px;top:289.80px" class="cls_010"><span class="cls_010">if(error) {</span>
    </div>
    <div style="position:absolute;left:201.17px;top:302.40px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:201.17px;top:315.01px" class="cls_010"><span class="cls_010">response.writeHead('500',</span>
    </div>
    <div style="position:absolute;left:216.27px;top:327.61px" class="cls_010"><span class="cls_010">{'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:201.17px;top:340.22px" class="cls_010"><span class="cls_010">response.end('Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:186.07px;top:352.82px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:196.13px;top:365.43px" class="cls_010"><span class="cls_010">response.json(result);</span>
    </div>
    <div style="position:absolute;left:186.07px;top:378.04px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:140.77px;top:390.64px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:422.16px" class="cls_002"><span class="cls_002">The first parameter is the filter that Mongoose should use for its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.96px" class="cls_002"><span class="cls_002">query. The second parameter is an object specifying which page is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.77px" class="cls_002"><span class="cls_002">requested and the entries per page. The third parameter is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:472.58px" class="cls_002"><span class="cls_002">callback-handler function, providing the result and any available</span>
    </div>
    <div style="position:absolute;left:87.54px;top:489.39px" class="cls_002"><span class="cls_002">error information via its parameters:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:529.31px" class="cls_008"><span class="cls_008">error</span><span
            class="cls_002">: This specifies whether the query was executed</span></div>
    <div style="position:absolute;left:133.06px;top:550.32px" class="cls_002"><span class="cls_002">successfully</span>
    </div>
    <div style="position:absolute;left:133.06px;top:580.43px" class="cls_008"><span class="cls_008">result</span><span
            class="cls_002">: This is the retrieved data from the database</span></div>
    <div style="position:absolute;left:87.54px;top:627.35px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">express-paginate</span><span
            class="cls_002"> middleware enables seamless integration of the</span></div>
    <div style="position:absolute;left:87.54px;top:644.16px" class="cls_008"><span
            class="cls_008">mongoose-paginate</span><span class="cls_002"> module in the web environment by enriching the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:660.97px" class="cls_008"><span class="cls_008">request</span><span
            class="cls_002"> and </span><span class="cls_008">response</span><span class="cls_002"> objects of an Express handler function.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:695.28px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">request</span><span class="cls_002"> objects get two new attributes: </span><span
            class="cls_008">query.limit</span><span class="cls_002">, which tells the</span></div>
    <div style="position:absolute;left:87.54px;top:712.09px" class="cls_002"><span class="cls_002">middleware the number of entries on the page, and </span><span
            class="cls_008">query.page</span><span class="cls_002">, which</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:151478px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background179.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">specifies the requested page. Note that the middleware will ignore</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span
            class="cls_002">values of </span><span class="cls_008">query.limit</span><span class="cls_002"> that are larger than the </span><span
            class="cls_008">maxLimit</span><span class="cls_002"> value specified at</span></div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">the middleware's initialization. This prevents the consumer from</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">overriding the maximum limit and gives you total control over your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">application.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">Here's the implementation of the </span><span
            class="cls_008">paginate</span><span class="cls_002"> function in the second</span></div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">version of the catalog module:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:266.68px" class="cls_010"><span class="cls_010">exports.paginate = function(model, request, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:279.29px" class="cls_010"><span class="cls_010">var pageSize = request.query.limit;</span>
    </div>
    <div style="position:absolute;left:121.68px;top:291.90px" class="cls_010"><span class="cls_010">var page = request.query.page;</span>
    </div>
    <div style="position:absolute;left:121.68px;top:304.50px" class="cls_010"><span class="cls_010">if (pageSize === undefined) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:317.11px" class="cls_010"><span
            class="cls_010">pageSize = 100;</span></div>
    <div style="position:absolute;left:121.68px;top:329.71px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:342.32px" class="cls_010"><span class="cls_010">if (page === undefined) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:354.93px" class="cls_010"><span class="cls_010">page = 1;</span>
    </div>
    <div style="position:absolute;left:121.68px;top:367.53px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:392.74px" class="cls_010"><span class="cls_010">model.paginate({}, {page:page, limit:pageSize},</span>
    </div>
    <div style="position:absolute;left:161.95px;top:405.35px" class="cls_010"><span class="cls_010">function (error, result){</span>
    </div>
    <div style="position:absolute;left:182.08px;top:417.95px" class="cls_010"><span class="cls_010">if(error) {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:430.56px" class="cls_010"><span
            class="cls_010">console.log(error);</span></div>
    <div style="position:absolute;left:202.22px;top:443.17px" class="cls_010"><span class="cls_010">response.writeHead('500',</span>
    </div>
    <div style="position:absolute;left:222.35px;top:455.77px" class="cls_010"><span class="cls_010">{'Content-Type' : 'text/plain'});</span>
    </div>
    <div style="position:absolute;left:202.22px;top:468.38px" class="cls_010"><span class="cls_010">response.end('Internal Server Error');</span>
    </div>
    <div style="position:absolute;left:182.08px;top:480.98px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:182.08px;top:493.59px" class="cls_010"><span class="cls_010">else {</span></div>
    <div style="position:absolute;left:202.22px;top:506.20px" class="cls_010"><span class="cls_010">response.json(result);</span>
    </div>
    <div style="position:absolute;left:182.08px;top:518.80px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:531.41px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:544.01px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:575.53px" class="cls_002"><span class="cls_002">The following is the response from querying a dataset containing 11</span>
    </div>
    <div style="position:absolute;left:87.54px;top:592.34px" class="cls_002"><span class="cls_002">items with a limit of five items per page:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:636.46px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:111.61px;top:649.06px" class="cls_010"><span class="cls_010">"docs": [</span>
    </div>
    <div style="position:absolute;left:121.68px;top:661.67px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:674.27px" class="cls_010"><span class="cls_010">"_id": "5a4c004b0eed73835833cc9a",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:686.88px" class="cls_010"><span
            class="cls_010">"itemId": "1",</span></div>
    <div style="position:absolute;left:131.75px;top:699.48px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 1",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:712.09px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:152329px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background180.jpg" width=595 height=841></div>
    <div style="position:absolute;left:131.75px;top:104.91px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:131.75px;top:117.51px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:130.12px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:155.33px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:131.75px;top:167.94px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:121.68px;top:180.54px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:121.68px;top:193.15px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:205.76px" class="cls_010"><span class="cls_010">"_id": "5a4c0b7aad0ebbce584593ee",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:218.36px" class="cls_010"><span
            class="cls_010">"itemId": "2",</span></div>
    <div style="position:absolute;left:131.75px;top:230.97px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 2",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:243.57px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:256.18px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:131.75px;top:268.78px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:281.39px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:141.82px;top:294.00px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:131.75px;top:306.60px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:121.68px;top:319.21px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:121.68px;top:331.81px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">"_id": "5a64d7ecfa1b585142008017",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:357.03px" class="cls_010"><span
            class="cls_010">"itemId": "3",</span></div>
    <div style="position:absolute;left:131.75px;top:369.63px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 3",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:382.24px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:394.84px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:131.75px;top:407.45px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:420.05px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:141.82px;top:432.66px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:445.27px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:131.75px;top:457.87px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:121.68px;top:470.48px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:121.68px;top:483.08px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:495.69px" class="cls_010"><span class="cls_010">"_id": "5a64d9a59f4dc4e34329b80f",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:508.30px" class="cls_010"><span
            class="cls_010">"itemId": "8",</span></div>
    <div style="position:absolute;left:131.75px;top:520.90px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 4",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:533.51px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:546.11px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:131.75px;top:558.72px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:571.33px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:141.82px;top:583.93px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:596.54px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:131.75px;top:609.14px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:121.68px;top:621.75px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:121.68px;top:634.35px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:131.75px;top:646.96px" class="cls_010"><span class="cls_010">"_id": "5a64da377d25d96e44c9c273",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:659.57px" class="cls_010"><span
            class="cls_010">"itemId": "9",</span></div>
    <div style="position:absolute;left:131.75px;top:672.17px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 5",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:684.78px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:697.38px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:131.75px;top:709.99px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:131.75px;top:722.60px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:153180px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background181.jpg" width=595 height=841></div>
    <div style="position:absolute;left:141.82px;top:104.91px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:117.51px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:131.75px;top:130.12px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:121.68px;top:142.73px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">],</span></div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span class="cls_010">"total": 11,</span>
    </div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">"limit": "5",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span class="cls_010">"page": "1",</span>
    </div>
    <div style="position:absolute;left:111.61px;top:205.76px" class="cls_010"><span class="cls_010">"pages": 3</span>
    </div>
    <div style="position:absolute;left:101.55px;top:218.36px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:249.88px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">docs</span><span class="cls_002"> attribute contains all the items that are part of the results.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">Its size is the same as the selected limit value. The </span><span
            class="cls_008">pages</span><span class="cls_002"> attribute</span></div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">provides the total number of pages; in the example here, its value is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">3, as 11 items are accommodated in three pages, each containing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span
            class="cls_002">five items. The </span><span class="cls_008">Total</span><span class="cls_002"> attribute gives us the total number of items.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:351.42px" class="cls_002"><span class="cls_002">The final step to enable pagination is to modify the </span><span
            class="cls_008">/v2/</span><span class="cls_002"> route to start</span></div>
    <div style="position:absolute;left:87.54px;top:368.23px" class="cls_002"><span class="cls_002">making use of the newly created function:</span>
    </div>
    <div style="position:absolute;left:111.61px;top:412.35px" class="cls_010"><span class="cls_010">router.get('/v2/', function(request, response) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:424.96px" class="cls_010"><span class="cls_010">var getParams = url.parse(request.url, true).query;</span>
    </div>
    <div style="position:absolute;left:121.68px;top:437.56px" class="cls_010"><span class="cls_010">if (getParams['page'] !=null) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:450.17px" class="cls_010"><span class="cls_010">catalogV2.paginate(model.CatalogItem, request, response);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:462.77px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:475.38px" class="cls_010"><span class="cls_010">var key = Object.keys(getParams)[0];</span>
    </div>
    <div style="position:absolute;left:131.75px;top:487.99px" class="cls_010"><span class="cls_010">var value = getParams[key];</span>
    </div>
    <div style="position:absolute;left:131.75px;top:500.59px" class="cls_010"><span class="cls_010">catalogV2.findItemsByAttribute(key, value, response);</span>
    </div>
    <div style="position:absolute;left:121.68px;top:513.20px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:525.80px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:557.32px" class="cls_002"><span
            class="cls_002">We will use the HTTP </span><span class="cls_008">302 Found</span><span class="cls_002"> status for the default route, </span><span
            class="cls_008">/catalog</span><span class="cls_002">. In</span></div>
    <div style="position:absolute;left:87.54px;top:574.13px" class="cls_002"><span class="cls_002">this way, all incoming requests will be redirected to </span><span
            class="cls_008">/v2/</span><span class="cls_002">:</span></div>
    <div style="position:absolute;left:101.55px;top:618.25px" class="cls_010"><span class="cls_010">router.get('/', function(request, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:630.85px" class="cls_010"><span class="cls_010">console.log('Redirecting to v2');</span>
    </div>
    <div style="position:absolute;left:111.61px;top:643.46px" class="cls_010"><span class="cls_010">response.writeHead(302, {'Location' : '/catalog/v2/'});</span>
    </div>
    <div style="position:absolute;left:111.61px;top:656.06px" class="cls_010"><span class="cls_010">response.end('Version 2 is is available at /catalog/v2/: ');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:668.67px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:700.18px" class="cls_002"><span class="cls_002">Using an appropriate status code for redirection here is vital to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:716.99px" class="cls_002"><span class="cls_002">life cycle of any RESTful web service. Returning </span><span
            class="cls_008">302 Found</span><span class="cls_002">, followed</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:154031px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background182.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">by a redirection, ensures that the consumer of the API will always</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">have its latest version available at that location. Furthermore, it is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">also a good practice from the development point of view to use</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">redirection instead of code duplication here.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">When you are between two versions, you should always consider</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span
            class="cls_002">using the HTTP </span><span class="cls_008">301 Moved Permanently</span><span
            class="cls_002"> status to show where the previous</span></div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">version has been moved and the HTTP </span><span
            class="cls_008">302 Found</span><span class="cls_002"> status to show the</span></div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">actual URI of the current version.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:273.69px" class="cls_002"><span class="cls_002">Now, getting back to pagination, as the requested page and the limit</span>
    </div>
    <div style="position:absolute;left:87.54px;top:290.50px" class="cls_002"><span class="cls_002">number are provided as </span><span
            class="cls_008">GET</span><span class="cls_002"> parameters and we don't want to mix</span></div>
    <div style="position:absolute;left:87.54px;top:307.30px" class="cls_002"><span class="cls_002">that up with the filtering capabilities, there is an explicit check for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:324.11px" class="cls_002"><span class="cls_002">them. Pagination will be used only when either the page or the limit</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.92px" class="cls_008"><span class="cls_008">GET</span><span
            class="cls_002"> parameters, are available in the request. Otherwise, searching</span></div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span
            class="cls_002">will be carried out.</span></div>
    <div style="position:absolute;left:87.54px;top:392.04px" class="cls_002"><span class="cls_002">Initially, we set the maximum limit of 100 results and a default limit</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.85px" class="cls_002"><span class="cls_002">of 10, so, before trying the new pagination functionality, ensure that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:425.66px" class="cls_002"><span class="cls_002">you insert more items than the default limit into the database. This</span>
    </div>
    <div style="position:absolute;left:87.54px;top:442.47px" class="cls_002"><span class="cls_002">will make the test results more obvious.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:476.78px" class="cls_002"><span class="cls_002">Now, let's give it a try. Requesting </span><span
            class="cls_008">/catalog?limit=3</span><span class="cls_002"> will result in</span></div>
    <div style="position:absolute;left:87.54px;top:493.59px" class="cls_002"><span class="cls_002">returning a list containing only two items, as shown:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:154882px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background183.jpg" width=595 height=841></div>
    <div style="position:absolute;left:89.56px;top:528.61px" class="cls_005"><span class="cls_005">Pagination enabled results. This is a screenshot for Postman. The individual settings are not important here. The</span>
    </div>
    <div style="position:absolute;left:188.19px;top:538.41px" class="cls_005"><span class="cls_005">purpose of the image is just to show how the window looks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:558.72px" class="cls_002"><span class="cls_002">As you can see from the example, the total number of pages is four.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:575.53px" class="cls_002"><span class="cls_002">The total number of items is stored in the database 11. Since we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:592.34px" class="cls_002"><span class="cls_002">didn't specify a page parameter in the request, the pagination</span>
    </div>
    <div style="position:absolute;left:87.54px;top:609.14px" class="cls_002"><span class="cls_002">implicitly returned the first page. To navigate to the next page,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:625.95px" class="cls_002"><span
            class="cls_002">simply add </span><span class="cls_008">&page=2</span><span
            class="cls_002"> to the URI.</span></div>
    <div style="position:absolute;left:87.54px;top:660.27px" class="cls_002"><span class="cls_002">Also, try changing the </span><span
            class="cls_008">limit</span><span class="cls_002"> attribute, requesting </span><span class="cls_008">/catalog/v2?limit=4</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:677.07px" class="cls_002"><span class="cls_002">This will return the first four items, and the response will show that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:693.88px" class="cls_002"><span class="cls_002">the total number of pages is three.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:155733px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background184.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Caching</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">When we discussed the REST principles defined by Roy Fielding,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">we mentioned that caching was a rather sensitive topic. In the end,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">our consumers will expect up-to-date results when executing a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">query. However, from a statistical point of view, data exposed in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">web is more likely to be read rather than updated or deleted.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">So, it is reasonable that some resources exposed by a public URL</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span class="cls_002">become a subject of millions of requests, considering taking off part</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">of the load from the server to a cache. The HTTP protocol allows us</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">to cache some responses for a given period of time. For instance,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">when multiple requests are received in a short period of time,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">querying for all items in the catalog of a given group, such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_008"><span
            class="cls_008">/catalog/v2</span><span class="cls_002">, our service can utilize special HTTP headers that would</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">force the HTTP server to cache the response for a defined time</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">period. This would prevent redundant requests to the underlying</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span
            class="cls_002">database server.</span></div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">Caching at the HTTP server level is achieved via special response</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.00px" class="cls_002"><span class="cls_002">headers. The HTTP server uses a </span><span
            class="cls_008">Cache-Control</span><span class="cls_002"> header to specify how</span></div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">long a given response should be cached for. The period before the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span class="cls_002">cache needs invalidation is set via its </span><span
            class="cls_008">max-age</span><span class="cls_002"> attribute, and its value</span></div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">is provided in seconds. Of course, there is a nice Node.js module</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span class="cls_002">that provides a middleware function for caching, called </span><span
            class="cls_008">express-cache-</span></div>
    <div style="position:absolute;left:87.54px;top:593.04px" class="cls_008"><span class="cls_008">control</span><span
            class="cls_002">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:156584px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background185.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Supplying the Cache-Control</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">header in Express applications</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Let's install it with the NPM package manager; once again, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">install it globally and make use of the </span><span
            class="cls_008">-s</span><span class="cls_002"> option, which will update</span></div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">package.json</span><span class="cls_002"> file with the new </span><span class="cls_008">express-cache-control</span><span
            class="cls_002"> dependency</span></div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">automatically:</span>
    </div>
    <div style="position:absolute;left:121.68px;top:330.41px" class="cls_010"><span class="cls_010">npm install -g -s express-cache-control</span>
    </div>
    <div style="position:absolute;left:87.54px;top:361.93px" class="cls_002"><span class="cls_002">Enabling caching with the </span><span
            class="cls_008">express-cache-control</span><span class="cls_002"> middleware requires</span></div>
    <div style="position:absolute;left:87.54px;top:378.74px" class="cls_002"><span class="cls_002">three straightforward steps:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:418.65px" class="cls_002"><span
            class="cls_002">1. Get the module:</span></div>
    <div style="position:absolute;left:131.75px;top:475.38px" class="cls_010"><span class="cls_010">CacheControl = require("express-cache-control")</span>
    </div>
    <div style="position:absolute;left:114.15px;top:519.50px" class="cls_002"><span class="cls_002">2. Create an instance of the </span><span
            class="cls_008">CacheControl</span><span class="cls_002"> middleware:</span></div>
    <div style="position:absolute;left:145.80px;top:576.23px" class="cls_010"><span class="cls_010">var cache = new CacheControl().middleware;</span>
    </div>
    <div style="position:absolute;left:114.15px;top:620.35px" class="cls_002"><span class="cls_002">3. To bind the middleware instance to the routes you want to</span>
    </div>
    <div style="position:absolute;left:133.06px;top:641.36px" class="cls_002"><span
            class="cls_002">enable caching for:</span></div>
    <div style="position:absolute;left:140.77px;top:698.08px" class="cls_010"><span class="cls_010">router.get('/v2/', cache('minutes', 1), function(request, response) {</span>
    </div>
    <div style="position:absolute;left:160.90px;top:710.69px" class="cls_010"><span class="cls_010">var getParams = url.parse(request.url, true).query;</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:157435px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background186.jpg" width=595 height=841></div>
    <div style="position:absolute;left:160.90px;top:104.91px" class="cls_010"><span class="cls_010">if (getParams['page'] !=null || getParams['limit'] != null) {</span>
    </div>
    <div style="position:absolute;left:170.97px;top:117.51px" class="cls_010"><span class="cls_010">catalogV2.paginate(model.CatalogItem, request, response);</span>
    </div>
    <div style="position:absolute;left:160.90px;top:130.12px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:170.97px;top:142.73px" class="cls_010"><span class="cls_010">var key = Object.keys(getParams)[0];</span>
    </div>
    <div style="position:absolute;left:170.97px;top:155.33px" class="cls_010"><span class="cls_010">var value = getParams[key];</span>
    </div>
    <div style="position:absolute;left:170.97px;top:167.94px" class="cls_010"><span class="cls_010">catalogV2.findItemsByAttribute(key, value, response);</span>
    </div>
    <div style="position:absolute;left:160.90px;top:180.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:140.77px;top:193.15px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:132.36px;top:214.16px" class="cls_009"><span class="cls_009">Usually, common URIs that provide many result entries should be the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:226.06px" class="cls_009"><span class="cls_009">subject of caching, rather than URIs providing data for a concrete entry. In</span>
    </div>
    <div style="position:absolute;left:132.36px;top:237.97px" class="cls_009"><span class="cls_009">our application, only the </span><span
            class="cls_017">/catalog</span><span class="cls_009"> URI will make use of caching. The </span><span
            class="cls_017">max-age</span></div>
    <div style="position:absolute;left:132.36px;top:249.88px" class="cls_009"><span class="cls_009">attribute must be selected according to the load of your application to</span>
    </div>
    <div style="position:absolute;left:132.36px;top:261.78px" class="cls_009"><span class="cls_009">minimize inaccurate responses.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:284.19px" class="cls_002"><span class="cls_002">Let's test our changes by requesting </span><span
            class="cls_008">/catalog/v2</span><span class="cls_002"> in Postman:</span></div>
    <div style="position:absolute;left:88.18px;top:681.28px" class="cls_005"><span class="cls_005">Cache-control header indicating that caching is enabled. This is a screenshot for Postman. The individual settings</span>
    </div>
    <div style="position:absolute;left:135.84px;top:691.08px" class="cls_005"><span class="cls_005">are not important here. The purpose of the image is just to show how the window looks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:711.39px" class="cls_002"><span
            class="cls_002">As expected, the </span><span class="cls_008">express-cache-control</span><span
            class="cls_002"> middleware has done its job—the</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:158286px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background187.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.00px" class="cls_008"><span
            class="cls_008">Cache-Control</span><span
            class="cls_002"> header is now included in the response. The </span><span
            class="cls_008">must-revalidate</span></div>
    <div style="position:absolute;left:87.54px;top:120.81px" class="cls_002"><span class="cls_002">option ensures that the cache content is invalidated after the </span><span
            class="cls_008">max-age</span></div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">interval expires. Now, if you make another request for a specific</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.42px" class="cls_002"><span class="cls_002">item, you will see that the response does not make use of the </span><span
            class="cls_008">express-</span></div>
    <div style="position:absolute;left:87.54px;top:171.23px" class="cls_008"><span
            class="cls_008">cache-control</span><span class="cls_002"> middleware, which is because it needs to be explicitly</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">provided in each individual route. It will not be used in URIs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">deriving from one another.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span
            class="cls_002">Responses from </span><span class="cls_008">GET</span><span class="cls_002"> requests against any route </span><span
            class="cls_008">/v1/</span><span class="cls_002"> will not contain</span></div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">Cache-Control</span><span class="cls_002"> header, as it is supported only in Version 2 of our</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span
            class="cls_002">API, and the </span><span class="cls_008">Cache-Control</span><span class="cls_002"> middleware is used only in the main catalog</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.80px" class="cls_002"><span class="cls_002">routes: </span><span
            class="cls_008">/catalog/v2/</span><span class="cls_002"> or </span><span
            class="cls_008">/catalog</span><span class="cls_002">.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:159137px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background188.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Congratulations! In this chapter, you succeeded in transforming a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">sample REST-enabled endpoint into a full-fledged RESTful web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">service that supports filtering for usability and paging for easy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">navigation. The service delivers both arbitrary and JSON data, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">it is ready for high-load scenarios, as it enables caching in its critical</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">parts. One thing that should draw your attention is the appropriate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">usage of the HTTP status codes when it comes to redirection</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">between new and obsolete versions of any public API.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">Implementing appropriate HTTP status is really important for the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">REST application, so we made use of rather exotic statuses, such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_008"><span
            class="cls_008">301 Moved Permanently</span><span class="cls_002"> and </span><span class="cls_008">302 Found</span><span
            class="cls_002">. In the next chapter, we will introduce</span></div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">the concept of authorization into our application.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:159988px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background189.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Preparing a RESTful API for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">Production</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">In the previous chapter, we implemented a full fledged catalog</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">RESTful API; however, there is a difference between a completely</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">functional API and a production-ready one. In this chapter, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">cover how an API should be documented and tested thoroughly.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">These key requirements have to be completed by any piece of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">software before going productive.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">To sum up, in this chapter, we will cover the following topics:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:393.44px" class="cls_002"><span class="cls_002">Documenting RESTful APIs</span>
    </div>
    <div style="position:absolute;left:133.06px;top:423.56px" class="cls_002"><span class="cls_002">Testing RESTful APIs with Mocha</span>
    </div>
    <div style="position:absolute;left:133.06px;top:453.67px" class="cls_002"><span class="cls_002">The microservices revolution</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:160839px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background190.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Documenting RESTful APIs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Until now, we partially covered how RESTful web services APIs are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">described by wadl and documented by swagger specifications. Now</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">it's time to take full advantage of them and expose their self-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">descriptive metadata in express.js routes in our catalog application.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">That way, both consumers and end users will have separate URLs</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">for the metadata they will need to adopt the service easily. Let's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">start with the wadl definitions. Here's how an operation is fully</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span
            class="cls_002">described by wadl:</span></div>
    <div style="position:absolute;left:111.61px;top:366.83px" class="cls_010"><span
            class="cls_010">&lt;resources base="</span><A HREF="http://localhost:8080/catalog/"/">http://localhost:8080/catalog/"</A>
        >
    </div>
    <div style="position:absolute;left:141.82px;top:379.44px" class="cls_010"><span class="cls_010">&lt;resource path="/catalog/item/{itemId}"></span>
    </div>
    <div style="position:absolute;left:161.95px;top:392.04px" class="cls_010"><span class="cls_010">&lt;method name="GET"></span>
    </div>
    <div style="position:absolute;left:182.08px;top:404.65px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:202.22px;top:417.25px" class="cls_010"><span class="cls_010">&lt;param name="category" type="xsd:string"</span>
    </div>
    <div style="position:absolute;left:101.55px;top:429.86px" class="cls_010"><span
            class="cls_010">style="template"/></span></div>
    <div style="position:absolute;left:182.08px;top:442.47px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:182.08px;top:455.07px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:467.68px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:480.28px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:492.89px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:505.49px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:518.10px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:530.71px" class="cls_010"><span class="cls_010">&lt;response status="500"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:543.31px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:555.92px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:568.52px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:161.95px;top:581.13px" class="cls_010"><span class="cls_010">&lt;method name="PUT"></span>
    </div>
    <div style="position:absolute;left:182.08px;top:593.74px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:202.22px;top:606.34px" class="cls_010"><span class="cls_010">&lt;param name="itemId" type="xsd:string" style="template"/></span>
    </div>
    <div style="position:absolute;left:182.08px;top:618.95px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:182.08px;top:631.55px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:644.16px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:656.76px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:669.37px" class="cls_010"><span class="cls_010">&lt;response status="201"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:681.98px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:694.58px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:707.19px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:719.79px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:161690px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background191.jpg" width=595 height=841></div>
    <div style="position:absolute;left:182.08px;top:104.91px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:117.51px" class="cls_010"><span class="cls_010">&lt;response status="500"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:130.12px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:142.73px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:155.33px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:161.95px;top:167.94px" class="cls_010"><span class="cls_010">&lt;method name="POST"></span>
    </div>
    <div style="position:absolute;left:182.08px;top:180.54px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:202.22px;top:193.15px" class="cls_010"><span class="cls_010">&lt;param name="itemId" type="xsd:string"</span>
    </div>
    <div style="position:absolute;left:207.25px;top:205.76px" class="cls_010"><span
            class="cls_010">style="template"/></span></div>
    <div style="position:absolute;left:182.08px;top:218.36px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:182.08px;top:230.97px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:243.57px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:256.18px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:268.78px" class="cls_010"><span class="cls_010">&lt;response status="201"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:281.39px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:294.00px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:306.60px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:319.21px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:331.81px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:344.42px" class="cls_010"><span class="cls_010">&lt;response status="500"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:357.03px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:369.63px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:382.24px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:161.95px;top:394.84px" class="cls_010"><span class="cls_010">&lt;method name="DELETE"></span>
    </div>
    <div style="position:absolute;left:182.08px;top:407.45px" class="cls_010"><span class="cls_010">&lt;request></span>
    </div>
    <div style="position:absolute;left:202.22px;top:420.05px" class="cls_010"><span class="cls_010">&lt;param name="itemId" type="xsd:string"</span>
    </div>
    <div style="position:absolute;left:207.25px;top:432.66px" class="cls_010"><span
            class="cls_010">style="template"/></span></div>
    <div style="position:absolute;left:182.08px;top:445.27px" class="cls_010"><span class="cls_010">&lt;/request></span>
    </div>
    <div style="position:absolute;left:182.08px;top:457.87px" class="cls_010"><span class="cls_010">&lt;response status="200"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:470.48px" class="cls_010"><span class="cls_010">&lt;representation mediaType="application/json" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:483.08px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:495.69px" class="cls_010"><span class="cls_010">&lt;response status="404"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:508.30px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:520.90px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:182.08px;top:533.51px" class="cls_010"><span class="cls_010">&lt;response status="500"></span>
    </div>
    <div style="position:absolute;left:202.22px;top:546.11px" class="cls_010"><span class="cls_010">&lt;representation mediaType="text/plain" /></span>
    </div>
    <div style="position:absolute;left:182.08px;top:558.72px" class="cls_010"><span
            class="cls_010">&lt;/response></span></div>
    <div style="position:absolute;left:161.95px;top:571.32px" class="cls_010"><span class="cls_010">&lt;/method></span>
    </div>
    <div style="position:absolute;left:141.82px;top:583.93px" class="cls_010"><span
            class="cls_010">&lt;/resource></span></div>
    <div style="position:absolute;left:131.75px;top:596.54px" class="cls_010"><span
            class="cls_010">&lt;/resources></span></div>
    <div style="position:absolute;left:87.54px;top:628.05px" class="cls_002"><span class="cls_002">Each route thoroughly describes all the operations it exposes; that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:644.86px" class="cls_002"><span class="cls_002">way, they will be indexed and discoverable by clients compliant with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:661.67px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">wadl</span><span class="cls_002"> specification. Once you have all your operations described,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:678.47px" class="cls_002"><span
            class="cls_002">simply store the </span><span class="cls_008">wadl</span><span
            class="cls_002"> file in the </span><span class="cls_008">static</span><span class="cls_002"> directory of your </span><span
            class="cls_008">express.js</span></div>
    <div style="position:absolute;left:87.54px;top:695.28px" class="cls_002"><span class="cls_002">project and expose it from application: </span><span
            class="cls_008">app.use('/catalog/static',</span></div>
    <div style="position:absolute;left:87.54px;top:711.39px" class="cls_008"><span class="cls_008">express.static('static'));</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:162541px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background192.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">After starting your application locally, your </span><span
            class="cls_008">wadl</span><span class="cls_002"> file will be ready to</span></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span
            class="cls_002">serve clients at </span><span class="cls_008">http://localhost:3000/catalog/static/catalog.wadl</span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:155.33px" class="cls_002"><span class="cls_002">Let's give that a try and import it to Postman:</span>
    </div>
    <div style="position:absolute;left:95.65px;top:550.32px" class="cls_005"><span class="cls_005">Importing wadl file into Postman. This is a screenshot for Postman. The individual settings are not important</span>
    </div>
    <div style="position:absolute;left:169.74px;top:560.12px" class="cls_005"><span class="cls_005">here. The purpose of the image is just to show how the window looks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:580.43px" class="cls_002"><span
            class="cls_002">Serving the </span><span class="cls_008">wadl</span><span class="cls_002"> file statically will help your application in getting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:597.24px" class="cls_002"><span class="cls_002">indexed by search engines; this further increases the adoption of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:614.05px" class="cls_002"><span class="cls_002">your API.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:648.36px" class="cls_002"><span class="cls_002">However, slowly but surely, </span><span
            class="cls_008">wadl</span><span class="cls_002"> is losing grip in favor of </span><span class="cls_008">swagger</span><span
            class="cls_002">. The</span></div>
    <div style="position:absolute;left:87.54px;top:665.17px" class="cls_002"><span class="cls_002">evolution of JavaScript REST-enabled applications has led to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:681.98px" class="cls_002"><span class="cls_002">requirement of the non-XML based standard for discovering</span>
    </div>
    <div style="position:absolute;left:87.54px;top:698.78px" class="cls_002"><span class="cls_002">RESTful services. That is the reason for </span><span
            class="cls_008">swagger</span><span class="cls_002"> to become the de</span></div>
    <div style="position:absolute;left:87.54px;top:715.59px" class="cls_002"><span class="cls_002">facto standard, not only for documenting RESTful services, but also</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:163392px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background193.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.08px" class="cls_002"><span class="cls_002">for its widely adopted discovery format. While XML-aware</span>
    </div>
    <div style="position:absolute;left:87.54px;top:120.89px" class="cls_002"><span class="cls_002">platforms are still relying on </span><span
            class="cls_008">wadl</span><span class="cls_002">, JavaScript and other non XML-</span></div>
    <div style="position:absolute;left:87.54px;top:137.69px" class="cls_002"><span class="cls_002">native platforms are heavily relying on the </span><span
            class="cls_008">swagger</span><span class="cls_002"> specification, not</span></div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">only for description but also for discovery and consumption, and its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">adoption is progressing rapidly. So you should consider having your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.12px" class="cls_002"><span
            class="cls_002">APIs described in </span><span class="cls_008">swagger</span><span class="cls_002"> to ensure easy adoption from any platform</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">out there. Here's how an operation is fully described in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.73px" class="cls_008"><span class="cls_008">swagger</span><span
            class="cls_002"> dialect:</span></div>
    <div style="position:absolute;left:101.55px;top:265.98px" class="cls_010"><span class="cls_010">{</span></div>
    <div style="position:absolute;left:121.68px;top:278.59px" class="cls_010"><span
            class="cls_010">"swagger": "2.0",</span></div>
    <div style="position:absolute;left:121.68px;top:291.20px" class="cls_010"><span class="cls_010">"info": {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:303.80px" class="cls_010"><span class="cls_010">"title": "Catalog API Documentation",</span>
    </div>
    <div style="position:absolute;left:131.75px;top:316.41px" class="cls_010"><span
            class="cls_010">"version": "v1"</span></div>
    <div style="position:absolute;left:121.68px;top:329.01px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:121.68px;top:341.62px" class="cls_010"><span class="cls_010">"paths": {"/catalog/item/{itemId}": {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:354.22px" class="cls_010"><span class="cls_010">"get": {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:366.83px" class="cls_010"><span class="cls_010">"operationId": "getItemV2",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:379.44px" class="cls_010"><span class="cls_010">"summary": "Get an existing item",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:392.04px" class="cls_010"><span class="cls_010">"produces": ["application/json"],</span>
    </div>
    <div style="position:absolute;left:151.88px;top:404.65px" class="cls_010"><span
            class="cls_010">"responses": {</span></div>
    <div style="position:absolute;left:161.95px;top:417.25px" class="cls_010"><span class="cls_010">"200": {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:429.86px" class="cls_010"><span class="cls_010">"description": "200 OK",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:442.47px" class="cls_010"><span class="cls_010">"examples": {</span>
    </div>
    <div style="position:absolute;left:182.08px;top:455.07px" class="cls_010"><span class="cls_010">"application/json": {</span>
    </div>
    <div style="position:absolute;left:202.22px;top:467.68px" class="cls_010"><span class="cls_010">"_id": "5a4c004b0eed73835833cc9a",</span>
    </div>
    <div style="position:absolute;left:202.22px;top:480.28px" class="cls_010"><span
            class="cls_010">"itemId": "1",</span></div>
    <div style="position:absolute;left:202.22px;top:492.89px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch",</span>
    </div>
    <div style="position:absolute;left:202.22px;top:505.49px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:202.22px;top:518.10px" class="cls_010"><span
            class="cls_010">"currency": "EUR",</span></div>
    <div style="position:absolute;left:202.22px;top:530.71px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:202.22px;top:543.31px" class="cls_010"><span class="cls_010">"categories": [ "Watches", "Sports Watches"]</span>
    </div>
    <div style="position:absolute;left:192.15px;top:555.92px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:172.02px;top:568.52px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:161.95px;top:581.13px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:161.95px;top:593.74px" class="cls_010"><span class="cls_010">"404": {"description": "404 Not Found"},</span>
    </div>
    <div style="position:absolute;left:161.95px;top:606.34px" class="cls_010"><span class="cls_010">"500": {"description": "500 Internal Server Error"}</span>
    </div>
    <div style="position:absolute;left:151.88px;top:618.95px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:631.55px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:141.82px;top:644.16px" class="cls_010"><span class="cls_010">"post": {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:656.76px" class="cls_010"><span class="cls_010">"404": {"description": "404 Not Found"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:669.37px" class="cls_010"><span class="cls_010">"500": {"description": "500 Internal Server Error"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:681.98px" class="cls_010"><span class="cls_010">"operationId": "postItemV2",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:694.58px" class="cls_010"><span class="cls_010">"summary": "Creates new or updates existing item",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:707.19px" class="cls_010"><span class="cls_010">"produces": ["application/json"],</span>
    </div>
    <div style="position:absolute;left:151.88px;top:719.79px" class="cls_010"><span
            class="cls_010">"responses": {</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:164243px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background194.jpg" width=595 height=841></div>
    <div style="position:absolute;left:161.95px;top:104.91px" class="cls_010"><span class="cls_010">"200": {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:117.51px" class="cls_010"><span class="cls_010">"itemId": 19,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:130.12px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 19",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:142.73px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:155.33px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:172.02px;top:167.94px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:180.54px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:182.08px;top:193.15px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:182.08px;top:205.76px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:172.02px;top:218.36px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:161.95px;top:230.97px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:161.95px;top:243.57px" class="cls_010"><span class="cls_010">"201": {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:256.18px" class="cls_010"><span class="cls_010">"itemId": 19,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:268.78px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 19",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:281.39px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:294.00px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:172.02px;top:306.60px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:319.21px" class="cls_010"><span class="cls_010">"categories": [ "Watches", "Sports Watches"]</span>
    </div>
    <div style="position:absolute;left:161.95px;top:331.81px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:161.95px;top:344.42px" class="cls_010"><span
            class="cls_010">"500": "text/html"</span></div>
    <div style="position:absolute;left:151.88px;top:357.03px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:369.63px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:141.82px;top:382.24px" class="cls_010"><span class="cls_010">"put": {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:394.84px" class="cls_010"><span class="cls_010">"404": {"description": "404 Not Found"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:407.45px" class="cls_010"><span class="cls_010">"500": {"description": "500 Internal Server Error"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:420.05px" class="cls_010"><span class="cls_010">"operationId": "putItemV2",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:432.66px" class="cls_010"><span class="cls_010">"summary": "Creates new or updates existing item",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:445.27px" class="cls_010"><span class="cls_010">"produces": ["application/json"],</span>
    </div>
    <div style="position:absolute;left:151.88px;top:457.87px" class="cls_010"><span
            class="cls_010">"responses": {</span></div>
    <div style="position:absolute;left:161.95px;top:470.48px" class="cls_010"><span class="cls_010">"200": {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:483.08px" class="cls_010"><span class="cls_010">"itemId": 19,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:495.69px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 19",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:508.30px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:520.90px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:172.02px;top:533.51px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:546.11px" class="cls_010"><span class="cls_010">"categories": [ "Watches","Sports Watches"]</span>
    </div>
    <div style="position:absolute;left:161.95px;top:558.72px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:161.95px;top:571.33px" class="cls_010"><span class="cls_010">"201": {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:583.93px" class="cls_010"><span class="cls_010">"itemId": 19,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:596.54px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 19",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:609.14px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:621.75px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:172.02px;top:634.35px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:172.02px;top:646.96px" class="cls_010"><span class="cls_010">"categories": ["Watches", "Sports Watches"]</span>
    </div>
    <div style="position:absolute;left:161.95px;top:659.57px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:161.95px;top:672.17px" class="cls_010"><span
            class="cls_010">"500": "text/html"</span></div>
    <div style="position:absolute;left:151.88px;top:684.78px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:697.38px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:141.82px;top:709.99px" class="cls_010"><span class="cls_010">"delete": {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:722.60px" class="cls_010"><span class="cls_010">"404": {"description": "404 Not Found"},</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:165094px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background195.jpg" width=595 height=841></div>
    <div style="position:absolute;left:151.88px;top:104.91px" class="cls_010"><span class="cls_010">"500": {"description": "500 Internal Server Error"},</span>
    </div>
    <div style="position:absolute;left:151.88px;top:117.51px" class="cls_010"><span class="cls_010">"operationId": "deleteItemV2",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:130.12px" class="cls_010"><span class="cls_010">"summary": "Deletes an existing item",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:142.73px" class="cls_010"><span class="cls_010">"produces": ["application/json"],</span>
    </div>
    <div style="position:absolute;left:151.88px;top:155.33px" class="cls_010"><span class="cls_010">"responses": {"200": {"deleted": true },</span>
    </div>
    <div style="position:absolute;left:161.95px;top:167.94px" class="cls_010"><span
            class="cls_010">"500": "text/html"}</span></div>
    <div style="position:absolute;left:141.82px;top:180.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:193.15px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:116.65px;top:205.76px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:111.61px;top:218.36px" class="cls_010"><span class="cls_010">consumes": ["application/json"]</span>
    </div>
    <div style="position:absolute;left:111.61px;top:230.97px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:106.58px;top:243.57px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_002"><span class="cls_002">Finally, after having all the APIs' operations described in a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:291.90px" class="cls_008"><span
            class="cls_008">swagger.json</span><span class="cls_002"> file, it should be statically exposed, similar to the </span><span
            class="cls_008">wadl</span><span class="cls_002"> file.</span></div>
    <div style="position:absolute;left:87.54px;top:308.70px" class="cls_002"><span class="cls_002">Since the application already has a route for the static directory, just</span>
    </div>
    <div style="position:absolute;left:87.54px;top:325.51px" class="cls_002"><span
            class="cls_002">place the </span><span class="cls_008">swagger.json</span><span class="cls_002"> file there, and it will be ready for serving</span>
    </div>
    <div style="position:absolute;left:87.54px;top:342.32px" class="cls_002"><span class="cls_002">consumers and promoting discovery. </span><span
            class="cls_008">Swagger</span><span class="cls_002">, being mainly a</span></div>
    <div style="position:absolute;left:87.54px;top:359.13px" class="cls_002"><span class="cls_002">documentation tool, however, mainly targets developers; thus, it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:375.93px" class="cls_002"><span class="cls_002">needs a frontend that makes the documentation easy to read and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:392.74px" class="cls_002"><span class="cls_002">understand. There is an </span><span
            class="cls_008">npm</span><span class="cls_002"> module—</span><span class="cls_008">swagger-ui</span><span
            class="cls_002">—that wraps up the</span></div>
    <div style="position:absolute;left:87.54px;top:409.55px" class="cls_002"><span class="cls_002">default swagger frontend for us. We will adopt it in our application,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:426.36px" class="cls_002"><span class="cls_002">so let's use the package manager to install it—</span><span
            class="cls_008">npm install swagger-ui</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:443.17px" class="cls_002"><span class="cls_002">Once installed, simply require an instance of the module along with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:459.97px" class="cls_002"><span class="cls_002">an instance of the static </span><span
            class="cls_008">swagger.json</span><span class="cls_002"> file and use them in a separate</span></div>
    <div style="position:absolute;left:87.54px;top:476.78px" class="cls_002"><span class="cls_002">route:</span></div>
    <div style="position:absolute;left:101.55px;top:520.90px" class="cls_010"><span class="cls_010">const swaggerUi = require('swagger-ui-express');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:533.51px" class="cls_010"><span class="cls_010">const swaggerDocument = require('./static/swagger.json');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:558.72px" class="cls_010"><span class="cls_010">app.use('/catalog/api-docs', swaggerUi.serve,</span>
    </div>
    <div style="position:absolute;left:101.55px;top:571.32px" class="cls_010"><span class="cls_010">swaggerUi.setup(swaggerDocument));</span>
    </div>
    <div style="position:absolute;left:87.54px;top:602.84px" class="cls_002"><span class="cls_002">Start your application and request </span><A
            HREF="http://localhost:3000/catalog/api-docs/">http://localhost:3000/catalog/api-docs/</A> </span></div>
    <div style="position:absolute;left:87.54px;top:619.65px" class="cls_002"><span class="cls_002">in a browser:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:165945px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background196.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:166796px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background197.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:114.71px" class="cls_002"><span class="cls_002">As you can see, the swagger-ui module provided the standard</span>
    </div>
    <div style="position:absolute;left:87.54px;top:131.52px" class="cls_002"><span class="cls_002">swagger frontend for you.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:165.84px" class="cls_009"><span class="cls_009">Keep in mind that, as a developer, keeping your API documentation in a</span>
    </div>
    <div style="position:absolute;left:132.36px;top:177.74px" class="cls_009"><span class="cls_009">shape and up to date is your responsibility.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:167647px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background198.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Testing RESTful APIs with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">Mocha</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Have you noted that the </span><span
            class="cls_008">app.js</span><span class="cls_002"> express application created with</span></div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_008"><span
            class="cls_008">express-generator</span><span class="cls_002"> is actually a </span><span class="cls_008">node.js</span><span
            class="cls_002"> module exporting the express</span></div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">instance? In case you have, you must have asked yourself why that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">is actually needed. Well, having the express instance exported as a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">module enables it to be unit-tested. We already utilized the </span><span
            class="cls_008">mocha</span></div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span
            class="cls_002">framework in </span><span class="cls_007">Chapter 4</span><span
            class="cls_002">, </span><span class="cls_003">Using NoSQL Databases,</span><span
            class="cls_002"> where we</span></div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">developed a unit test for the </span><span
            class="cls_008">CatalogItem</span><span class="cls_002"> module. We will use </span><span class="cls_008">mocha</span><span
            class="cls_002"> once</span></div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">again and wrap a unit test around each operation API exposes. To</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">unit-test the express application, we will need to do the following:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:410.25px" class="cls_002"><span class="cls_002">1. Require an instance to the </span><span
            class="cls_008">express.js</span><span class="cls_002"> application with the</span></div>
    <div style="position:absolute;left:133.06px;top:431.26px" class="cls_002"><span class="cls_002">routes, making use of its being exported as a module</span>
    </div>
    <div style="position:absolute;left:114.15px;top:452.27px" class="cls_002"><span class="cls_002">2. Start the </span><span
            class="cls_008">express.js</span><span class="cls_002"> instance in unit test environment</span></div>
    <div style="position:absolute;left:114.15px;top:473.28px" class="cls_002"><span class="cls_002">3. Invoke its operations via a test library and assert against the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:494.29px" class="cls_002"><span class="cls_002">results</span></div>
    <div style="position:absolute;left:114.15px;top:515.30px" class="cls_002"><span class="cls_002">4. Finally, execute the </span><span
            class="cls_008">npm test</span><span class="cls_002"> command to trigger the unit test</span></div>
    <div style="position:absolute;left:87.54px;top:562.22px" class="cls_002"><span class="cls_002">Before moving on and implementing mocha tests, we need a library</span>
    </div>
    <div style="position:absolute;left:87.54px;top:579.03px" class="cls_002"><span class="cls_002">for sending HTTP requests from the unit tests; we will make use of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:595.84px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">chai</span><span
            class="cls_002"> module. It provides convenient functions for sending HTTP</span></div>
    <div style="position:absolute;left:87.54px;top:612.64px" class="cls_002"><span class="cls_002">requests, and it also bundles the </span><span
            class="cls_008">should.js</span><span class="cls_002"> assertion library to verify</span></div>
    <div style="position:absolute;left:87.54px;top:629.45px" class="cls_002"><span class="cls_002">the expected results. To install </span><span
            class="cls_008">chai</span><span class="cls_002">, simply execute </span><span class="cls_008">npm install chai</span>
    </div>
    <div style="position:absolute;left:87.54px;top:646.26px" class="cls_002"><span
            class="cls_002">and then its </span><span class="cls_008">npm install chai-http</span><span class="cls_002"> HTTP plugin, and we are ready to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:663.07px" class="cls_002"><span
            class="cls_002">start unit testing!</span></div>
    <div style="position:absolute;left:87.54px;top:697.38px" class="cls_002"><span class="cls_002">As with any other mocha test, we will have to carry out the given</span>
    </div>
    <div style="position:absolute;left:87.54px;top:714.19px" class="cls_002"><span class="cls_002">steps:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:168498px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background199.jpg" width=595 height=841></div>
    <div style="position:absolute;left:115.55px;top:106.31px" class="cls_002"><span class="cls_002">1. Describe each test case</span>
    </div>
    <div style="position:absolute;left:114.15px;top:127.32px" class="cls_002"><span class="cls_002">2. Prepare the test fixture; this time, we will be using </span><span
            class="cls_008">chai-http</span></div>
    <div style="position:absolute;left:133.06px;top:148.33px" class="cls_002"><span class="cls_002">for invoking the rest operations</span>
    </div>
    <div style="position:absolute;left:114.15px;top:169.34px" class="cls_002"><span class="cls_002">3. Assert against the returned results</span>
    </div>
    <div style="position:absolute;left:87.54px;top:216.26px" class="cls_002"><span class="cls_002">A basic unit test covering the operations for creating, accessing, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:233.07px" class="cls_002"><span class="cls_002">deleting resources looks like the following:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:277.19px" class="cls_010"><span class="cls_010">var expressApp = require('../../app');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:289.79px" class="cls_010"><span class="cls_010">var chai = require('chai');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:302.40px" class="cls_010"><span class="cls_010">var chaiHttp = require('chai-http');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:315.01px" class="cls_010"><span class="cls_010">var mongoose = require('mongoose');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:327.61px" class="cls_010"><span class="cls_010">var should = chai.should();</span>
    </div>
    <div style="position:absolute;left:101.55px;top:352.82px" class="cls_010"><span class="cls_010">mongoose.createConnection('mongodb://localhost/catalog-test');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:378.04px" class="cls_010"><span
            class="cls_010">chai.use(chaiHttp);</span></div>
    <div style="position:absolute;left:101.55px;top:403.25px" class="cls_010"><span class="cls_010">describe('/get', function() {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:415.85px" class="cls_010"><span class="cls_010">it('get test', function(done) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:428.46px" class="cls_010"><span class="cls_010">chai.request(expressApp)</span>
    </div>
    <div style="position:absolute;left:131.75px;top:441.06px" class="cls_010"><span
            class="cls_010">.get('/catalog/v2')</span></div>
    <div style="position:absolute;left:131.75px;top:453.67px" class="cls_010"><span class="cls_010">.end(function(error, response) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:466.28px" class="cls_010"><span
            class="cls_010">should.equal(200</span></div>
    <div style="position:absolute;left:232.42px;top:466.28px" class="cls_010"><span
            class="cls_010">, response.status);</span></div>
    <div style="position:absolute;left:141.82px;top:478.88px" class="cls_010"><span class="cls_010">done();</span></div>
    <div style="position:absolute;left:131.75px;top:491.49px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:504.09px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:516.70px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:541.91px" class="cls_010"><span class="cls_010">describe('/post', function() {</span>
    </div>
    <div style="position:absolute;left:126.71px;top:554.52px" class="cls_010"><span class="cls_010">it('post test', function(done) {</span>
    </div>
    <div style="position:absolute;left:136.78px;top:567.12px" class="cls_010"><span class="cls_010">var item ={</span>
    </div>
    <div style="position:absolute;left:151.88px;top:579.73px" class="cls_010"><span class="cls_010">"itemId":19,</span>
    </div>
    <div style="position:absolute;left:151.88px;top:592.33px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 10",</span>
    </div>
    <div style="position:absolute;left:151.88px;top:604.94px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:151.88px;top:617.55px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:151.88px;top:630.15px" class="cls_010"><span class="cls_010">"__v": 0,</span>
    </div>
    <div style="position:absolute;left:151.88px;top:642.76px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:172.02px;top:655.36px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:172.02px;top:667.97px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:151.88px;top:680.58px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:131.75px;top:693.18px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:126.71px;top:705.79px" class="cls_010"><span class="cls_010">chai.request(expressApp)</span>
    </div>
    <div style="position:absolute;left:156.92px;top:718.39px" class="cls_010"><span
            class="cls_010">.post('/catalog/v2')</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:169349px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background200.jpg" width=595 height=841></div>
    <div style="position:absolute;left:156.92px;top:104.91px" class="cls_010"><span class="cls_010">.send(item )</span>
    </div>
    <div style="position:absolute;left:156.92px;top:117.52px" class="cls_010"><span class="cls_010">.end(function(err, response){</span>
    </div>
    <div style="position:absolute;left:177.05px;top:130.12px" class="cls_010"><span class="cls_010">should.equal(201, response.status)</span>
    </div>
    <div style="position:absolute;left:166.98px;top:142.73px" class="cls_010"><span class="cls_010">done();</span></div>
    <div style="position:absolute;left:156.92px;top:155.33px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:126.71px;top:167.94px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:116.65px;top:180.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:116.65px;top:205.76px" class="cls_010"><span class="cls_010">describe('/delete', function() {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:218.36px" class="cls_010"><span class="cls_010">it('delete test', function(done) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:230.97px" class="cls_010"><span class="cls_010">var item ={</span>
    </div>
    <div style="position:absolute;left:166.98px;top:243.57px" class="cls_010"><span class="cls_010">"itemId":19,</span>
    </div>
    <div style="position:absolute;left:166.98px;top:256.18px" class="cls_010"><span class="cls_010">"itemName": "Sports Watch 10",</span>
    </div>
    <div style="position:absolute;left:166.98px;top:268.79px" class="cls_010"><span class="cls_010">"price": 100,</span>
    </div>
    <div style="position:absolute;left:166.98px;top:281.39px" class="cls_010"><span
            class="cls_010">"currency": "USD",</span></div>
    <div style="position:absolute;left:166.98px;top:294.00px" class="cls_010"><span class="cls_010">"__v"cd .: 0,</span>
    </div>
    <div style="position:absolute;left:166.98px;top:306.60px" class="cls_010"><span
            class="cls_010">"categories": [</span></div>
    <div style="position:absolute;left:187.12px;top:319.21px" class="cls_010"><span class="cls_010">"Watches",</span>
    </div>
    <div style="position:absolute;left:187.12px;top:331.81px" class="cls_010"><span
            class="cls_010">"Sports Watches"</span></div>
    <div style="position:absolute;left:166.98px;top:344.42px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:146.85px;top:357.03px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:141.82px;top:369.63px" class="cls_010"><span class="cls_010">chai.request(expressApp)</span>
    </div>
    <div style="position:absolute;left:172.02px;top:382.24px" class="cls_010"><span class="cls_010">.delete('/catalog/v2/item/19')</span>
    </div>
    <div style="position:absolute;left:172.02px;top:394.84px" class="cls_010"><span class="cls_010">.send(item )</span>
    </div>
    <div style="position:absolute;left:172.02px;top:407.45px" class="cls_010"><span class="cls_010">.end(function(err, response){</span>
    </div>
    <div style="position:absolute;left:192.15px;top:420.06px" class="cls_010"><span class="cls_010">should.equal(200, response.status)</span>
    </div>
    <div style="position:absolute;left:182.08px;top:432.66px" class="cls_010"><span class="cls_010">done();</span></div>
    <div style="position:absolute;left:172.02px;top:445.27px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:141.82px;top:457.87px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:131.75px;top:470.48px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_002"><span class="cls_002">Store this file in the test directory of your project; this directory is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:518.80px" class="cls_002"><span class="cls_002">defined as a test directory in the </span><span
            class="cls_008">package.json</span><span class="cls_002"> by default, so to run the</span></div>
    <div style="position:absolute;left:87.54px;top:535.61px" class="cls_002"><span class="cls_002">unit test, just execute </span><span
            class="cls_008">npm test</span><span class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:170200px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background201.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:532.11px" class="cls_002"><span class="cls_002">Congratulations! Now you have your API covered with unit tests,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:548.91px" class="cls_002"><span class="cls_002">and note that the tests aren't mocking anything! They are running</span>
    </div>
    <div style="position:absolute;left:87.54px;top:565.72px" class="cls_002"><span class="cls_002">the express application; exactly the same way, the application will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:582.53px" class="cls_002"><span class="cls_002">be run when it becomes productive, ensuring stability and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:599.34px" class="cls_002"><span class="cls_002">backward compatibility! Currently, the unit test asserts only against</span>
    </div>
    <div style="position:absolute;left:87.54px;top:616.15px" class="cls_002"><span class="cls_002">status code. Spend some time with it and extend them further to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:632.95px" class="cls_002"><span class="cls_002">assert against the response body as well. This will be a good</span>
    </div>
    <div style="position:absolute;left:87.54px;top:649.76px" class="cls_002"><span class="cls_002">exercise.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:171051px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background202.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">The microservices revolution</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">It wasn't very long ago when the RESTful API madness started and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">almost everyone decided that RESTful APIs were the right way to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span
            class="cls_002">go, was it? With </span><span class="cls_008">Linux</span><span class="cls_002"> containers available, it turned out that</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">switching to the REST approach was only half of the way. Currently,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">everyone is benefiting from containers. They provide better, faster,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">and cheaper development and operational model, but are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">microservices just yet another buzz term for RESTful services?</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">Well, no, not at all; RESTful services are just the foundation of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">microservices.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">Microservices are small and independent processes exposing a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">simple interface that allows communication with them and building</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">complex applications without depending on library artefacts. These</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">services resemble small building blocks, highly decoupled and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">focused on doing a small task, facilitating a modular approach to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span
            class="cls_002">system-building.</span></div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">While REST emphasizes on resources and their natural handling,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.00px" class="cls_002"><span class="cls_002">the microservices architecture emphasizes on simplicity, fail-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">safeness, and isolation. A RESTful API doesn't have separate states</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span class="cls_002">per operation; it is either that the entire API is available or it is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">completely down. Microservices attempt to solve that problem,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span class="cls_002">providing means to host each operation on a separate container, or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.04px" class="cls_002"><span class="cls_002">subset of containers, ensuring maximum fault tolerance and agility.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:627.35px" class="cls_002"><span class="cls_002">A microservice is expected to provide a single simple action,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:644.16px" class="cls_002"><span class="cls_002">nothing more. This enables developers to group and consume them</span>
    </div>
    <div style="position:absolute;left:87.54px;top:660.97px" class="cls_002"><span class="cls_002">exactly the way they want. Policy handling, governance, security,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:677.77px" class="cls_002"><span class="cls_002">and monitoring are usually out of the scope when dealing with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:694.58px" class="cls_002"><span class="cls_002">microservices, mainly because they require some kind of context. In</span>
    </div>
    <div style="position:absolute;left:87.54px;top:711.39px" class="cls_002"><span class="cls_002">general, binding context to a service increases its dependencies and</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:171902px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background203.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">makes it less reusable; this is why microservices leave context to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">API management gateways, which allow you to create a composite</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">of microservices and then bind a policy to it and monitor every</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">activity on the gateway. This distribution development model</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">empowers programmers to rapidly grow a collection of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">microservices without considering complex topics such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">governance and security.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">The microservices world is a game changer, benefiting from Linux</span>
    </div>
    <div style="position:absolute;left:87.54px;top:256.18px" class="cls_002"><span class="cls_002">containers. Currently, all cloud-based offerings similar to AWS and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">Azure provide microservices hosting.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:172753px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background204.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, we stepped slightly aside from </span><span
            class="cls_008">Express.js</span><span class="cls_002"> related</span></div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">topics. Instead, we concentrated on how to productionize our code</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">base by providing up-to-date API documentation, along with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">API itself. We had our application invest in precautionary measures</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">for ensuring backward compatibility by implementing more</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">complex unit tests that actually target close-to-real-life</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">implementation. Finally, we decided to look into the future, which</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">is all about microservices. Ensure that you keep this hot topic up in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">your skill-list; it will inevitably evolve in the near future, and the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">more you know about it, the better!</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:173604px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background205.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Consuming a RESTful API</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">To demonstrate some more advanced topics related to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">consumption of our API, we will implement a really simple web</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">client. It will help us cover those topics, and it can serve as a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">reference implementation for the catalog's consumers. For this</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">frontend client, we will use the famous JavaScript library, jQuery.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">Utilizing it will help us cover the following:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:329.01px" class="cls_002"><span class="cls_002">Consuming RESTful services with jQuery</span>
    </div>
    <div style="position:absolute;left:133.06px;top:359.13px" class="cls_002"><span class="cls_002">Content Delivery Network</span>
    </div>
    <div style="position:absolute;left:133.06px;top:389.24px" class="cls_002"><span class="cls_002">Troubleshooting and identifying problems on the wire</span>
    </div>
    <div style="position:absolute;left:133.06px;top:419.35px" class="cls_002"><span class="cls_002">Cross-Origin Resource Sharing policy</span>
    </div>
    <div style="position:absolute;left:133.06px;top:449.47px" class="cls_002"><span class="cls_002">Client-side handling of different HTTP status codes</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:174455px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background206.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Consuming RESTful services</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">with jQuery</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">JQuery is a fast, light, and powerful JavaScript library; it eliminates</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">DOM-related complexity by providing direct access to HTML</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">elements once the DOM three has been loaded. To use jQuery</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">within an HTML document, you have to import it:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_008"><span class="cls_008">&lt;script type="text/javascript" src="</span><A
            HREF="https://code.jquery.com/jquery-3.3.1.min.js/">https://code.jquery.com/jquery-3.3.1.min.js</A> ">
    </div>
    <div style="position:absolute;left:87.54px;top:329.71px" class="cls_008"><span class="cls_008">&lt;/script></span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span class="cls_002">Assume that somewhere within an HTML document, there is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span
            class="cls_002">button defined as </span><span class="cls_008">&lt;input type="button" id="btnDelete" value="Delete"/></span><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:408.85px" class="cls_002"><span class="cls_002">To assign a function to the click event of this button with JQuery</span>
    </div>
    <div style="position:absolute;left:87.54px;top:425.66px" class="cls_002"><span class="cls_002">means we need to do the following:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:465.58px" class="cls_002"><span class="cls_002">1. Import the jquery library in the HTML document</span>
    </div>
    <div style="position:absolute;left:114.15px;top:486.59px" class="cls_002"><span class="cls_002">2. Assure that the DOM document of the HTML document is</span>
    </div>
    <div style="position:absolute;left:133.06px;top:507.60px" class="cls_002"><span
            class="cls_002">completely loaded</span></div>
    <div style="position:absolute;left:114.15px;top:528.61px" class="cls_002"><span class="cls_002">3. Access the button using the identifier defined by the ID</span>
    </div>
    <div style="position:absolute;left:133.06px;top:549.62px" class="cls_002"><span class="cls_002">attribute</span>
    </div>
    <div style="position:absolute;left:114.15px;top:570.62px" class="cls_002"><span class="cls_002">4. Provide a handler function as an argument to the </span><span
            class="cls_008">click</span><span class="cls_002"> event:</span></div>
    <div style="position:absolute;left:140.77px;top:627.35px" class="cls_010"><span class="cls_010">$(document).ready(function() {</span>
    </div>
    <div style="position:absolute;left:160.90px;top:639.96px" class="cls_010"><span class="cls_010">$('#btn').click(function () {</span>
    </div>
    <div style="position:absolute;left:176.00px;top:652.56px" class="cls_010"><span
            class="cls_010">alert('Clicked');</span></div>
    <div style="position:absolute;left:160.90px;top:665.17px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:140.77px;top:677.77px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:709.29px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">$('#identifier')</span><span class="cls_002"> expression provides direct access to elements in</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:175306px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background207.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span
            class="cls_002">DOM three, </span><span class="cls_008">$</span><span class="cls_002"> states that an object is referenced, and the value</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">within the bracket, prefix by </span><span
            class="cls_008">#</span><span class="cls_002"> specifies its identifier. jQuery will</span></div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">have access to the element only after the entire document has been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">loaded; that's why elements should be accessed within</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_008"><span
            class="cls_008">${document).ready()</span><span class="cls_002"> block scope.</span></div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">Similarly, you can access the value of a text input with an identifier</span>
    </div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_008"><span class="cls_008">txt</span><span
            class="cls_002">:</span></div>
    <div style="position:absolute;left:111.61px;top:266.68px" class="cls_010"><span class="cls_010">$(document).ready(function() {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:279.29px" class="cls_010"><span class="cls_010">var textValue = $('#txt').val();</span>
    </div>
    <div style="position:absolute;left:121.68px;top:291.90px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:304.50px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:336.02px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">$(document)</span><span class="cls_003"> </span><span class="cls_002">object is predefined in jQuery and represents the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:352.82px" class="cls_002"><span class="cls_002">entire DOM document of the HTML page. In a similar way, jQuery</span>
    </div>
    <div style="position:absolute;left:87.54px;top:369.63px" class="cls_002"><span class="cls_002">predefines a function for AJAX-enabled communication, that is, for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:386.44px" class="cls_002"><span class="cls_002">sending HTTP request to an HTTP endpoint. This function is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:403.25px" class="cls_002"><span class="cls_002">named after Asynchronous JavaScript + XML- AJAX, which</span>
    </div>
    <div style="position:absolute;left:87.54px;top:420.05px" class="cls_002"><span class="cls_002">was the de facto standard that enabled a JavaScript application to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:436.86px" class="cls_002"><span class="cls_002">communicate with HTTP-enabled backends. Nowadays, JSON is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:453.67px" class="cls_002"><span class="cls_002">being widely used; however, naming conversion for AJAX is still</span>
    </div>
    <div style="position:absolute;left:87.54px;top:470.48px" class="cls_002"><span class="cls_002">used as a term for asynchronous communication, regardless of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:487.29px" class="cls_002"><span class="cls_002">data format; that is why the predefined function in jQuery is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:504.09px" class="cls_002"><span class="cls_002">called </span><span
            class="cls_008">$.ajax(options, handlers)</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:538.41px" class="cls_002"><span class="cls_002">To send an http request with the </span><span
            class="cls_008">$.ajax</span><span class="cls_002"> function, invoke it by</span></div>
    <div style="position:absolute;left:87.54px;top:555.22px" class="cls_002"><span class="cls_002">providing the endpoint URL, http method for the request, and its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:572.03px" class="cls_002"><span class="cls_002">content type; the result will be returned in a callback function. The</span>
    </div>
    <div style="position:absolute;left:87.54px;top:588.83px" class="cls_002"><span class="cls_002">following example shows how an item with identifier 3 is requested</span>
    </div>
    <div style="position:absolute;left:87.54px;top:605.64px" class="cls_002"><span
            class="cls_002">from our catalog:</span></div>
    <div style="position:absolute;left:111.61px;top:649.76px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:131.75px;top:662.37px" class="cls_010"><span class="cls_010">contentType: 'application/json',</span>
    </div>
    <div style="position:absolute;left:131.75px;top:674.97px" class="cls_010"><span class="cls_010">url: '</span><A
            HREF="http://localhost:3000/catalog/v2/item/3'/">http://localhost:3000/catalog/v2/item/3'</A>,
    </div>
    <div style="position:absolute;left:131.75px;top:687.58px" class="cls_010"><span class="cls_010">type: 'GET',</span>
    </div>
    <div style="position:absolute;left:131.75px;top:700.18px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:712.79px" class="cls_010"><span class="cls_010">if (status === 'success') {</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:176157px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background208.jpg" width=595 height=841></div>
    <div style="position:absolute;left:172.02px;top:104.91px" class="cls_010"><span class="cls_010">//the item is successfully retrieved load & display its details</span>
    </div>
    <div style="position:absolute;left:101.55px;top:117.52px" class="cls_010"><span class="cls_010">here</span></div>
    <div style="position:absolute;left:151.88px;top:130.12px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:142.73px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">,error: function (xhr, options, error) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:167.94px" class="cls_010"><span class="cls_010">//Item was not retrieved due to an error handle it here</span>
    </div>
    <div style="position:absolute;left:131.75px;top:180.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:193.15px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:205.76px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:237.27px" class="cls_002"><span class="cls_002">Posting data to an endpoint is rather similar:</span>
    </div>
    <div style="position:absolute;left:111.61px;top:281.39px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:121.68px;top:294.00px" class="cls_010"><span class="cls_010">url: "</span><A
            HREF="http://localhost:3000/catalog/v2/"/">http://localhost:3000/catalog/v2/"</A>,
    </div>
    <div style="position:absolute;left:121.68px;top:306.60px" class="cls_010"><span class="cls_010">type: "POST",</span>
    </div>
    <div style="position:absolute;left:121.68px;top:319.21px" class="cls_010"><span
            class="cls_010">dataType: "json",</span></div>
    <div style="position:absolute;left:121.68px;top:331.81px" class="cls_010"><span class="cls_010">data: JSON.stringify(newItem),</span>
    </div>
    <div style="position:absolute;left:126.71px;top:344.42px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:136.78px;top:357.03px" class="cls_010"><span class="cls_010">if (status === 'success') {</span>
    </div>
    <div style="position:absolute;left:146.85px;top:369.63px" class="cls_010"><span class="cls_010">//item was created successfully</span>
    </div>
    <div style="position:absolute;left:136.78px;top:382.24px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:126.71px;top:394.84px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:126.71px;top:407.45px" class="cls_010"><span class="cls_010">error: function(xhr, options, error) {</span>
    </div>
    <div style="position:absolute;left:136.78px;top:420.06px" class="cls_010"><span class="cls_010">//Error occurred while creating the iteam</span>
    </div>
    <div style="position:absolute;left:126.71px;top:432.66px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:116.65px;top:445.27px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:489.39px" class="cls_002"><span class="cls_002">Simply use the appropriate options </span><span
            class="cls_008">type</span><span class="cls_002"> set to POST, and the </span><span
            class="cls_008">dateType</span></div>
    <div style="position:absolute;left:87.54px;top:506.20px" class="cls_002"><span class="cls_002">set to JSON. Those will specify that a POST request is to be sent to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">the endpoint in the JSON format. The payload of the object is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">provided as a value to the </span><span
            class="cls_008">data</span><span class="cls_002"> attribute.</span></div>
    <div style="position:absolute;left:87.54px;top:574.13px" class="cls_002"><span
            class="cls_002">Invoking a </span><span class="cls_008">delete</span><span class="cls_002"> method is quite similar:</span>
    </div>
    <div style="position:absolute;left:131.75px;top:618.25px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:141.82px;top:630.85px" class="cls_010"><span class="cls_010">contentType: 'application/json',</span>
    </div>
    <div style="position:absolute;left:141.82px;top:643.46px" class="cls_010"><span class="cls_010">url: '</span><A
            HREF="http://localhost:3000/catalog/v2/item/3'/">http://localhost:3000/catalog/v2/item/3'</A>,
    </div>
    <div style="position:absolute;left:141.82px;top:656.06px" class="cls_010"><span
            class="cls_010">type: 'DELETE',</span></div>
    <div style="position:absolute;left:141.82px;top:668.67px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:681.28px" class="cls_010"><span class="cls_010">if (status === 'success') {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:693.88px" class="cls_010"><span class="cls_010">//handle successful deletion</span>
    </div>
    <div style="position:absolute;left:161.95px;top:706.49px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:719.09px" class="cls_010"><span class="cls_010">}</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:177008px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background209.jpg" width=595 height=841></div>
    <div style="position:absolute;left:141.82px;top:104.91px" class="cls_010"><span class="cls_010">,error: function (xhr, options, error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:117.52px" class="cls_010"><span class="cls_010">//handle errors on delete</span>
    </div>
    <div style="position:absolute;left:141.82px;top:130.12px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:142.73px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:174.24px" class="cls_002"><span class="cls_002">A basic understanding of how jQuery works is just about fine for the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:191.05px" class="cls_002"><span class="cls_002">scope of this book. Now, let's glue all this together and create two</span>
    </div>
    <div style="position:absolute;left:87.54px;top:207.86px" class="cls_002"><span class="cls_002">HTML pages; that way, we will handle creating, displaying, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:224.66px" class="cls_002"><span class="cls_002">deleting an item in our catalog, starting with the page that displays</span>
    </div>
    <div style="position:absolute;left:87.54px;top:241.47px" class="cls_002"><span class="cls_002">an item and allows its deletion. This page loads an item from the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:258.28px" class="cls_002"><span class="cls_002">catalog using </span><span
            class="cls_008">GET</span><span class="cls_002"> request, and then displays the item's attributes in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_002"><span class="cls_002">the HTML page in a table-like manner:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:319.21px" class="cls_010"><span class="cls_010">&lt;html></span>
    </div>
    <div style="position:absolute;left:101.55px;top:331.81px" class="cls_010"><span class="cls_010">&lt;head>&lt;title>Item&lt;/title>&lt;/head></span>
    </div>
    <div style="position:absolute;left:101.55px;top:344.42px" class="cls_010"><span class="cls_010">&lt;body></span>
    </div>
    <div style="position:absolute;left:121.68px;top:357.03px" class="cls_010"><span class="cls_010">&lt;script type="text/javascript" src="</span><A
            HREF="https://code.jquery.com/jquery-/">https://code.jquery.com/jquery-</A></div>
    <div style="position:absolute;left:101.55px;top:369.63px" class="cls_010"><span class="cls_010">3.3.1.min.js ">&lt;/script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:382.24px" class="cls_010"><span class="cls_010">&lt;script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:394.84px" class="cls_010"><span class="cls_010">$(document).ready(function() {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:407.45px" class="cls_010"><span class="cls_010">$('#btnDelete').click(function () {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:420.06px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:141.82px;top:432.66px" class="cls_010"><span class="cls_010">contentType: 'application/json',</span>
    </div>
    <div style="position:absolute;left:141.82px;top:445.27px" class="cls_010"><span class="cls_010">url: '</span><A
            HREF="http://localhost:3000/catalog/v2/item/3'/">http://localhost:3000/catalog/v2/item/3'</A>,
    </div>
    <div style="position:absolute;left:141.82px;top:457.87px" class="cls_010"><span
            class="cls_010">type: 'DELETE',</span></div>
    <div style="position:absolute;left:141.82px;top:470.48px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:483.08px" class="cls_010"><span class="cls_010">if (status === 'success') {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:495.69px" class="cls_010"><span class="cls_010">$('#item').text('Deleted');</span>
    </div>
    <div style="position:absolute;left:172.02px;top:508.30px" class="cls_010"><span class="cls_010">$('#price').text('Deleted');</span>
    </div>
    <div style="position:absolute;left:172.02px;top:520.90px" class="cls_010"><span class="cls_010">$('#categories').text('Deleted');</span>
    </div>
    <div style="position:absolute;left:161.95px;top:533.51px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:546.11px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:558.72px" class="cls_010"><span class="cls_010">,error: function (xhr, options, error) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:571.33px" class="cls_010"><span class="cls_010">alert('Unable to delete item');</span>
    </div>
    <div style="position:absolute;left:141.82px;top:583.93px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:596.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:609.14px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:621.75px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:131.75px;top:634.35px" class="cls_010"><span class="cls_010">contentType: 'application/json',</span>
    </div>
    <div style="position:absolute;left:131.75px;top:646.96px" class="cls_010"><span class="cls_010">url: '</span><A
            HREF="http://localhost:3000/catalog/v2/item/3'/">http://localhost:3000/catalog/v2/item/3'</A>,
    </div>
    <div style="position:absolute;left:131.75px;top:659.57px" class="cls_010"><span class="cls_010">type: 'GET',</span>
    </div>
    <div style="position:absolute;left:131.75px;top:672.17px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:684.78px" class="cls_010"><span class="cls_010">if (status === 'success') {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:697.38px" class="cls_010"><span class="cls_010">$('#item').text(item.itemName);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:709.99px" class="cls_010"><span class="cls_010">$('#price').text(item.price + ' ' + item.currency);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:722.60px" class="cls_010"><span class="cls_010">$('#categories').text(item.categories);</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:177859px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background210.jpg" width=595 height=841></div>
    <div style="position:absolute;left:151.88px;top:104.91px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:117.51px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:130.12px" class="cls_010"><span class="cls_010">,error: function (xhr, options, error) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span class="cls_010">alert('Unable to load details');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:155.33px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:193.15px" class="cls_010"><span class="cls_010">&lt;/script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:205.76px" class="cls_010"><span class="cls_010">&lt;div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:218.36px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:230.97px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Item: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:243.57px" class="cls_010"><span class="cls_010">&lt;div>&lt;span id="item"/>k&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:256.18px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:268.78px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:281.39px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Price: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:294.00px" class="cls_010"><span class="cls_010">&lt;div>&lt;span id="price"/>jjj&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:306.60px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:319.21px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:331.81px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Categories: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:344.42px" class="cls_010"><span class="cls_010">&lt;div>&lt;span id="categories"/>jjj&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:357.03px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:369.63px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="button" id="btnDelete" value="Delete"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:111.61px;top:382.24px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:101.55px;top:394.84px" class="cls_010"><span class="cls_010">&lt;/body></span>
    </div>
    <div style="position:absolute;left:101.55px;top:407.45px" class="cls_010"><span class="cls_010">&lt;/html></span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.96px" class="cls_002"><span class="cls_002">The page that handles creation is quite similar. However, it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.77px" class="cls_002"><span class="cls_002">provides text inputs instead of span labels for an item's fields,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:472.58px" class="cls_002"><span class="cls_002">where the view page will display the data for the attributes of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:489.39px" class="cls_002"><span class="cls_002">loaded item. JQuery provides a simplified access model to the input</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.19px" class="cls_002"><span class="cls_002">controls, rather than DOM—simply access the input element as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">follows:</span></div>
    <div style="position:absolute;left:101.55px;top:567.12px" class="cls_010"><span class="cls_010">&lt;html></span>
    </div>
    <div style="position:absolute;left:101.55px;top:579.73px" class="cls_010"><span class="cls_010">&lt;head>&lt;title>Item&lt;/title>&lt;/head></span>
    </div>
    <div style="position:absolute;left:101.55px;top:592.33px" class="cls_010"><span class="cls_010">&lt;body></span>
    </div>
    <div style="position:absolute;left:111.61px;top:604.94px" class="cls_010"><span class="cls_010">&lt;script type="text/javascript" src="</span><A
            HREF="https://code.jquery.com/jquery-/">https://code.jquery.com/jquery-</A></div>
    <div style="position:absolute;left:101.55px;top:617.55px" class="cls_010"><span class="cls_010">3.3.1.min.js ">&lt;/script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:630.15px" class="cls_010"><span class="cls_010">&lt;script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:642.76px" class="cls_010"><span class="cls_010">$(document).ready(function() {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:655.36px" class="cls_010"><span class="cls_010">$('#btnCreate').click(function(){</span>
    </div>
    <div style="position:absolute;left:131.75px;top:667.97px" class="cls_010"><span class="cls_010">var txtItemName = $('#txtItem').val();</span>
    </div>
    <div style="position:absolute;left:131.75px;top:680.58px" class="cls_010"><span class="cls_010">var txtItemPrice = $('#txtItemPrice').val();</span>
    </div>
    <div style="position:absolute;left:131.75px;top:693.18px" class="cls_010"><span class="cls_010">var txtItemCurrency = $('#txtItemCurrency').val();</span>
    </div>
    <div style="position:absolute;left:131.75px;top:705.79px" class="cls_010"><span
            class="cls_010">var newItem = {</span></div>
    <div style="position:absolute;left:141.82px;top:718.39px" class="cls_010"><span class="cls_010">itemId: 4,</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:178710px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background211.jpg" width=595 height=841></div>
    <div style="position:absolute;left:141.82px;top:104.91px" class="cls_010"><span class="cls_010">itemName: txtItemName,</span>
    </div>
    <div style="position:absolute;left:141.82px;top:117.51px" class="cls_010"><span
            class="cls_010">price: txtItemPrice,</span></div>
    <div style="position:absolute;left:141.82px;top:130.12px" class="cls_010"><span class="cls_010">currency: txtItemCurrency,</span>
    </div>
    <div style="position:absolute;left:141.82px;top:142.73px" class="cls_010"><span class="cls_010">categories: [</span>
    </div>
    <div style="position:absolute;left:151.88px;top:155.33px" class="cls_010"><span class="cls_010">"Watches"</span>
    </div>
    <div style="position:absolute;left:141.82px;top:167.94px" class="cls_010"><span class="cls_010">]</span></div>
    <div style="position:absolute;left:131.75px;top:180.54px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:131.75px;top:193.15px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:141.82px;top:205.76px" class="cls_010"><span class="cls_010">url: "</span><A
            HREF="http://localhost:3000/catalog/v2/"/">http://localhost:3000/catalog/v2/"</A>,
    </div>
    <div style="position:absolute;left:141.82px;top:218.36px" class="cls_010"><span class="cls_010">type: "POST",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:230.97px" class="cls_010"><span
            class="cls_010">dataType: "json",</span></div>
    <div style="position:absolute;left:141.82px;top:243.57px" class="cls_010"><span class="cls_010">data: JSON.stringify(newItem),</span>
    </div>
    <div style="position:absolute;left:141.82px;top:256.18px" class="cls_010"><span class="cls_010">success: function (item, status, xhr) {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:268.78px" class="cls_010"><span
            class="cls_010">alert(status);</span></div>
    <div style="position:absolute;left:161.95px;top:281.39px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:294.00px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:121.68px;top:306.60px" class="cls_010"><span class="cls_010">})</span></div>
    <div style="position:absolute;left:111.61px;top:319.21px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:331.81px" class="cls_010"><span class="cls_010">&lt;/script></span>
    </div>
    <div style="position:absolute;left:111.61px;top:344.42px" class="cls_010"><span class="cls_010">&lt;div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:357.03px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:369.63px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Id: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:382.24px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="text" id="id"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:407.45px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Item: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:420.05px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="text" id="txtItem"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:432.66px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:445.27px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:457.87px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Price: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:470.48px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="text" id="price"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:483.08px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:495.69px" class="cls_010"><span class="cls_010">&lt;div style="position: relative"></span>
    </div>
    <div style="position:absolute;left:131.75px;top:508.30px" class="cls_010"><span class="cls_010">&lt;div style="float:left; width: 80px;">Categories: &lt;/div></span>
    </div>
    <div style="position:absolute;left:131.75px;top:520.90px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="text" id="categories"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:533.51px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:121.68px;top:546.11px" class="cls_010"><span class="cls_010">&lt;div>&lt;input type="button" id="btnCreate" value="Create"/>&lt;/div></span>
    </div>
    <div style="position:absolute;left:111.61px;top:558.72px" class="cls_010"><span class="cls_010">&lt;/div></span>
    </div>
    <div style="position:absolute;left:101.55px;top:571.32px" class="cls_010"><span class="cls_010">&lt;/body></span>
    </div>
    <div style="position:absolute;left:101.55px;top:583.93px" class="cls_010"><span class="cls_010">&lt;/html></span>
    </div>
    <div style="position:absolute;left:87.54px;top:615.45px" class="cls_002"><span class="cls_002">Let's give that a try and load an existing item in the view page by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:632.25px" class="cls_002"><span class="cls_002">opening our static page directly from the filesystem in a browser of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:649.06px" class="cls_002"><span class="cls_002">your choice. It looks as if we have some kind of a problem, as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:665.87px" class="cls_002"><span class="cls_002">nothing gets displayed. Enabling client-side debugging using the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:682.68px" class="cls_002"><span class="cls_002">browser's developer suite doesn't give much more information</span>
    </div>
    <div style="position:absolute;left:87.54px;top:699.48px" class="cls_002"><span class="cls_002">either:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:179561px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background212.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:420.06px" class="cls_002"><span class="cls_002">It states that the content is partially blocked; however, it is not quite</span>
    </div>
    <div style="position:absolute;left:87.54px;top:436.86px" class="cls_002"><span class="cls_002">clear whether this is due to a backend-related error, or something</span>
    </div>
    <div style="position:absolute;left:87.54px;top:453.67px" class="cls_002"><span class="cls_002">has gone wrong on the client side. We will look at how to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:470.48px" class="cls_002"><span class="cls_002">troubleshoot such problematic situations in the next section.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:180412px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background213.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Troubleshooting and</span></div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">identifying problems on the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:223.26px" class="cls_004"><span class="cls_004">wire</span></div>
    <div style="position:absolute;left:87.54px;top:266.68px" class="cls_002"><span class="cls_002">Sometimes the interaction between the client and the server fails,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:283.49px" class="cls_002"><span class="cls_002">and the reason for such failures often requires analysis; otherwise,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:300.30px" class="cls_002"><span class="cls_002">their root cause stays unknown. We spotted that our client</span>
    </div>
    <div style="position:absolute;left:87.54px;top:317.11px" class="cls_002"><span class="cls_002">application does not load and thus doesn't display data for an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:333.92px" class="cls_002"><span class="cls_002">existing item. Let's try to investigate the root cause for that by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:350.72px" class="cls_002"><span class="cls_002">setting up an </span><span
            class="cls_008">http</span><span class="cls_002"> tunnel between the client and the server. This will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:367.53px" class="cls_002"><span class="cls_002">be a kind of MiM (man-in-the-middle)-based investigation, as we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:384.34px" class="cls_002"><span class="cls_002">will listen to one port and redirect the incoming request to another,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.15px" class="cls_002"><span class="cls_002">to see whether the server returns correct responses or its pipe gets</span>
    </div>
    <div style="position:absolute;left:87.54px;top:417.95px" class="cls_002"><span class="cls_002">broken somewhere in the middle. There are various TCP tunnels</span>
    </div>
    <div style="position:absolute;left:87.54px;top:434.76px" class="cls_002"><span class="cls_002">available out there; I have been using a simple open source one</span>
    </div>
    <div style="position:absolute;left:87.54px;top:451.57px" class="cls_002"><span class="cls_002">available on GitHub at </span><span
            class="cls_007">https://github.com/vakuum/tcptunnel</span><span class="cls_002">. Its author also</span>
    </div>
    <div style="position:absolute;left:87.54px;top:468.38px" class="cls_002"><span class="cls_002">maintains a separate website where you can download prebuilt</span>
    </div>
    <div style="position:absolute;left:87.54px;top:485.19px" class="cls_002"><span class="cls_002">binaries for the most common operating system; they are available</span>
    </div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_002"><span class="cls_002">at </span><span
            class="cls_007">http://www.vakuumverpackt.de/tcptunnel/</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:536.31px" class="cls_002"><span class="cls_002">After you have built or downloaded a copy of the tunnel, start it as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:553.12px" class="cls_002"><span class="cls_002">follows:</span></div>
    <div style="position:absolute;left:87.54px;top:586.73px" class="cls_008"><span class="cls_008">./tcptunnel --local-port=3001 --remote-port=3000 --remote-host=localhost --log</span>
    </div>
    <div style="position:absolute;left:87.54px;top:614.75px" class="cls_002"><span class="cls_002">This will start the application listening on port 3001 and will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:631.55px" class="cls_002"><span class="cls_002">forward each incoming request to location port 3000; the </span><span
            class="cls_008">--log</span></div>
    <div style="position:absolute;left:87.54px;top:648.36px" class="cls_002"><span class="cls_002">option specifies that all the data flow passing the tunnel should be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:665.17px" class="cls_002"><span class="cls_002">logged in the console. Finally, modify HTML pages to use port 3001</span>
    </div>
    <div style="position:absolute;left:87.54px;top:681.98px" class="cls_002"><span class="cls_002">instead of 3000, and let's see what the tunnel would show us after</span>
    </div>
    <div style="position:absolute;left:87.54px;top:698.78px" class="cls_002"><span class="cls_002">firing new GET request for the item with id 3, this time on port</span>
    </div>
    <div style="position:absolute;left:87.54px;top:715.59px" class="cls_008"><span class="cls_008">3001: http://localhost:3001/catalog/v2/item/3</span><span
            class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:181263px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background214.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:443.17px" class="cls_002"><span class="cls_002">Surprisingly, the tunnel shows that the server responds normally</span>
    </div>
    <div style="position:absolute;left:87.54px;top:459.97px" class="cls_002"><span class="cls_002">with </span><span
            class="cls_008">200 OK</span><span
            class="cls_002"> and a relevant payload. So it seems as if the problem is</span></div>
    <div style="position:absolute;left:87.54px;top:476.78px" class="cls_002"><span class="cls_002">not on the server side.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:511.10px" class="cls_002"><span class="cls_002">Well, since the error is obviously not on the server side, let's try to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:527.90px" class="cls_002"><span class="cls_002">investigate deeper what has happened on the client side. Nowadays,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:544.71px" class="cls_002"><span class="cls_002">all popular browsers have so-called web developer tools. They</span>
    </div>
    <div style="position:absolute;left:87.54px;top:561.52px" class="cls_002"><span
            class="cls_002">provide access to </span><span class="cls_008">http</span><span class="cls_002"> logs, dynamically-rendered code, the DOM</span>
    </div>
    <div style="position:absolute;left:87.54px;top:578.33px" class="cls_002"><span class="cls_002">three of the HTML document, and so on. Let's invoke our RESTful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:595.14px" class="cls_002"><span class="cls_002">GET operation with Mozillas Firefox and see what its web console</span>
    </div>
    <div style="position:absolute;left:87.54px;top:611.94px" class="cls_002"><span class="cls_002">will log about our request. Open the Mozilla Firefox menu and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:628.75px" class="cls_002"><span class="cls_002">select </span><span
            class="cls_008">Web Developer</span><span class="cls_002">, and then select </span><span class="cls_008">Browser Console</span><span
            class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:182114px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background215.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:304.50px" class="cls_002"><span class="cls_002">Aha! Seems like we found it: </span><span
            class="cls_008">Cross-Origin Request Blocked: The Same Origin</span></div>
    <div style="position:absolute;left:87.54px;top:326.91px" class="cls_008"><span class="cls_008">Policy disallows reading the remove resource at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:338.12px" class="cls_002"><span class="cls_002">This error is blocking the server-side response at client level. In the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.93px" class="cls_002"><span class="cls_002">next section, we will see what this actually means.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:182965px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background216.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Cross Origin Resource Sharing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Cross-site HTTP requests are requests that refer to resources to be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">loaded from a domain different from the one that initially requested</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">them. In our case, we started the client from our filesystem, and it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">requested resources from a network address. This is considered a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">potential Cross-site scripting request, which, according to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span
            class="cls_002">W3C recommendation at </span><A HREF="http://w3.org/cors/tr/cors/">http://w3.org/cors/TR/cors</A> </span>
        <span class="cls_002">, should be</span></div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">carefully handled. This means that if an external resource is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">requested, the domain where it is requested from—its Origin—</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">should be explicitly specified in a header, as long as an external</span>
    </div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">resource loading is not allowed in general. This mechanism</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.13px" class="cls_002"><span class="cls_002">prevents Cross-Side Scripting (XSS) attacks, and it is based on</span>
    </div>
    <div style="position:absolute;left:87.54px;top:389.94px" class="cls_002"><span class="cls_002">HTTP headers.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">The following HTTP request headers specify how external resources</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">should be handled on the client side:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:480.98px" class="cls_008"><span class="cls_008">Origin</span><span
            class="cls_002"> defines where the request originated from</span></div>
    <div style="position:absolute;left:133.06px;top:511.10px" class="cls_008"><span class="cls_008">Access-Control-Request-Method</span><span
            class="cls_002"> defines the HTTP method that was</span></div>
    <div style="position:absolute;left:133.06px;top:532.11px" class="cls_002"><span class="cls_002">used to request the resource</span>
    </div>
    <div style="position:absolute;left:133.06px;top:562.22px" class="cls_008"><span class="cls_008">Access-Control-Request-Header</span><span
            class="cls_002"> defines any headers that will be</span></div>
    <div style="position:absolute;left:133.06px;top:583.23px" class="cls_002"><span class="cls_002">allowed in combination with the external resource request</span>
    </div>
    <div style="position:absolute;left:87.54px;top:630.15px" class="cls_002"><span class="cls_002">On the server side,  the following headers indicate whether a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:646.96px" class="cls_002"><span class="cls_002">response is eligible for a CORS-enabled client request:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:686.88px" class="cls_008"><span class="cls_008">Access-Control-Allow-Origin</span><span
            class="cls_002">: This header either, if exists, specifies</span></div>
    <div style="position:absolute;left:133.06px;top:707.89px" class="cls_002"><span class="cls_002">that the requester's host is allowed by repeating it, or it</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:183816px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background217.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">could specify that all remote origins are allowed by</span>
    </div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_002"><span class="cls_002">returning a wildcard: '*'</span>
    </div>
    <div style="position:absolute;left:133.06px;top:157.43px" class="cls_008"><span class="cls_008">Access-Control-Allow-Methods</span><span
            class="cls_002">: This header specifies the HTTP</span></div>
    <div style="position:absolute;left:133.06px;top:178.44px" class="cls_002"><span class="cls_002">methods that the server would allow from cross-side's</span>
    </div>
    <div style="position:absolute;left:133.06px;top:199.45px" class="cls_002"><span class="cls_002">domain</span></div>
    <div style="position:absolute;left:133.06px;top:229.57px" class="cls_008"><span class="cls_008">Access-Control-Allow-Headers</span><span
            class="cls_002">: This header specifies the HTTP</span></div>
    <div style="position:absolute;left:133.06px;top:250.58px" class="cls_002"><span class="cls_002">headers that the server would allow from cross-side's</span>
    </div>
    <div style="position:absolute;left:133.06px;top:271.59px" class="cls_002"><span class="cls_002">domain</span></div>
    <div style="position:absolute;left:87.54px;top:318.51px" class="cls_002"><span
            class="cls_002">There are some more </span><span class="cls_008">Access-Control-*</span><span
            class="cls_002"> headers that can be used for</span></div>
    <div style="position:absolute;left:87.54px;top:335.32px" class="cls_002"><span class="cls_002">further granularity when incoming XSS requests are to be served, or</span>
    </div>
    <div style="position:absolute;left:87.54px;top:352.12px" class="cls_002"><span class="cls_002">not, based on credentials and request's max-age, but basically, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:368.93px" class="cls_002"><span class="cls_002">most important ones are for the allowed origin, allowed methods,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:385.74px" class="cls_002"><span
            class="cls_002">and allowed headers.</span></div>
    <div style="position:absolute;left:87.54px;top:420.05px" class="cls_002"><span class="cls_002">There is a node module that handles </span><span
            class="cls_008">CORS</span><span class="cls_002"> configuration at server</span></div>
    <div style="position:absolute;left:87.54px;top:436.86px" class="cls_002"><span class="cls_002">side; it is installed by </span><span
            class="cls_008">npm install -g cors</span><span class="cls_002"> and is easily enabled in our</span></div>
    <div style="position:absolute;left:87.54px;top:453.67px" class="cls_002"><span class="cls_002">application via a middleware module. Simply use it in all the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:470.48px" class="cls_002"><span class="cls_002">exposed routes by passing it to the application:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:514.60px" class="cls_010"><span
            class="cls_010">app.use(cors());</span></div>
    <div style="position:absolute;left:87.54px;top:546.11px" class="cls_002"><span class="cls_002">Use the tunnel after you enabled the </span><span
            class="cls_008">cors</span><span class="cls_002"> middleware to see that the</span></div>
    <div style="position:absolute;left:87.54px;top:562.92px" class="cls_002"><span class="cls_002">server would now gracefully handle requests from different origins</span>
    </div>
    <div style="position:absolute;left:87.54px;top:579.73px" class="cls_002"><span class="cls_002">by serving the "Access-Control-Allow-Origin' header set to '*'":</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:184667px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background218.jpg" width=595 height=841></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:185518px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background219.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Content Delivery Networks</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">When we imported the jQuery library into our client application, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">directly referred to its optimized source from its vendor as </span><span
            class="cls_008">&lt;script</span></div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_008"><span class="cls_008">type="text/javascript" src="</span><A
            HREF="https://code.jquery.com/jquery-3.3.1.min.js/">https://code.jquery.com/jquery-3.3.1.min.js</A> "/><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:272.99px" class="cls_002"><span class="cls_002">Now, imagine that for some reason this site goes down either</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.79px" class="cls_002"><span class="cls_002">temporarily or for good; this will make our application unusable, as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:306.60px" class="cls_002"><span class="cls_002">the import wouldn't work.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.92px" class="cls_002"><span class="cls_002">Content Delivery Networks come to help in these cases. They serve</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.73px" class="cls_002"><span class="cls_002">as a repository for libraries or other static media content, assuring</span>
    </div>
    <div style="position:absolute;left:87.54px;top:374.53px" class="cls_002"><span class="cls_002">that the needed resources will be available without downtime, even</span>
    </div>
    <div style="position:absolute;left:87.54px;top:391.34px" class="cls_002"><span class="cls_002">when something goes wrong with their vendors. One of the most</span>
    </div>
    <div style="position:absolute;left:87.54px;top:408.15px" class="cls_002"><span class="cls_002">popular JavaScript CDNs is </span><span
            class="cls_007">https://cdnjs.com/</span><span class="cls_002">; it provides the most</span></div>
    <div style="position:absolute;left:87.54px;top:424.96px" class="cls_002"><span class="cls_002">common JS libraries available out there. We will switch our clients</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">to refer to the jquery library from this CDN rather than from its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:458.57px" class="cls_002"><span
            class="cls_002">vendors' website at </span><span class="cls_008">&lt;script type="text/javascript"</span>
    </div>
    <div style="position:absolute;left:87.54px;top:475.38px" class="cls_008"><span class="cls_008">src="</span><A
            HREF="https://code.jquery.com/jquery-3.3.1.min.js/">https://code.jquery.com/jquery-3.3.1.min.js</A> "/><span
            class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:509.70px" class="cls_002"><span class="cls_002">While there is hardly anything wrong with directly downloading</span>
    </div>
    <div style="position:absolute;left:87.54px;top:526.50px" class="cls_002"><span class="cls_002">your JS libraries and placing them in the static directory of your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:543.31px" class="cls_002"><span class="cls_002">node.js project, it may lead to having local changes and fixes</span>
    </div>
    <div style="position:absolute;left:87.54px;top:560.12px" class="cls_002"><span class="cls_002">directly in your library dependencies. This can easily result in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.93px" class="cls_002"><span class="cls_002">incompatible changes and can prevent your application from easily</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.74px" class="cls_002"><span class="cls_002">switching to newer versions in the future. As long as your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:610.54px" class="cls_002"><span class="cls_002">dependencies are open source, you should strive to improve them</span>
    </div>
    <div style="position:absolute;left:87.54px;top:627.35px" class="cls_002"><span class="cls_002">by contributing fixes or reporting bugs rather than having fixes in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:644.16px" class="cls_002"><span class="cls_002">your own local fork. Still, if you are unfortunate enough to run into</span>
    </div>
    <div style="position:absolute;left:87.54px;top:660.97px" class="cls_002"><span class="cls_002">a bug that you can easily fix, you can fork the library to resolve your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:677.77px" class="cls_002"><span class="cls_002">problem faster. However, always consider contributing the fix back</span>
    </div>
    <div style="position:absolute;left:87.54px;top:694.58px" class="cls_002"><span class="cls_002">to the community. After it is accepted, switch back to the official</span>
    </div>
    <div style="position:absolute;left:87.54px;top:711.39px" class="cls_002"><span class="cls_002">version; otherwise, you will find yourself in a difficult situation the</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:186369px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background220.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">next time with another issue, and the community would track it</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">much harder if reported from a forked version. That is the beauty of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">open source, and that is why you should always consider consuming</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">JavaScript APIs' Content Delivery Networks. They will provide you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">with the stability and support you may need at any point in the life</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span
            class="cls_002">of your application.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:187220px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background221.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Handling HTTP status codes</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span
            class="cls_004">on the client side</span></div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">We spent quite some time addressing how RESTful services should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">represent each state, including erroneous ones, gracefully. A well-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">defined API should demand from its consumers to handle all its</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">errors gracefully and to provide as much information per state as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">required, rather than just stating "An error has occurred". That is</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">why it should look up the returned status code and clearly</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">distinguish between client requests such as </span><span
            class="cls_008">400 Bad Request</span><span class="cls_002"> or </span><span class="cls_008">415</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_008"><span class="cls_008">Unsupported media types</span><span
            class="cls_002"> caused by faulty payload, caused by wrong</span></div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">media types, or authentication-related errors, such as </span><span
            class="cls_008">401 Unauthorized</span><span class="cls_002">.</span></div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">The status code of an erroneous response is available in the </span><span
            class="cls_008">error</span></div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_002"><span class="cls_002">callback of the jQuery callback function and should be used to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">provide detailed information back to the request:</span>
    </div>
    <div style="position:absolute;left:106.58px;top:482.38px" class="cls_010"><span class="cls_010">$.ajax({</span>
    </div>
    <div style="position:absolute;left:141.82px;top:494.99px" class="cls_010"><span class="cls_010">url: "</span><A
            HREF="http://localhost:3000/catalog/v2/"/">http://localhost:3000/catalog/v2/"</A>,
    </div>
    <div style="position:absolute;left:141.82px;top:507.60px" class="cls_010"><span class="cls_010">type: "POST",</span>
    </div>
    <div style="position:absolute;left:141.82px;top:520.20px" class="cls_010"><span
            class="cls_010">dataType: "json",</span></div>
    <div style="position:absolute;left:141.82px;top:532.81px" class="cls_010"><span class="cls_010">data: JSON.stringify(newItem),</span>
    </div>
    <div style="position:absolute;left:141.82px;top:545.41px" class="cls_010"><span class="cls_010">success: function (item, status, jqXHR) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:558.02px" class="cls_010"><span
            class="cls_010">alert(status);</span></div>
    <div style="position:absolute;left:141.82px;top:570.62px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:141.82px;top:583.23px" class="cls_010"><span class="cls_010">error: function(jqXHR, statusText, error) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:595.84px" class="cls_010"><span class="cls_010">switch(jqXHR.status) {</span>
    </div>
    <div style="position:absolute;left:177.05px;top:608.44px" class="cls_010"><span class="cls_010">case 400: alert('Bad request'); break;</span>
    </div>
    <div style="position:absolute;left:177.05px;top:621.05px" class="cls_010"><span class="cls_010">case 401: alert('Unauthroizaed'); break;</span>
    </div>
    <div style="position:absolute;left:177.05px;top:633.65px" class="cls_010"><span class="cls_010">case 404: alert('Not found'); break;</span>
    </div>
    <div style="position:absolute;left:177.05px;top:646.26px" class="cls_010"><span class="cls_010">//handle any other client errors below</span>
    </div>
    <div style="position:absolute;left:177.05px;top:658.87px" class="cls_010"><span class="cls_010">case 500: alert('Internal server error); break;</span>
    </div>
    <div style="position:absolute;left:177.05px;top:671.47px" class="cls_010"><span class="cls_010">//handle any other server errors below</span>
    </div>
    <div style="position:absolute;left:161.95px;top:684.08px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:141.82px;top:696.68px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:709.29px" class="cls_010"><span class="cls_010">});</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:188071px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background222.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">Unsuccessful requests are handled by the error callback function. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">provides </span><span
            class="cls_008">jqXHR</span><span class="cls_002"> - the </span><span
            class="cls_008">XmlHttpRequest</span><span class="cls_002"> JavaScript</span><span
            class="cls_003">—</span><span class="cls_002">object as its first</span></div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">argument. It carries across all the request/response related</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">information, such as status code and headers. Use it to determine</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">what the requested server has returned so that your application can</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">handle different errors more granularly.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:188922px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background223.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, we implemented a simple web-based client with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">jQuery library. We utilized this client to demonstrate how the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">Cross-Origin Resource Sharing policy works, and we used a man in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">the middle means to troubleshoot issues on the wire. Finally, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">looked at how errors should be handled on the client side. This</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">chapter brings us one step closer to the end of our journey, as we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">got the first consumer of our service. In the next chapter, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">walk you through the final step before bringing a service to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">production—choosing its security model.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:189773px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background224.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Securing the Application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Once deployed in production, an application is exposed to a large</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">number of requests. Inevitably, some of them will be malicious.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">This brings the requirement of granting explicit access permissions</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">only to authenticated users, that is, authenticating a selected</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">number of consumers to have access to your service. Most of the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">consumers will use the service only for data provisioning. However,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">a few will need to be able to provide new, or modify the existing,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">catalog data. To ensure that only appropriate consumers will be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span
            class="cls_002">able to execute the </span><span class="cls_008">POST</span><span
            class="cls_002">, </span><span class="cls_008">PUT</span><span class="cls_002">, and </span><span
            class="cls_008">DELETE</span><span class="cls_002"> requests, we will have to</span></div>
    <div style="position:absolute;left:87.54px;top:356.33px" class="cls_002"><span class="cls_002">introduce the concept of authorization into our application, which</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.13px" class="cls_002"><span class="cls_002">will grant only explicitly selected users modification permissions.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">Data services may provide sensitive private information, such as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">email addresses; the HTTP protocol, being a text protocol, may not</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">be secure enough. The information transmitted through it is subject</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span class="cls_002">to man-in-the-middle attacks, which can lead to data leakage. To</span>
    </div>
    <div style="position:absolute;left:87.54px;top:474.68px" class="cls_002"><span class="cls_002">prevent such cases, Transport Layer Security (TLS) should be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:491.49px" class="cls_002"><span class="cls_002">used. The HTTPS protocol encrypts the transmitted data, ensuring</span>
    </div>
    <div style="position:absolute;left:87.54px;top:508.30px" class="cls_002"><span class="cls_002">that only appropriate consumers who have the right decryption key</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.10px" class="cls_002"><span class="cls_002">will be able to consume the data exposed by the service.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">In this chapter, we will look at how Node.js enables the following</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span
            class="cls_002">security features:</span></div>
    <div style="position:absolute;left:133.06px;top:616.15px" class="cls_002"><span
            class="cls_002">Basic authentication</span></div>
    <div style="position:absolute;left:133.06px;top:646.26px" class="cls_002"><span class="cls_002">Passport-based basic authentication</span>
    </div>
    <div style="position:absolute;left:133.06px;top:676.37px" class="cls_002"><span class="cls_002">Passport-based third-party authentication</span>
    </div>
    <div style="position:absolute;left:133.06px;top:706.49px" class="cls_002"><span class="cls_002">Authorization</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:190624px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background225.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">Transport layer security</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:191475px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background226.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Authentication</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">An application considers a user authenticated when their identity</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">has been successfully validated against a trusted store. Such trusted</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">stores can either be any kind of specially maintained database,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">storing the credentials of the application (basic authentication), or a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">third-party service that checks a given identity against its own</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">trusted store (third-party authentication).</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:192326px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background227.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Basic authentication</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">HTTP basic authentication is one of the most popular and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">straightforward authentication mechanisms available out there. It</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">relies on HTTP headers in the request, which provide the user's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">credentials. Optionally, the server may reply with a header, forcing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">the clients to authenticate themselves. The following diagram shows</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">a client-server interaction when basic authentication is carried out:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:193177px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background228.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:561.52px" class="cls_002"><span class="cls_002">Whenever an HTTP request is sent to an endpoint secured by HTTP</span>
    </div>
    <div style="position:absolute;left:87.54px;top:578.33px" class="cls_002"><span class="cls_002">basic authentication, the server replies with an HTTP </span><span
            class="cls_008">401 Unauthorized</span></div>
    <div style="position:absolute;left:87.54px;top:595.14px" class="cls_002"><span class="cls_002">status code, and, optionally, with a </span><span
            class="cls_008">WWW-Authenticate</span><span class="cls_002"> header. This</span></div>
    <div style="position:absolute;left:87.54px;top:611.94px" class="cls_002"><span class="cls_002">header forces the client to send another request, containing the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:628.75px" class="cls_008"><span
            class="cls_008">Authorization</span><span class="cls_002"> header, which specifies that the authentication method</span>
    </div>
    <div style="position:absolute;left:87.54px;top:645.56px" class="cls_002"><span class="cls_002">is </span><span
            class="cls_008">basic</span><span
            class="cls_002">. This request is followed by a base64-encoded key/value</span></div>
    <div style="position:absolute;left:87.54px;top:662.37px" class="cls_002"><span class="cls_002">pair, providing the username and the password to authenticate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:679.17px" class="cls_002"><span class="cls_002">with. Optionally, the server can specify a message to the client with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:695.98px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">realm</span><span class="cls_002"> attribute.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:194028px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background229.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">This attribute specifies that resources sharing the same </span><span
            class="cls_008">realm</span><span class="cls_002"> value</span></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">should support the same authentication means. In the preceding</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span
            class="cls_002">diagram, the </span><span class="cls_008">realm</span><span
            class="cls_002"> message is </span><span class="cls_008">MyRealmName</span><span class="cls_002">. The client authenticates by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span
            class="cls_002">sending the </span><span class="cls_008">Authentication</span><span class="cls_002"> header with the value of </span><span
            class="cls_008">Basic YWRtaW46YWRtaW4</span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span
            class="cls_002">specifying that </span><span class="cls_008">Basic</span><span class="cls_002"> authentication is used, followed by the base64-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.25px" class="cls_002"><span class="cls_002">encoded value. In the diagram, the literal </span><span
            class="cls_008">YWRtaW46YWRtaW4</span><span class="cls_002"> decoded in</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span
            class="cls_002">base64 represents the </span><span class="cls_008">admin:admin</span><span class="cls_002"> literal. In case such a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">username/password combination is successfully authenticated, the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">HTTP server will respond with the JSON payload of the requested</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">items. If the authentication fails, the server will respond with the </span><span
            class="cls_008">401</span></div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_008"><span
            class="cls_008">Unauthorized</span><span
            class="cls_002"> status code, but this time without including the </span><span class="cls_008">WWW-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_008"><span
            class="cls_008">Authenticate</span><span class="cls_002"> header.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:194879px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background230.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Passport</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">There are plenty of authentication methods to choose from</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">nowadays. Perhaps the most popular methods are basic</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">authentication, where each user has their own username and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">password, and third-party authentication, where users can identify</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">themselves with their already-existing account for an external</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">public service, such as personal social services such as LinkedIn,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">Facebook, and Twitter.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Choosing the most appropriate type of authentication for a web API</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">depends mainly on its consumers. Apparently, an application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">consuming an API to fetch data is not likely to authenticate with a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">personal social account. This approach is more suitable when the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">API is used via a frontend directly by a human being.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.77px" class="cls_002"><span class="cls_002">Implementing a solution capable of switching between different</span>
    </div>
    <div style="position:absolute;left:87.54px;top:458.57px" class="cls_002"><span class="cls_002">authentication methods easily is a complex and time-consuming</span>
    </div>
    <div style="position:absolute;left:87.54px;top:475.38px" class="cls_002"><span class="cls_002">task. In fact, it can become hardly possible if not considered at the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">initial design phase of an application.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:526.50px" class="cls_002"><span class="cls_002">Passport is a piece of authentication middleware for Node.js,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:543.31px" class="cls_002"><span class="cls_002">created especially for use-cases where the means of authentication</span>
    </div>
    <div style="position:absolute;left:87.54px;top:560.12px" class="cls_002"><span class="cls_002">should be easily switched from one to another. It has modular</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.93px" class="cls_002"><span class="cls_002">architecture that enables the usage of a specific authentication</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.74px" class="cls_002"><span class="cls_002">provider, called strategy. The strategy takes care of implementing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:610.54px" class="cls_002"><span class="cls_002">a chosen authentication approach.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:644.86px" class="cls_002"><span class="cls_002">There are plenty of authentication strategies to choose from, for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:661.67px" class="cls_002"><span class="cls_002">example, a regular basic authentication strategy or social platform-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:678.47px" class="cls_002"><span class="cls_002">based strategies for services such as Facebook, LinkedIn, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:695.28px" class="cls_002"><span class="cls_002">Twitter. Refer to the official Passport website, </span><A
            HREF="http://www.passportjs.org/">http://www.passportjs.org/</A> </span><span class="cls_002">,</span></div>
    <div style="position:absolute;left:87.54px;top:712.09px" class="cls_002"><span class="cls_002">for a complete list of the available strategies.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:195730px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background231.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Passport's basic</span></div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">authentication strategy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Now it is time to look at how to utilize Passport's strategies; we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">start with the basic authentication strategy; it is a logical choice now</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">that we know how basic authentication works.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.80px" class="cls_002"><span class="cls_002">As usual, we will start by installing the relevant modules with the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:320.61px" class="cls_002"><span class="cls_002">NPM package manager. We will need the </span><span
            class="cls_008">passport</span><span class="cls_002"> module, which</span></div>
    <div style="position:absolute;left:87.54px;top:337.42px" class="cls_002"><span class="cls_002">provides the base functionality that allows you to plug in different</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_002"><span class="cls_002">authentication strategies, and a concrete strategy for basic</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">authentication, provided by the </span><span
            class="cls_008">passport-http</span><span class="cls_002"> module:</span></div>
    <div style="position:absolute;left:111.61px;top:415.15px" class="cls_010"><span
            class="cls_010">npm install passport</span></div>
    <div style="position:absolute;left:111.61px;top:427.76px" class="cls_010"><span class="cls_010">npm install passport-http</span>
    </div>
    <div style="position:absolute;left:87.54px;top:459.27px" class="cls_002"><span class="cls_002">Next, we have to instantiate both the Passport middleware and the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:476.08px" class="cls_002"><span class="cls_002">basic authentication strategy. </span><span
            class="cls_008">BasicStrategy</span><span class="cls_002"> takes as an argument a</span></div>
    <div style="position:absolute;left:87.54px;top:492.89px" class="cls_002"><span class="cls_002">callback function, which checks whether the provided</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.70px" class="cls_002"><span class="cls_002">username/password combination is valid. Finally, passport's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:526.50px" class="cls_002"><span class="cls_002">authenticate method is provided as a middleware function to the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:543.31px" class="cls_002"><span class="cls_002">express route, assuring that unauthenticated requests will be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:560.12px" class="cls_002"><span class="cls_002">rejected with an appropriate </span><span
            class="cls_008">401 Unauthorized</span><span class="cls_002"> status:</span></div>
    <div style="position:absolute;left:101.55px;top:604.24px" class="cls_010"><span class="cls_010">const passport = require('passport');</span>
    </div>
    <div style="position:absolute;left:101.55px;top:616.85px" class="cls_010"><span class="cls_010">const BasicStrategy = require('passport-http').BasicStrategy;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:642.06px" class="cls_010"><span class="cls_010">passport.use(new BasicStrategy(function(username, password, done) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:654.66px" class="cls_010"><span class="cls_010">if (username == 'user' && password=='default') {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:667.27px" class="cls_010"><span class="cls_010">return done(null, username);</span>
    </div>
    <div style="position:absolute;left:111.61px;top:679.88px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:692.48px" class="cls_010"><span class="cls_010">}));</span></div>
    <div style="position:absolute;left:101.55px;top:717.69px" class="cls_010"><span
            class="cls_010">router.get('/v1/',</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:196581px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background232.jpg" width=595 height=841></div>
    <div style="position:absolute;left:111.61px;top:104.91px" class="cls_010"><span class="cls_010">passport.authenticate('basic', { session: false }),</span>
    </div>
    <div style="position:absolute;left:126.71px;top:117.51px" class="cls_010"><span
            class="cls_010">function(request,</span></div>
    <div style="position:absolute;left:232.42px;top:117.51px" class="cls_010"><span
            class="cls_010">response, next) {</span></div>
    <div style="position:absolute;left:136.78px;top:130.12px" class="cls_010"><span class="cls_010">catalogV1.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:142.73px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:155.33px" class="cls_010"><span
            class="cls_010">router.get('/v2/',</span></div>
    <div style="position:absolute;left:111.61px;top:167.94px" class="cls_010"><span class="cls_010">passport.authenticate('basic', { session: false }),</span>
    </div>
    <div style="position:absolute;left:126.71px;top:180.54px" class="cls_010"><span
            class="cls_010">function(request,</span></div>
    <div style="position:absolute;left:232.42px;top:180.54px" class="cls_010"><span
            class="cls_010">response, next) {</span></div>
    <div style="position:absolute;left:136.78px;top:193.15px" class="cls_010"><span class="cls_010">catalogV1.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:205.76px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:101.55px;top:230.97px" class="cls_010"><span
            class="cls_010">router.get('/',</span></div>
    <div style="position:absolute;left:111.61px;top:243.57px" class="cls_010"><span class="cls_010">passport.authenticate('basic', { session: false }),</span>
    </div>
    <div style="position:absolute;left:126.71px;top:256.18px" class="cls_010"><span
            class="cls_010">function(request,</span></div>
    <div style="position:absolute;left:232.42px;top:256.18px" class="cls_010"><span
            class="cls_010">response, next) {</span></div>
    <div style="position:absolute;left:136.78px;top:268.78px" class="cls_010"><span class="cls_010">catalogV1.findAllItems(response);</span>
    </div>
    <div style="position:absolute;left:101.55px;top:281.39px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:87.54px;top:312.91px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">BasicStrategy</span><span class="cls_002"> constructor takes a handler function as an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:329.71px" class="cls_002"><span class="cls_002">argument. It gives us access to the username and password supplied</span>
    </div>
    <div style="position:absolute;left:87.54px;top:346.52px" class="cls_002"><span class="cls_002">by the client, and to the Passport middleware's </span><span
            class="cls_008">done()</span><span class="cls_002"> function,</span></div>
    <div style="position:absolute;left:87.54px;top:363.33px" class="cls_002"><span class="cls_002">which notifies Passport with whether the user has been successfully</span>
    </div>
    <div style="position:absolute;left:87.54px;top:380.14px" class="cls_002"><span class="cls_002">authenticated. Invoke the </span><span
            class="cls_008">done()</span><span class="cls_002"> function with </span><span
            class="cls_008">user</span><span class="cls_002"> as an argument in</span></div>
    <div style="position:absolute;left:87.54px;top:396.94px" class="cls_002"><span class="cls_002">order to grant authentication, or pass the </span><span
            class="cls_008">error</span><span class="cls_002"> argument to it to</span></div>
    <div style="position:absolute;left:87.54px;top:413.75px" class="cls_002"><span class="cls_002">revoke the authentication:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:457.87px" class="cls_010"><span class="cls_010">passport.use(new BasicStrategy(</span>
    </div>
    <div style="position:absolute;left:101.55px;top:470.48px" class="cls_010"><span class="cls_010">function(username, password, done) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:483.08px" class="cls_010"><span class="cls_010">AuthUser.findOne({username: username, password: password},</span>
    </div>
    <div style="position:absolute;left:121.68px;top:495.69px" class="cls_010"><span class="cls_010">function(error, user) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:508.30px" class="cls_010"><span class="cls_010">if (error) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:520.90px" class="cls_010"><span
            class="cls_010">return done(error);</span></div>
    <div style="position:absolute;left:131.75px;top:533.51px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:546.11px" class="cls_010"><span class="cls_010">if (!user) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:558.72px" class="cls_010"><span class="cls_010">console.log('unknown user');</span>
    </div>
    <div style="position:absolute;left:151.88px;top:571.32px" class="cls_010"><span
            class="cls_010">return done(error);</span></div>
    <div style="position:absolute;left:141.82px;top:583.93px" class="cls_010"><span class="cls_010">} else {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:596.54px" class="cls_010"><span class="cls_010">console.log(user.username + '</span>
    </div>
    <div style="position:absolute;left:151.88px;top:609.14px" class="cls_010"><span class="cls_010">authenticated successfully');</span>
    </div>
    <div style="position:absolute;left:151.88px;top:621.75px" class="cls_010"><span class="cls_010">return done(null, user);</span>
    </div>
    <div style="position:absolute;left:141.82px;top:634.35px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:646.96px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:659.57px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:111.61px;top:672.17px" class="cls_010"><span class="cls_010">})</span></div>
    <div style="position:absolute;left:101.55px;top:684.78px" class="cls_010"><span class="cls_010">);</span></div>
    <div style="position:absolute;left:87.54px;top:716.29px" class="cls_002"><span
            class="cls_002">Finally, use the </span><span class="cls_008">passort</span><span
            class="cls_002"> </span><span class="cls_008">authenticate()</span><span class="cls_002"> function in the router middleware</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:197432px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background233.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">to attach it to a specific HTTP method-handler function.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:138.53px" class="cls_002"><span class="cls_002">In our case, we specify that we don't want to store any</span>
    </div>
    <div style="position:absolute;left:87.54px;top:155.33px" class="cls_002"><span class="cls_002">authentication details in a session. This is because, when using</span>
    </div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">basic authentication, there is no need to store any user information</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">in a session, as each request contains the </span><span
            class="cls_008">Authorization</span><span class="cls_002"> header that</span></div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">provides the login details.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:198283px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background234.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Passport's OAuth Strategy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">OAuth is an open standard for third party authorization, it defines a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">delegation protocol used fer authorizing against a third party</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">authentication providers. OAuth uses special tokens, once issued,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">identify the user instead of user credentials. Let's look closer at</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">OAuth workflow, with a sample scenario. The main actors in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">scenario are - a user interacting with a web application, which</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">consumes a restful service from a back-end system  providing</span>
    </div>
    <div style="position:absolute;left:87.54px;top:322.71px" class="cls_002"><span class="cls_002">some kind of data. The web application delegates its authorization</span>
    </div>
    <div style="position:absolute;left:87.54px;top:339.52px" class="cls_002"><span class="cls_002">to a separate third-party authorization server.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:199134px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background235.jpg" width=595 height=841></div>
    <div style="position:absolute;left:115.55px;top:106.31px" class="cls_002"><span class="cls_002">1.</span></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">The user requests a web application which requires</span>
    </div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_002"><span class="cls_002">authentication to establish communication with the back-</span>
    </div>
    <div style="position:absolute;left:133.06px;top:148.33px" class="cls_002"><span class="cls_002">end service. This is the initial request thus the user is still</span>
    </div>
    <div style="position:absolute;left:133.06px;top:169.34px" class="cls_002"><span class="cls_002">not authenticated, so they get redirected to a login page</span>
    </div>
    <div style="position:absolute;left:133.06px;top:190.35px" class="cls_002"><span class="cls_002">asking for their credentials for the relevant third party</span>
    </div>
    <div style="position:absolute;left:133.06px;top:211.36px" class="cls_002"><span class="cls_002">account.</span>
    </div>
    <div style="position:absolute;left:114.15px;top:232.37px" class="cls_002"><span class="cls_002">2.</span></div>
    <div style="position:absolute;left:133.06px;top:232.37px" class="cls_002"><span class="cls_002">After a successful authentication an authorization code is</span>
    </div>
    <div style="position:absolute;left:133.06px;top:253.38px" class="cls_002"><span class="cls_002">issued by the authentication server to the web application.</span>
    </div>
    <div style="position:absolute;left:133.06px;top:274.39px" class="cls_002"><span class="cls_002">This authorization code is a composite combination between</span>
    </div>
    <div style="position:absolute;left:133.06px;top:295.40px" class="cls_002"><span class="cls_002">an issued client-id and a secret issued by the provider. They</span>
    </div>
    <div style="position:absolute;left:133.06px;top:316.41px" class="cls_002"><span class="cls_002">should be sent from a web application to the authentication</span>
    </div>
    <div style="position:absolute;left:133.06px;top:337.42px" class="cls_002"><span class="cls_002">server and is exchanged for an access token that has a</span>
    </div>
    <div style="position:absolute;left:133.06px;top:358.43px" class="cls_002"><span
            class="cls_002">limited lifetime.</span></div>
    <div style="position:absolute;left:114.15px;top:379.44px" class="cls_002"><span class="cls_002">3.</span></div>
    <div style="position:absolute;left:133.06px;top:379.44px" class="cls_002"><span class="cls_002">The Web application uses the authentication token for</span>
    </div>
    <div style="position:absolute;left:133.06px;top:400.45px" class="cls_002"><span class="cls_002">authentication until it gets expired. Afterwards it has to</span>
    </div>
    <div style="position:absolute;left:133.06px;top:421.46px" class="cls_002"><span class="cls_002">request a new token using the authorization code.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:468.38px" class="cls_002"><span class="cls_002">Passport.js hides the complexity behind this process with a separate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:485.18px" class="cls_002"><span class="cls_002">strategy module automating the OAuth workflow. It is available in</span>
    </div>
    <div style="position:absolute;left:87.54px;top:501.99px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">npm</span><span class="cls_002"> repository</span></div>
    <div style="position:absolute;left:101.55px;top:546.11px" class="cls_010"><span class="cls_010">npm install passport-oauth</span>
    </div>
    <div style="position:absolute;left:87.54px;top:577.63px" class="cls_002"><span class="cls_002">Create an instance of the strategy and supply it with the urls for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:594.44px" class="cls_002"><span class="cls_002">requesting tokens and for authenticating it together, it is your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:611.24px" class="cls_002"><span class="cls_002">personal consumer key and a secret phrase of your choice.</span>
    </div>
    <div style="position:absolute;left:101.55px;top:655.36px" class="cls_010"><span class="cls_010">var passport = require('passport')</span>
    </div>
    <div style="position:absolute;left:111.61px;top:667.97px" class="cls_010"><span class="cls_010">, OAuthStrategy = require('passport-oauth').OAuthStrategy;</span>
    </div>
    <div style="position:absolute;left:101.55px;top:693.18px" class="cls_010"><span class="cls_010">passport.use('provider', new OAuthStrategy({</span>
    </div>
    <div style="position:absolute;left:121.68px;top:705.79px" class="cls_010"><span
            class="cls_010">requestTokenURL: '</span><A HREF="https://www.provider.com/oauth/request_token'/">https://www.provider.com/oauth/request_token'</A>,
    </div>
    <div style="position:absolute;left:121.68px;top:718.39px" class="cls_010"><span
            class="cls_010">accessTokenURL: '</span><A HREF="https://www.provider.com/oauth/access_token'/">https://www.provider.com/oauth/access_token'</A>,
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:199985px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background236.jpg" width=595 height=841></div>
    <div style="position:absolute;left:121.68px;top:104.91px" class="cls_010"><span class="cls_010">userAuthorizationURL: '</span><A
            HREF="https://www.provider.com/oauth/authorize'/">https://www.provider.com/oauth/authorize'</A>,
    </div>
    <div style="position:absolute;left:121.68px;top:117.52px" class="cls_010"><span class="cls_010">consumerKey: '123-456-789',</span>
    </div>
    <div style="position:absolute;left:121.68px;top:130.12px" class="cls_010"><span class="cls_010">consumerSecret: 'secret'</span>
    </div>
    <div style="position:absolute;left:121.68px;top:142.73px" class="cls_010"><span
            class="cls_010">callbackURL: '</span><A HREF="https://www.example.com/auth/provider/callback'/">https://www.example.com/auth/provider/callback'</A>
    </div>
    <div style="position:absolute;left:111.61px;top:155.33px" class="cls_010"><span class="cls_010">}, function(token, tokenSecret, profile, done) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:167.94px" class="cls_010"><span class="cls_010">//lookup the profile and authenticate</span>
    </div>
    <div style="position:absolute;left:323.02px;top:167.94px" class="cls_010"><span class="cls_010">and call done</span>
    </div>
    <div style="position:absolute;left:111.61px;top:180.54px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:193.15px" class="cls_010"><span class="cls_010">));</span></div>
    <div style="position:absolute;left:87.54px;top:224.66px" class="cls_002"><span class="cls_002">Passport.js provides separate strategy wrapping different providers,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:241.47px" class="cls_002"><span class="cls_002">like linkedin or github. They ensure that your application stays up</span>
    </div>
    <div style="position:absolute;left:87.54px;top:258.28px" class="cls_002"><span class="cls_002">to date with the token issuing URLs. Once you have made up your</span>
    </div>
    <div style="position:absolute;left:87.54px;top:275.09px" class="cls_002"><span class="cls_002">mind about the provider you want to support, you should check for</span>
    </div>
    <div style="position:absolute;left:87.54px;top:291.90px" class="cls_002"><span class="cls_002">specific strategies for them.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:200836px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background237.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Passport's third-party</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">authentication strategies</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Today, almost everyone owns at least one personal public social</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">media account, such as Twitter, Facebook, and LinkedIn. Recently,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">it has become really popular for websites to allow their visitors to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">authenticate themselves via one of their social accounts by just</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">clicking on an icon to bind their social service account to a service-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">internal automatically generated account.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_002"><span class="cls_002">This approach is very convenient for web users who are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:371.03px" class="cls_002"><span class="cls_002">usually permanently logged into at least one of their accounts. If</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.84px" class="cls_002"><span class="cls_002">they are not currently logged in, clicking on an icon will redirect</span>
    </div>
    <div style="position:absolute;left:87.54px;top:404.65px" class="cls_002"><span class="cls_002">them to their social service login page, and, after a successful login,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:421.46px" class="cls_002"><span class="cls_002">another redirection takes place, ensuring that the user gets the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:438.26px" class="cls_002"><span class="cls_002">content they originally requested. When it comes to exposing data</span>
    </div>
    <div style="position:absolute;left:87.54px;top:455.07px" class="cls_002"><span class="cls_002">via a web API, this approach is not really an option.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:489.39px" class="cls_002"><span class="cls_002">Publicly exposed APIs cannot predict whether they are to be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:506.20px" class="cls_002"><span class="cls_002">consumed by a human or by an application. Also, APIs aren't</span>
    </div>
    <div style="position:absolute;left:87.54px;top:523.00px" class="cls_002"><span class="cls_002">usually consumed directly by humans. Thus, third-party</span>
    </div>
    <div style="position:absolute;left:87.54px;top:539.81px" class="cls_002"><span class="cls_002">authentication is the only option when you, as API authors, are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:556.62px" class="cls_002"><span class="cls_002">convinced that the exposed data will be directly available to the end</span>
    </div>
    <div style="position:absolute;left:87.54px;top:573.43px" class="cls_002"><span class="cls_002">users who have requested it manually through a frontend from an</span>
    </div>
    <div style="position:absolute;left:87.54px;top:590.23px" class="cls_002"><span class="cls_002">internet browser. Once they have successfully logged into their</span>
    </div>
    <div style="position:absolute;left:87.54px;top:607.04px" class="cls_002"><span class="cls_002">social account, a unique user identifier will be stored in a session, so</span>
    </div>
    <div style="position:absolute;left:87.54px;top:623.85px" class="cls_002"><span class="cls_002">your service will need to be able to handle such sessions</span>
    </div>
    <div style="position:absolute;left:87.54px;top:640.66px" class="cls_002"><span class="cls_002">appropriately.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:674.97px" class="cls_002"><span class="cls_002">To enable session support for storing user login information with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:691.78px" class="cls_002"><span class="cls_002">Passport and Express, you have to initialize the Express session</span>
    </div>
    <div style="position:absolute;left:87.54px;top:708.59px" class="cls_002"><span class="cls_002">middleware before initializing Passport and its session middleware:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:201687px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background238.jpg" width=595 height=841></div>
    <div style="position:absolute;left:101.55px;top:114.01px" class="cls_010"><span class="cls_010">app.use(express.session());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:126.62px" class="cls_010"><span class="cls_010">app.use(passport.initialize());</span>
    </div>
    <div style="position:absolute;left:101.55px;top:139.22px" class="cls_010"><span class="cls_010">app.use(passport.session());</span>
    </div>
    <div style="position:absolute;left:87.54px;top:170.74px" class="cls_002"><span class="cls_002">Then, specify the user whose details Passport should</span>
    </div>
    <div style="position:absolute;left:87.54px;top:187.55px" class="cls_002"><span class="cls_002">serialize/deserialize into or out of the session. For that purpose,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:204.35px" class="cls_002"><span
            class="cls_002">Passport provides the </span><span class="cls_008">serializeUser()</span><span
            class="cls_002"> and </span><span class="cls_008">deserializeUser()</span><span
            class="cls_002"> functions,</span></div>
    <div style="position:absolute;left:87.54px;top:221.16px" class="cls_002"><span class="cls_002">which store complete user information in a session:</span>
    </div>
    <div style="position:absolute;left:101.55px;top:265.28px" class="cls_010"><span class="cls_010">passport.serializeUser(function(user, done) { done(null, user); });</span>
    </div>
    <div style="position:absolute;left:101.55px;top:277.89px" class="cls_010"><span class="cls_010">passport.deserializeUser(function(obj, done) { done(null, obj); });</span>
    </div>
    <div style="position:absolute;left:132.36px;top:298.90px" class="cls_009"><span class="cls_009">The order of initializing the session handling of the Express and Passport</span>
    </div>
    <div style="position:absolute;left:132.36px;top:310.80px" class="cls_009"><span class="cls_009">middleware is important. The Express session should be passed to the</span>
    </div>
    <div style="position:absolute;left:132.36px;top:322.71px" class="cls_009"><span class="cls_009">application first and should be followed by the Passport session.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:345.12px" class="cls_002"><span class="cls_002">After enabling session support, you have to decide which third-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:361.93px" class="cls_002"><span class="cls_002">party authentication strategy to rely on. Basically, third-party</span>
    </div>
    <div style="position:absolute;left:87.54px;top:378.74px" class="cls_002"><span class="cls_002">authentication is enabled via a plugin or application created by the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:395.54px" class="cls_002"><span class="cls_002">third-party provider, for example, a social service site. We will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:412.35px" class="cls_002"><span class="cls_002">briefly look at creating a LinkedIn application that allows</span>
    </div>
    <div style="position:absolute;left:87.54px;top:429.16px" class="cls_002"><span class="cls_002">authentication via the OAuth standard.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:463.47px" class="cls_002"><span class="cls_002">Usually, this is done via a pair of public key and a secret (token)</span>
    </div>
    <div style="position:absolute;left:87.54px;top:480.28px" class="cls_002"><span class="cls_002">associated with the social media application. Creating a LinkedIn</span>
    </div>
    <div style="position:absolute;left:87.54px;top:497.09px" class="cls_002"><span class="cls_002">application is easy—you just have to log into </span><A
            HREF="http://www.linkedin.com/secu/">http://www.linkedin.com/secu</A> </span></div>
    <div style="position:absolute;left:87.54px;top:513.90px" class="cls_007"><span
            class="cls_007">re/developer</span><span class="cls_002"> and fill out a brief application information form. You will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:530.71px" class="cls_002"><span class="cls_002">be given a secret key and a token to enable the authentication.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:547.51px" class="cls_002"><span class="cls_002">Perform the following steps to enable LinkedIn authentication:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:587.43px" class="cls_002"><span
            class="cls_002">1. Install the </span><span class="cls_008">linkedin-strategy</span><span class="cls_002"> module—</span><span
            class="cls_008">npm install linkedin-strategy</span></div>
    <div style="position:absolute;left:114.15px;top:636.45px" class="cls_002"><span class="cls_002">2. Get an instance of the LinkedIn strategy and initialize it to</span>
    </div>
    <div style="position:absolute;left:133.06px;top:655.36px" class="cls_002"><span class="cls_002">the Passport middleware by the </span><span
            class="cls_008">use()</span><span class="cls_002"> function after session</span></div>
    <div style="position:absolute;left:133.06px;top:672.17px" class="cls_002"><span class="cls_002">support has been enabled:</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:202538px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background239.jpg" width=595 height=841></div>
    <div style="position:absolute;left:131.75px;top:114.01px" class="cls_010"><span class="cls_010">var passport = require('passport')</span>
    </div>
    <div style="position:absolute;left:141.82px;top:126.62px" class="cls_010"><span class="cls_010">, LinkedInStrategy = require('passport-</span>
    </div>
    <div style="position:absolute;left:141.82px;top:139.23px" class="cls_010"><span
            class="cls_010">linkedin').Strategy;</span></div>
    <div style="position:absolute;left:141.82px;top:164.44px" class="cls_010"><span class="cls_010">app.use(express.session());</span>
    </div>
    <div style="position:absolute;left:141.82px;top:177.04px" class="cls_010"><span class="cls_010">app.use(passport.initialize());</span>
    </div>
    <div style="position:absolute;left:141.82px;top:189.65px" class="cls_010"><span class="cls_010">app.use(passport.session());</span>
    </div>
    <div style="position:absolute;left:131.75px;top:214.86px" class="cls_010"><span class="cls_010">passport.serializeUser(function(user, done) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:227.47px" class="cls_010"><span
            class="cls_010">done(null, user);</span></div>
    <div style="position:absolute;left:131.75px;top:240.07px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:131.75px;top:265.28px" class="cls_010"><span class="cls_010">passport.deserializeUser(function(obj, done) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:277.89px" class="cls_010"><span
            class="cls_010">done(null, obj);</span></div>
    <div style="position:absolute;left:131.75px;top:290.50px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:141.82px;top:315.71px" class="cls_010"><span class="cls_010">passport.use(new LinkedInStragety({</span>
    </div>
    <div style="position:absolute;left:151.88px;top:328.31px" class="cls_010"><span class="cls_010">consumerKey: 'api-key',</span>
    </div>
    <div style="position:absolute;left:151.88px;top:340.92px" class="cls_010"><span class="cls_010">consumerSecret: 'secret-key',</span>
    </div>
    <div style="position:absolute;left:151.88px;top:353.52px" class="cls_010"><span
            class="cls_010">callbackURL: "</span><A HREF="http://localhost:3000/catalog/v2"/">http://localhost:3000/catalog/v2"</A>
    </div>
    <div style="position:absolute;left:141.82px;top:366.13px" class="cls_010"><span class="cls_010">},</span></div>
    <div style="position:absolute;left:151.88px;top:378.74px" class="cls_010"><span class="cls_010">function(token, tokenSecret, profile, done) {</span>
    </div>
    <div style="position:absolute;left:161.95px;top:391.34px" class="cls_010"><span class="cls_010">process.nextTick(function () {</span>
    </div>
    <div style="position:absolute;left:172.02px;top:403.95px" class="cls_010"><span class="cls_010">return done(null, profile);</span>
    </div>
    <div style="position:absolute;left:161.95px;top:416.55px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:151.88px;top:429.16px" class="cls_010"><span class="cls_010">})</span></div>
    <div style="position:absolute;left:141.82px;top:441.77px" class="cls_010"><span class="cls_010">);</span></div>
    <div style="position:absolute;left:114.15px;top:485.89px" class="cls_002"><span class="cls_002">3. Explicitly specify that the LinkedIn strategy should be used</span>
    </div>
    <div style="position:absolute;left:133.06px;top:504.79px" class="cls_002"><span class="cls_002">as Passport for each individual route, ensuring that session</span>
    </div>
    <div style="position:absolute;left:133.06px;top:521.60px" class="cls_002"><span
            class="cls_002">handling is enabled:</span></div>
    <div style="position:absolute;left:131.75px;top:576.23px" class="cls_010"><span
            class="cls_010">router.get('/v2/',</span></div>
    <div style="position:absolute;left:141.82px;top:588.83px" class="cls_010"><span
            class="cls_010">cache('minutes',1),</span></div>
    <div style="position:absolute;left:141.82px;top:601.44px" class="cls_010"><span class="cls_010">passport.authenticate('linked', { session: true}),</span>
    </div>
    <div style="position:absolute;left:141.82px;top:614.05px" class="cls_010"><span class="cls_010">function(request, response) {</span>
    </div>
    <div style="position:absolute;left:151.88px;top:626.65px" class="cls_010"><span class="cls_010">//...</span></div>
    <div style="position:absolute;left:141.82px;top:639.26px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:131.75px;top:651.86px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:114.15px;top:695.98px" class="cls_002"><span class="cls_002">4. Provide a means for a user to log out by exposing a logout</span>
    </div>
    <div style="position:absolute;left:133.06px;top:714.89px" class="cls_002"><span
            class="cls_002">URI, making use of </span><span class="cls_008">request.logout</span><span
            class="cls_002">:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:203389px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background240.jpg" width=595 height=841></div>
    <div style="position:absolute;left:131.75px;top:114.01px" class="cls_010"><span class="cls_010">router.get('/logout', function(req, res){</span>
    </div>
    <div style="position:absolute;left:131.75px;top:126.62px" class="cls_010"><span
            class="cls_010">request.logout();</span></div>
    <div style="position:absolute;left:141.82px;top:139.23px" class="cls_010"><span class="cls_010">response.redirect('/catalog');</span>
    </div>
    <div style="position:absolute;left:131.75px;top:151.83px" class="cls_010"><span class="cls_010">});</span></div>
    <div style="position:absolute;left:132.36px;top:185.45px" class="cls_009"><span class="cls_009">The given third-party URLs and service data are subject to change. You</span>
    </div>
    <div style="position:absolute;left:132.36px;top:197.35px" class="cls_009"><span class="cls_009">should always refer to the service policy when providing third-party</span>
    </div>
    <div style="position:absolute;left:132.36px;top:209.26px" class="cls_009"><span
            class="cls_009">authentication.</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:204240px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background241.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Authorization</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">So far, the catalog data service uses basic authentication to protect</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">its routes from unknown users; however, a catalog application</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">should allow only few white-listed users to modify the items inside</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">the catalog. To restrict access to the catalog, we will introduce the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">concept of authorization, that is, a subset of authenticated users,</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">with appropriate permission allowed.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:323.41px" class="cls_002"><span
            class="cls_002">When Passport's </span><span class="cls_008">done()</span><span class="cls_002"> function is invoked to authenticate a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">successful login, it takes as an argument a </span><span
            class="cls_008">user</span><span class="cls_002"> instance of the user</span></div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">that has been granted authentication. The </span><span
            class="cls_008">done()</span><span class="cls_002"> function adds that</span></div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">user model instance to the </span><span
            class="cls_008">request</span><span class="cls_002"> object, and, in this way, provides</span></div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span
            class="cls_002">access to it via the </span><span class="cls_008">request.user</span><span class="cls_002"> property, after successful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">authentication. We will make use of that property to implement a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">function performing the authorization check after successful</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span
            class="cls_002">authentication:</span></div>
    <div style="position:absolute;left:101.55px;top:485.19px" class="cls_010"><span class="cls_010">function authorize(user, response) {</span>
    </div>
    <div style="position:absolute;left:111.61px;top:497.79px" class="cls_010"><span class="cls_010">if ((user == null) || (user.role != 'Admin')) {</span>
    </div>
    <div style="position:absolute;left:121.68px;top:510.40px" class="cls_010"><span class="cls_010">response.writeHead(403, { 'Content-Type' :</span>
    </div>
    <div style="position:absolute;left:121.68px;top:523.00px" class="cls_010"><span
            class="cls_010">'text/plain'});</span></div>
    <div style="position:absolute;left:121.68px;top:535.61px" class="cls_010"><span class="cls_010">response.end('Forbidden');</span>
    </div>
    <div style="position:absolute;left:121.68px;top:548.21px" class="cls_010"><span class="cls_010">return;</span></div>
    <div style="position:absolute;left:111.61px;top:560.82px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:573.43px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:132.36px;top:594.44px" class="cls_009"><span class="cls_009">The HTTP 403 Forbidden status code can be easily confused with 405 Not</span>
    </div>
    <div style="position:absolute;left:132.36px;top:606.34px" class="cls_009"><span class="cls_009">allowed. However, the 405 Not Allowed status code indicates that a specific</span>
    </div>
    <div style="position:absolute;left:132.36px;top:618.25px" class="cls_009"><span class="cls_009">HTTP verb is not supported by the requested resource, so it should be used</span>
    </div>
    <div style="position:absolute;left:132.36px;top:630.15px" class="cls_009"><span class="cls_009">only in that context.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:652.56px" class="cls_002"><span class="cls_002">The </span><span
            class="cls_008">authorize()</span><span class="cls_002"> function will close the </span><span
            class="cls_008">response</span><span class="cls_002"> stream, returning the </span><span
            class="cls_008">403</span></div>
    <div style="position:absolute;left:87.54px;top:669.37px" class="cls_008"><span class="cls_008">Forbidden</span><span
            class="cls_002"> status code, which indicates that the logged-in user is</span></div>
    <div style="position:absolute;left:87.54px;top:686.18px" class="cls_002"><span class="cls_002">recognized but has insufficient permissions. This revokes access to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:702.99px" class="cls_002"><span class="cls_002">the resource. This function has to be used in each route that carries</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:205091px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background242.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.13px" class="cls_002"><span class="cls_002">out data manipulation.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:138.52px" class="cls_002"><span class="cls_002">Here's an example of how a </span><span
            class="cls_008">post</span><span class="cls_002"> route implements authorization:</span></div>
    <div style="position:absolute;left:101.55px;top:182.64px" class="cls_010"><span
            class="cls_010">app.post('/v2',</span></div>
    <div style="position:absolute;left:111.61px;top:195.25px" class="cls_010"><span class="cls_010">passport.authenticate('basic', { session: false }),</span>
    </div>
    <div style="position:absolute;left:121.68px;top:207.86px" class="cls_010"><span class="cls_010">function(request, response) {</span>
    </div>
    <div style="position:absolute;left:131.75px;top:220.46px" class="cls_010"><span class="cls_010">authorize(request.user, response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:233.07px" class="cls_010"><span class="cls_010">if (!response.closed) {</span>
    </div>
    <div style="position:absolute;left:141.82px;top:245.67px" class="cls_010"><span class="cls_010">catalogV2.saveItem(request, response);</span>
    </div>
    <div style="position:absolute;left:131.75px;top:258.28px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:121.68px;top:270.89px" class="cls_010"><span class="cls_010">}</span></div>
    <div style="position:absolute;left:101.55px;top:283.49px" class="cls_010"><span class="cls_010">);</span></div>
    <div style="position:absolute;left:87.54px;top:315.01px" class="cls_002"><span class="cls_002">After </span><span
            class="cls_008">authorize()</span><span class="cls_002"> is invoked, we check whether the </span><span
            class="cls_008">response</span><span class="cls_002"> object still</span></div>
    <div style="position:absolute;left:87.54px;top:331.81px" class="cls_002"><span class="cls_002">allows writing to its output by checking the value of the closed</span>
    </div>
    <div style="position:absolute;left:87.54px;top:348.62px" class="cls_002"><span
            class="cls_002">property of the </span><span class="cls_008">response</span><span class="cls_002"> object. It will return </span><span
            class="cls_008">true</span><span class="cls_002"> once the end</span></div>
    <div style="position:absolute;left:87.54px;top:365.43px" class="cls_002"><span
            class="cls_002">function of the </span><span class="cls_008">response</span><span class="cls_002"> object has been called, which is exactly what</span>
    </div>
    <div style="position:absolute;left:87.54px;top:382.24px" class="cls_002"><span class="cls_002">the </span><span
            class="cls_008">authorize()</span><span class="cls_002"> function does when the user lacks admin permissions.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:399.04px" class="cls_002"><span class="cls_002">Thus, we can rely on the closed property in our implementation.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:205942px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background243.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Transport layer security</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Publicly available information in the web easily becomes the subject</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">of different types of cyber attacks. Often it is not enough just to keep</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">the so-called "bad guys" out. Sometimes, they won't bother gaining</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">authentication at all and may prefer to carry out a man-in-the-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">middle (MiM) attack, pretending to be the final receiver of a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">message and sniffing the communication channel that transmits the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">data—or, even worse, altering the data while it flows.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">Being a text-based protocol, HTTP transfers data in a human-</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">readable format, which makes it an easy victim of MiM attacks.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">Unless transferred in an encrypted format, all the catalog data of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">our service is vulnerable to MiM attacks. In this section, we will</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">switch our transport from an insecure HTTP protocol to the secure</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span
            class="cls_002">HTTPS protocol.</span></div>
    <div style="position:absolute;left:87.54px;top:458.57px" class="cls_002"><span class="cls_002">HTTPS is secured by asymmetric cryptography, also known as</span>
    </div>
    <div style="position:absolute;left:87.54px;top:475.38px" class="cls_002"><span class="cls_002">public-key encryption. It is based on a pair of keys that are</span>
    </div>
    <div style="position:absolute;left:87.54px;top:492.19px" class="cls_002"><span class="cls_002">mathematically related. The key used for encryption is called</span>
    </div>
    <div style="position:absolute;left:87.54px;top:509.00px" class="cls_002"><span class="cls_002">public key, and the key used for decryption is called private key.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">The idea is to freely provide the encryption key to partners who</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span class="cls_002">have to send encrypted messages and to perform decryption with</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span
            class="cls_002">the private key.</span></div>
    <div style="position:absolute;left:87.54px;top:593.74px" class="cls_002"><span class="cls_002">A typical public-key encryption communication scenario between</span>
    </div>
    <div style="position:absolute;left:87.54px;top:610.54px" class="cls_002"><span
            class="cls_002">two parties, </span><span class="cls_003">A</span><span class="cls_002"> and </span><span
            class="cls_003">B</span><span class="cls_002">, will be the following:</span></div>
    <div style="position:absolute;left:115.55px;top:650.46px" class="cls_002"><span
            class="cls_002">1. Party </span><span class="cls_003">A</span><span class="cls_002"> composes a message, encrypts it with Party B's</span>
    </div>
    <div style="position:absolute;left:133.06px;top:669.37px" class="cls_002"><span class="cls_002">public key, and sends it</span>
    </div>
    <div style="position:absolute;left:114.15px;top:698.78px" class="cls_002"><span
            class="cls_002">2. Party </span><span class="cls_003">B</span><span class="cls_002"> decrypts the message with its own private key and</span>
    </div>
    <div style="position:absolute;left:133.06px;top:717.69px" class="cls_002"><span class="cls_002">processes it</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:206793px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background244.jpg" width=595 height=841></div>
    <div style="position:absolute;left:114.15px;top:116.81px" class="cls_002"><span
            class="cls_002">3. Party </span><span class="cls_003">B</span><span class="cls_002"> composes a response message, encrypts it with Party</span>
    </div>
    <div style="position:absolute;left:133.06px;top:135.72px" class="cls_003"><span class="cls_003">A</span><span
            class="cls_002">'s public key, and then sends it</span></div>
    <div style="position:absolute;left:114.15px;top:165.14px" class="cls_002"><span
            class="cls_002">4. Party </span><span class="cls_003">A</span><span class="cls_002"> decrypts the response message with its own private</span>
    </div>
    <div style="position:absolute;left:133.06px;top:184.05px" class="cls_002"><span class="cls_002">key</span></div>
    <div style="position:absolute;left:87.54px;top:228.87px" class="cls_002"><span class="cls_002">Now that we know how public-key encryption works, let's go</span>
    </div>
    <div style="position:absolute;left:87.54px;top:245.67px" class="cls_002"><span class="cls_002">through a sample of HTTPS client-server communication, as shown</span>
    </div>
    <div style="position:absolute;left:87.54px;top:262.48px" class="cls_002"><span
            class="cls_002">in this diagram:</span></div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:207644px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background245.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:605.64px" class="cls_002"><span class="cls_002">The client sends an initial request against an SSL-secured endpoint.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:622.45px" class="cls_002"><span class="cls_002">The server responds to that request by sending its public key to be</span>
    </div>
    <div style="position:absolute;left:87.54px;top:639.26px" class="cls_002"><span class="cls_002">used for encrypting further incoming requests. Then, the client has</span>
    </div>
    <div style="position:absolute;left:87.54px;top:656.06px" class="cls_002"><span class="cls_002">to check the validity and verify the identity of the received key. After</span>
    </div>
    <div style="position:absolute;left:87.54px;top:672.87px" class="cls_002"><span class="cls_002">successful verification of the server's public key, the client has to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:689.68px" class="cls_002"><span class="cls_002">send its own public key back to the server. Finally, after the key</span>
    </div>
    <div style="position:absolute;left:87.54px;top:706.49px" class="cls_002"><span class="cls_002">exchange procedure is complete, the two parties can start</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:208495px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background246.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_002"><span class="cls_002">communicating securely.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:138.52px" class="cls_002"><span class="cls_002">HTTPS relies on trust; thus, it is vital to have a reliable way of</span>
    </div>
    <div style="position:absolute;left:87.54px;top:155.33px" class="cls_002"><span class="cls_002">checking whether a specific public key belongs to a specific server.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:172.14px" class="cls_002"><span class="cls_002">Public keys are exchanged within an X.509 certificate, which has a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:188.95px" class="cls_002"><span class="cls_002">hierarchical structure. This structure enables clients to check</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">whether a given certificate has been generated from a trusted root</span>
    </div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002">certificate. Clients should trust only certificates that have been</span>
    </div>
    <div style="position:absolute;left:87.54px;top:239.37px" class="cls_002"><span class="cls_002">issued by a known certificate authority (CA).</span>
    </div>
    <div style="position:absolute;left:87.54px;top:273.69px" class="cls_002"><span class="cls_002">Before switching our service to use the HTTPS transport, we need a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:290.50px" class="cls_002"><span class="cls_002">public/private key pair. Since we are not a certificate authority, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:307.30px" class="cls_002"><span class="cls_002">will have to use OpenSSL tooling to generate test keys for us.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:341.62px" class="cls_002"><span class="cls_002">OpenSSL is available for download at </span><A
            HREF="http://www.openssl.org/">http://www.openssl.org/</A> </span><span class="cls_002">, where</span></div>
    <div style="position:absolute;left:87.54px;top:358.43px" class="cls_002"><span class="cls_002">source code distributions are available for all popular operating</span>
    </div>
    <div style="position:absolute;left:87.54px;top:375.23px" class="cls_002"><span class="cls_002">systems. OpenSSL can be installed as follows:</span>
    </div>
    <div style="position:absolute;left:115.55px;top:415.15px" class="cls_002"><span class="cls_002">1. Binary distribution is available for download for Windows,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:434.06px" class="cls_002"><span class="cls_002">and Debian and Ubuntu users can make use of the packaged</span>
    </div>
    <div style="position:absolute;left:133.06px;top:450.87px" class="cls_002"><span class="cls_002">distribution by executing the following:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:505.49px" class="cls_010"><span class="cls_010">sudo apt-get install openssl</span>
    </div>
    <div style="position:absolute;left:132.36px;top:526.50px" class="cls_009"><span class="cls_009">Windows users will have to set an environment variable, OPENSSL_CNF,</span>
    </div>
    <div style="position:absolute;left:132.36px;top:538.41px" class="cls_009"><span class="cls_009">specifying the location of the </span><span
            class="cls_017">openssl.cnf</span><span class="cls_009"> configuration file, typically located in</span>
    </div>
    <div style="position:absolute;left:132.36px;top:550.32px" class="cls_009"><span class="cls_009">the share directory in the installation archive.</span>
    </div>
    <div style="position:absolute;left:114.15px;top:585.33px" class="cls_002"><span class="cls_002">2. Now let's generate a test key/value pair with OpenSSL:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:642.06px" class="cls_010"><span class="cls_010">opensslreq -x509 -nodes -days 365 -newkey rsa:2048-keyoutcatalog.pem</span>
    </div>
    <div style="position:absolute;left:140.77px;top:654.66px" class="cls_010"><span
            class="cls_010">-out catalog.crt</span></div>
    <div style="position:absolute;left:87.54px;top:686.18px" class="cls_002"><span class="cls_002">OpenSSL will prompt some details required for generating the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:702.99px" class="cls_002"><span class="cls_002">certificate, such as country code, city, and fully qualified domain</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:209346px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background247.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.13px" class="cls_002"><span class="cls_002">name. Afterward, it will generate a private key in the </span><span
            class="cls_008">catalog.pem</span><span class="cls_002"> file</span></div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">and a public key certificate that will be valid for a year in the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.75px" class="cls_008"><span
            class="cls_008">catalog.crt</span><span class="cls_002"> file. We will be using these newly generated files, so copy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.56px" class="cls_002"><span class="cls_002">them into a new subdirectory, called </span><span
            class="cls_008">ssl</span><span class="cls_002">, in the catalog data service</span></div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">directory.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.76px" class="cls_002"><span class="cls_002">Now we have everything needed to modify our service to use</span>
    </div>
    <div style="position:absolute;left:87.54px;top:222.56px" class="cls_002"><span class="cls_002"> </span><A
            HREF="https:/">HTTPS:</A></div>
    <div style="position:absolute;left:115.55px;top:262.48px" class="cls_002"><span class="cls_002">1. First, we need to switch and use the HTTPS module instead</span>
    </div>
    <div style="position:absolute;left:133.06px;top:281.39px" class="cls_002"><span class="cls_002">of HTTP and specify the port that we want to use to enable</span>
    </div>
    <div style="position:absolute;left:133.06px;top:298.20px" class="cls_002"><span
            class="cls_002">HTTPS communication:</span></div>
    <div style="position:absolute;left:140.77px;top:352.82px" class="cls_010"><span class="cls_010">var https = require('https');</span>
    </div>
    <div style="position:absolute;left:140.77px;top:365.43px" class="cls_010"><span
            class="cls_010">var app = express();</span></div>
    <div style="position:absolute;left:140.77px;top:378.04px" class="cls_010"><span class="cls_010">app.set('port', process.env.PORT || 3443);</span>
    </div>
    <div style="position:absolute;left:114.15px;top:422.16px" class="cls_002"><span class="cls_002">2. Then, we have to read the private key from the </span><span
            class="cls_008">catalog.cem</span><span class="cls_002"> file</span></div>
    <div style="position:absolute;left:133.06px;top:441.06px" class="cls_002"><span class="cls_002">and the certificate from </span><span
            class="cls_008">catalog.crt</span><span class="cls_002"> into an array:</span></div>
    <div style="position:absolute;left:140.77px;top:495.69px" class="cls_010"><span class="cls_010">var options = {key : fs.readFileSync('./ssl/catalog.pem'),</span>
    </div>
    <div style="position:absolute;left:221.30px;top:508.30px" class="cls_010"><span class="cls_010">cert : fs.readFileSync('./ssl/catalog.crt')</span>
    </div>
    <div style="position:absolute;left:140.77px;top:520.90px" class="cls_010"><span class="cls_010">};</span></div>
    <div style="position:absolute;left:114.15px;top:565.02px" class="cls_002"><span class="cls_002">3. Finally, we pass the array containing the key pair to the</span>
    </div>
    <div style="position:absolute;left:133.06px;top:583.93px" class="cls_002"><span class="cls_002">HTTPS instance when creating the server and start listening</span>
    </div>
    <div style="position:absolute;left:133.06px;top:600.74px" class="cls_002"><span class="cls_002">through the specified port:</span>
    </div>
    <div style="position:absolute;left:140.77px;top:655.36px" class="cls_010"><span class="cls_010">https.createServer(options, app).listen(app.get('port'));</span>
    </div>
    <div style="position:absolute;left:87.54px;top:686.88px" class="cls_002"><span class="cls_002">That's all you need to do to enable HTTPS for an Express-based</span>
    </div>
    <div style="position:absolute;left:87.54px;top:703.69px" class="cls_002"><span class="cls_002">application. Save your changes and give it a try by requesting</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:210197px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background248.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:104.21px" class="cls_008"><span class="cls_008"> </span><A
            HREF="https://localhost:3443/catalog/v2/">https://localhost:3443/catalog/v2</A> <span class="cls_002"> in a browser. You will be shown a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:121.02px" class="cls_002"><span class="cls_002">warning message informing you that the server you are connecting</span>
    </div>
    <div style="position:absolute;left:87.54px;top:137.82px" class="cls_002"><span class="cls_002">to is using a certificate that is not issued by a trusted certificate</span>
    </div>
    <div style="position:absolute;left:87.54px;top:154.63px" class="cls_002"><span class="cls_002">authority. That's normal, as we generated the certificate on our</span>
    </div>
    <div style="position:absolute;left:87.54px;top:171.44px" class="cls_002"><span class="cls_002">own, and we are not a CA for sure, so just ignore that warning.</span>
    </div>
    <div style="position:absolute;left:132.36px;top:217.66px" class="cls_009"><span class="cls_009">Before deploying a service on a production environment, you should always</span>
    </div>
    <div style="position:absolute;left:132.36px;top:229.57px" class="cls_009"><span class="cls_009">ensure that you use a server certificate issued by a trusted CA.</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:211048px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background249.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span
            class="cls_004">Self-test questions</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">Go through the following questions:</span>
    </div>
    <div style="position:absolute;left:133.06px;top:244.97px" class="cls_002"><span class="cls_002">Is HTTP basic authentication secure against man-in-the-</span>
    </div>
    <div style="position:absolute;left:133.06px;top:263.88px" class="cls_002"><span
            class="cls_002">middle attacks?</span></div>
    <div style="position:absolute;left:133.06px;top:293.30px" class="cls_002"><span class="cls_002">What are the benefits of Transport Layer Security?</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:211899px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background250.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Summary</span></div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">In this chapter, you learned how to protect exposed data by</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">enabling a means of authentication and authorization. This is a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:238.67px" class="cls_002"><span class="cls_002">critical aspect of any publicly available data service. In addition, you</span>
    </div>
    <div style="position:absolute;left:87.54px;top:255.48px" class="cls_002"><span class="cls_002">learned how to prevent man-in-the-middle attacks using the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:272.29px" class="cls_002"><span class="cls_002">secured layer transport protocol between a service and its users. As</span>
    </div>
    <div style="position:absolute;left:87.54px;top:289.09px" class="cls_002"><span class="cls_002">a developer of such services, you should always consider the most</span>
    </div>
    <div style="position:absolute;left:87.54px;top:305.90px" class="cls_002"><span class="cls_002">appropriate security features that your application should support.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:340.22px" class="cls_002"><span class="cls_002">I hope this was a useful experience! You gained enough knowledge</span>
    </div>
    <div style="position:absolute;left:87.54px;top:357.03px" class="cls_002"><span class="cls_002">and practical experience, which should have made you much more</span>
    </div>
    <div style="position:absolute;left:87.54px;top:373.83px" class="cls_002"><span class="cls_002">confident in understanding how RESTful APIs work and how they</span>
    </div>
    <div style="position:absolute;left:87.54px;top:390.64px" class="cls_002"><span class="cls_002">are designed and developed. I strongly encourage you to go through</span>
    </div>
    <div style="position:absolute;left:87.54px;top:407.45px" class="cls_002"><span class="cls_002">the code evolution chapter by chapter. You should be able to further</span>
    </div>
    <div style="position:absolute;left:87.54px;top:424.26px" class="cls_002"><span class="cls_002">refactor it, adopting it to your own coding style. Of course, some</span>
    </div>
    <div style="position:absolute;left:87.54px;top:441.06px" class="cls_002"><span class="cls_002">parts of it can be further optimized, as they repeat quite often. That</span>
    </div>
    <div style="position:absolute;left:87.54px;top:457.87px" class="cls_002"><span class="cls_002">is an intentional decision rather than good practice, as I wanted to</span>
    </div>
    <div style="position:absolute;left:87.54px;top:474.68px" class="cls_002"><span class="cls_002">emphasize their importance. You should always strive to improve</span>
    </div>
    <div style="position:absolute;left:87.54px;top:491.49px" class="cls_002"><span class="cls_002">your code-base, making it easier to maintain.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:525.80px" class="cls_002"><span class="cls_002">Finally, I would like to encourage you to always follow the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:542.61px" class="cls_002"><span
            class="cls_002">development of the </span><span class="cls_008">Node.js</span><span class="cls_002"> modules you use in your applications.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:559.42px" class="cls_002"><span class="cls_002">Node.js has an extraordinary community that is eager to grow</span>
    </div>
    <div style="position:absolute;left:87.54px;top:576.23px" class="cls_002"><span class="cls_002">rapidly. There is always something exciting going on there, so</span>
    </div>
    <div style="position:absolute;left:87.54px;top:593.04px" class="cls_002"><span class="cls_002">ensure that you don't miss it. Good luck!</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:212750px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background251.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Other Books You May Enjoy</span>
    </div>
    <div style="position:absolute;left:87.54px;top:205.06px" class="cls_002"><span class="cls_002">If you enjoyed this book, you may be interested in these other books</span>
    </div>
    <div style="position:absolute;left:87.54px;top:221.86px" class="cls_002"><span class="cls_002">by Packt:</span>
    </div>
    <div style="position:absolute;left:87.54px;top:385.04px" class="cls_002"><span class="cls_002">Mastering Node.js - Second Edition</span>
    </div>
    <div style="position:absolute;left:87.54px;top:401.85px" class="cls_002"><span class="cls_002">Sandro Pasquali, Kevin Faaborg</span>
    </div>
    <div style="position:absolute;left:87.54px;top:436.16px" class="cls_002"><span class="cls_002">ISBN: 978-1-78588-896-0</span>
    </div>
    <div style="position:absolute;left:133.06px;top:476.08px" class="cls_002"><span class="cls_002">Build an Electron desktop app using Node that manages a</span>
    </div>
    <div style="position:absolute;left:133.06px;top:497.09px" class="cls_002"><span class="cls_002">filesystem</span>
    </div>
    <div style="position:absolute;left:133.06px;top:527.20px" class="cls_002"><span class="cls_002">Explore Streams and understand how they apply to building</span>
    </div>
    <div style="position:absolute;left:133.06px;top:548.21px" class="cls_002"><span
            class="cls_002">networked services</span></div>
    <div style="position:absolute;left:133.06px;top:578.33px" class="cls_002"><span class="cls_002">Develop and deploy an SMS-driven customer service</span>
    </div>
    <div style="position:absolute;left:133.06px;top:599.34px" class="cls_002"><span class="cls_002">application</span>
    </div>
    <div style="position:absolute;left:133.06px;top:629.45px" class="cls_002"><span class="cls_002">Use WebSockets for rapid bi-directional communication</span>
    </div>
    <div style="position:absolute;left:133.06px;top:659.57px" class="cls_002"><span class="cls_002">Construct serverless applications with Amazon Lambda</span>
    </div>
    <div style="position:absolute;left:133.06px;top:689.68px" class="cls_002"><span class="cls_002">Test and debug with headless browsers, CPU profiling,</span>
    </div>
    <div style="position:absolute;left:133.06px;top:710.69px" class="cls_002"><span class="cls_002">Mocha, Sinon, and more</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:213601px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background252.jpg" width=595 height=841></div>
    <div style="position:absolute;left:133.06px;top:106.31px" class="cls_002"><span class="cls_002">Scale applications vertically and horizontally across multiple</span>
    </div>
    <div style="position:absolute;left:133.06px;top:127.32px" class="cls_002"><span class="cls_002">cores and web services</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">Learning Node.js Development</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">Andrew Mead</span>
    </div>
    <div style="position:absolute;left:87.54px;top:354.22px" class="cls_002"><span class="cls_002">ISBN: 978-1-78839-554-0</span>
    </div>
    <div style="position:absolute;left:133.06px;top:394.14px" class="cls_002"><span class="cls_002">Learn the fundamentals of Node</span>
    </div>
    <div style="position:absolute;left:133.06px;top:424.26px" class="cls_002"><span class="cls_002">Build apps that respond to user input</span>
    </div>
    <div style="position:absolute;left:133.06px;top:454.37px" class="cls_002"><span class="cls_002">Master working with servers</span>
    </div>
    <div style="position:absolute;left:133.06px;top:484.48px" class="cls_002"><span class="cls_002">Learn how to test and debug applications</span>
    </div>
    <div style="position:absolute;left:133.06px;top:514.60px" class="cls_002"><span class="cls_002">Deploy and update your apps in the real world</span>
    </div>
    <div style="position:absolute;left:133.06px;top:544.71px" class="cls_002"><span class="cls_002">Create responsive asynchronous web applications</span>
    </div>
</div>
<div style="position:absolute;left:50%;margin-left:-297px;top:214452px;width:595px;height:841px;border-style:outset;overflow:hidden">
    <div style="position:absolute;left:0px;top:0px">
        <img src="img/background253.jpg" width=595 height=841></div>
    <div style="position:absolute;left:87.54px;top:161.64px" class="cls_004"><span class="cls_004">Leave a review - let other</span>
    </div>
    <div style="position:absolute;left:87.54px;top:192.45px" class="cls_004"><span class="cls_004">readers know what you think</span>
    </div>
    <div style="position:absolute;left:87.54px;top:235.87px" class="cls_002"><span class="cls_002">Please share your thoughts on this book with others by leaving a</span>
    </div>
    <div style="position:absolute;left:87.54px;top:252.68px" class="cls_002"><span class="cls_002">review on the site that you bought it from. If you purchased the</span>
    </div>
    <div style="position:absolute;left:87.54px;top:269.49px" class="cls_002"><span class="cls_002">book from Amazon, please leave us an honest review on this book's</span>
    </div>
    <div style="position:absolute;left:87.54px;top:286.29px" class="cls_002"><span class="cls_002">Amazon page. This is vital so that other potential readers can see</span>
    </div>
    <div style="position:absolute;left:87.54px;top:303.10px" class="cls_002"><span class="cls_002">and use your unbiased opinion to make purchasing decisions, we</span>
    </div>
    <div style="position:absolute;left:87.54px;top:319.91px" class="cls_002"><span class="cls_002">can understand what our customers think about our products, and</span>
    </div>
    <div style="position:absolute;left:87.54px;top:336.72px" class="cls_002"><span class="cls_002">our authors can see your feedback on the title that they have worked</span>
    </div>
    <div style="position:absolute;left:87.54px;top:353.52px" class="cls_002"><span class="cls_002">with Packt to create. It will only take a few minutes of your time, but</span>
    </div>
    <div style="position:absolute;left:87.54px;top:370.33px" class="cls_002"><span class="cls_002">is valuable to other potential customers, our authors, and Packt.</span>
    </div>
    <div style="position:absolute;left:87.54px;top:387.14px" class="cls_002"><span class="cls_002">Thank you!</span>
    </div>
</div>

</body>
</html>
